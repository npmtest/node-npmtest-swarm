{"/home/travis/build/npmtest/node-npmtest-swarm/test.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/test.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":1,"12":1,"13":1,"14":1,"15":2,"16":2,"17":2,"18":2,"19":1,"20":1,"21":2,"22":2,"23":2,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1,"35":1,"36":1,"37":1,"38":1,"39":2,"40":2,"41":1,"42":2,"43":2,"44":1,"45":2,"46":2,"47":1,"48":2,"49":2,"50":1,"51":1,"52":1,"53":1,"54":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[1,1],"5":[1,1],"6":[1,1],"7":[1,1],"8":[1,1],"9":[1,1],"10":[1,1,1],"11":[1,1],"12":[1,1],"13":[1,1],"14":[1,1],"15":[1,1],"16":[1,1],"17":[1,1]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":1,"7":1,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":5},"end":{"line":61,"column":17}}},"5":{"name":"(anonymous_5)","line":82,"loc":{"start":{"line":82,"column":5},"end":{"line":82,"column":17}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":77},"end":{"line":94,"column":10}}},"7":{"name":"(anonymous_7)","line":112,"loc":{"start":{"line":112,"column":83},"end":{"line":115,"column":10}},"skip":true},"8":{"name":"(anonymous_8)","line":123,"loc":{"start":{"line":123,"column":77},"end":{"line":126,"column":10}},"skip":true},"9":{"name":"(anonymous_9)","line":139,"loc":{"start":{"line":139,"column":12},"end":{"line":139,"column":40}},"skip":true},"10":{"name":"(anonymous_10)","line":147,"loc":{"start":{"line":147,"column":77},"end":{"line":150,"column":10}},"skip":true},"11":{"name":"(anonymous_11)","line":158,"loc":{"start":{"line":158,"column":83},"end":{"line":161,"column":10}},"skip":true},"12":{"name":"(anonymous_12)","line":169,"loc":{"start":{"line":169,"column":79},"end":{"line":172,"column":10}},"skip":true},"13":{"name":"(anonymous_13)","line":180,"loc":{"start":{"line":180,"column":75},"end":{"line":183,"column":10}},"skip":true}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":195,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":56,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":40,"column":8},"end":{"line":53,"column":9}},"11":{"start":{"line":43,"column":12},"end":{"line":46,"column":14}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":18}},"13":{"start":{"line":50,"column":12},"end":{"line":51,"column":33}},"14":{"start":{"line":52,"column":12},"end":{"line":52,"column":18}},"15":{"start":{"line":55,"column":8},"end":{"line":55,"column":35}},"16":{"start":{"line":61,"column":4},"end":{"line":63,"column":9}},"17":{"start":{"line":62,"column":8},"end":{"line":62,"column":15}},"18":{"start":{"line":64,"column":4},"end":{"line":77,"column":5}},"19":{"start":{"line":70,"column":8},"end":{"line":70,"column":14}},"20":{"start":{"line":76,"column":8},"end":{"line":76,"column":14}},"21":{"start":{"line":82,"column":4},"end":{"line":84,"column":9}},"22":{"start":{"line":83,"column":8},"end":{"line":83,"column":15}},"23":{"start":{"line":85,"column":4},"end":{"line":194,"column":5}},"24":{"start":{"line":91,"column":8},"end":{"line":99,"column":10}},"25":{"start":{"line":98,"column":12},"end":{"line":98,"column":35}},"26":{"start":{"line":102,"column":8},"end":{"line":104,"column":63}},"27":{"start":{"line":105,"column":8},"end":{"line":105,"column":14}},"28":{"start":{"line":112,"column":8},"end":{"line":121,"column":10},"skip":true},"29":{"start":{"line":119,"column":12},"end":{"line":119,"column":55},"skip":true},"30":{"start":{"line":120,"column":12},"end":{"line":120,"column":48},"skip":true},"31":{"start":{"line":123,"column":8},"end":{"line":136,"column":10},"skip":true},"32":{"start":{"line":130,"column":12},"end":{"line":130,"column":76},"skip":true},"33":{"start":{"line":131,"column":12},"end":{"line":131,"column":73},"skip":true},"34":{"start":{"line":132,"column":12},"end":{"line":132,"column":74},"skip":true},"35":{"start":{"line":133,"column":12},"end":{"line":133,"column":79},"skip":true},"36":{"start":{"line":134,"column":12},"end":{"line":134,"column":25},"skip":true},"37":{"start":{"line":135,"column":12},"end":{"line":135,"column":45},"skip":true},"38":{"start":{"line":138,"column":8},"end":{"line":145,"column":14},"skip":true},"39":{"start":{"line":143,"column":16},"end":{"line":143,"column":29},"skip":true},"40":{"start":{"line":144,"column":16},"end":{"line":144,"column":55},"skip":true},"41":{"start":{"line":147,"column":8},"end":{"line":156,"column":10},"skip":true},"42":{"start":{"line":154,"column":12},"end":{"line":154,"column":25},"skip":true},"43":{"start":{"line":155,"column":12},"end":{"line":155,"column":45},"skip":true},"44":{"start":{"line":158,"column":8},"end":{"line":167,"column":10},"skip":true},"45":{"start":{"line":165,"column":12},"end":{"line":165,"column":25},"skip":true},"46":{"start":{"line":166,"column":12},"end":{"line":166,"column":48},"skip":true},"47":{"start":{"line":169,"column":8},"end":{"line":178,"column":10},"skip":true},"48":{"start":{"line":176,"column":12},"end":{"line":176,"column":25},"skip":true},"49":{"start":{"line":177,"column":12},"end":{"line":177,"column":46},"skip":true},"50":{"start":{"line":180,"column":8},"end":{"line":189,"column":10},"skip":true},"51":{"start":{"line":187,"column":12},"end":{"line":187,"column":94},"skip":true},"52":{"start":{"line":188,"column":12},"end":{"line":188,"column":48},"skip":true},"53":{"start":{"line":192,"column":8},"end":{"line":192,"column":35},"skip":true},"54":{"start":{"line":193,"column":8},"end":{"line":193,"column":14},"skip":true}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":40,"type":"switch","locations":[{"start":{"line":42,"column":8},"end":{"line":47,"column":18}},{"start":{"line":49,"column":8},"end":{"line":52,"column":18}}]},"5":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":44}},{"start":{"line":44,"column":48},"end":{"line":44,"column":66}}]},"6":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":21},"end":{"line":50,"column":49}},{"start":{"line":50,"column":53},"end":{"line":50,"column":72}}]},"7":{"line":64,"type":"switch","locations":[{"start":{"line":69,"column":4},"end":{"line":70,"column":14}},{"start":{"line":75,"column":4},"end":{"line":76,"column":14}}]},"8":{"line":85,"type":"switch","locations":[{"start":{"line":90,"column":4},"end":{"line":105,"column":14}},{"start":{"line":111,"column":4},"end":{"line":193,"column":14},"skip":true}]},"9":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":42},"end":{"line":91,"column":73}},{"start":{"line":91,"column":77},"end":{"line":99,"column":9}}]},"10":{"line":102,"type":"binary-expr","locations":[{"start":{"line":102,"column":18},"end":{"line":102,"column":32}},{"start":{"line":103,"column":12},"end":{"line":103,"column":53}},{"start":{"line":104,"column":12},"end":{"line":104,"column":61}}]},"11":{"line":112,"type":"binary-expr","locations":[{"start":{"line":112,"column":45},"end":{"line":112,"column":79},"skip":true},{"start":{"line":112,"column":83},"end":{"line":121,"column":9},"skip":true}]},"12":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":42},"end":{"line":123,"column":73},"skip":true},{"start":{"line":123,"column":77},"end":{"line":136,"column":9},"skip":true}]},"13":{"line":138,"type":"binary-expr","locations":[{"start":{"line":138,"column":48},"end":{"line":138,"column":85},"skip":true},{"start":{"line":139,"column":12},"end":{"line":145,"column":13},"skip":true}]},"14":{"line":147,"type":"binary-expr","locations":[{"start":{"line":147,"column":42},"end":{"line":147,"column":73},"skip":true},{"start":{"line":147,"column":77},"end":{"line":156,"column":9},"skip":true}]},"15":{"line":158,"type":"binary-expr","locations":[{"start":{"line":158,"column":45},"end":{"line":158,"column":79},"skip":true},{"start":{"line":158,"column":83},"end":{"line":167,"column":9},"skip":true}]},"16":{"line":169,"type":"binary-expr","locations":[{"start":{"line":169,"column":43},"end":{"line":169,"column":75},"skip":true},{"start":{"line":169,"column":79},"end":{"line":178,"column":9},"skip":true}]},"17":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":41},"end":{"line":180,"column":71},"skip":true},{"start":{"line":180,"column":75},"end":{"line":189,"column":9},"skip":true}]}},"code":["/* istanbul instrument in package npmtest_swarm */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - init-before","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        switch (local.modeJs) {","        // re-init local from window.local","        case 'browser':","            local = local.global.utility2.objectSetDefault(","                local.global.utility2_rollup || local.global.local,","                local.global.utility2","            );","            break;","        // re-init local from example.js","        case 'node':","            local = (local.global.utility2_rollup || require('utility2'))","                .requireReadme();","            break;","        }","        // export local","        local.global.local = local;","    }());","","","","    // run shared js-env code - function","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - function","    case 'browser':","        break;","","","","    // run node js-env code - function","    case 'node':","        break;","    }","","","","    // run shared js-env code - init-after","    (function () {","        return;","    }());","    switch (local.modeJs) {","","","","    // run browser js-env code - init-after","    case 'browser':","        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (","            options,","            onError","        ) {","        /*","         * this function will test browsers's null-case handling-behavior-behavior","         */","            onError(null, options);","        };","","        // run tests","        local.nop(local.modeTest &&","            document.querySelector('#testRunButton1') &&","            document.querySelector('#testRunButton1').click());","        break;","","","","    // run node js-env code - init-after","    /* istanbul ignore next */","    case 'node':","        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApidoc's default handling-behavior-behavior","         */","            options = { modulePathList: module.paths };","            local.buildApidoc(options, onError);","        };","","        local.testCase_buildApp_default = local.testCase_buildApp_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildApp's default handling-behavior-behavior","         */","            local.testCase_buildReadme_default(options, local.onErrorThrow);","            local.testCase_buildLib_default(options, local.onErrorThrow);","            local.testCase_buildTest_default(options, local.onErrorThrow);","            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);","            options = [];","            local.buildApp(options, onError);","        };","","        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||","            function (options, onError) {","            /*","             * this function will test buildCustomOrg's default handling-behavior","             */","                options = {};","                local.buildCustomOrg(options, onError);","            };","","        local.testCase_buildLib_default = local.testCase_buildLib_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildLib's default handling-behavior","         */","            options = {};","            local.buildLib(options, onError);","        };","","        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildReadme's default handling-behavior-behavior","         */","            options = {};","            local.buildReadme(options, onError);","        };","","        local.testCase_buildTest_default = local.testCase_buildTest_default || function (","            options,","            onError","        ) {","        /*","         * this function will test buildTest's default handling-behavior","         */","            options = {};","            local.buildTest(options, onError);","        };","","        local.testCase_webpage_default = local.testCase_webpage_default || function (","            options,","            onError","        ) {","        /*","         * this function will test webpage's default handling-behavior","         */","            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };","            local.browserTest(options, onError);","        };","","        // run test-server","        local.testRunServer(local);","        break;","    }","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"40":2,"43":1,"47":1,"50":1,"52":1,"55":2,"61":2,"62":2,"64":2,"70":1,"76":1,"82":2,"83":2,"85":2,"91":1,"98":1,"102":1,"105":1,"112":1,"119":1,"120":1,"123":1,"130":1,"131":1,"132":1,"133":1,"134":1,"135":1,"138":1,"143":2,"144":2,"147":1,"154":2,"155":2,"158":1,"165":2,"166":2,"169":1,"176":2,"177":2,"180":1,"187":1,"188":1,"192":1,"193":1}},"/home/travis/build/npmtest/node-npmtest-swarm/lib.npmtest_swarm.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/lib.npmtest_swarm.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":1,"15":1,"16":1},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1]},"f":{"1":2,"2":2,"3":2},"fnMap":{"1":{"name":"(anonymous_1)","line":12,"loc":{"start":{"line":12,"column":1},"end":{"line":12,"column":13}}},"2":{"name":"(anonymous_2)","line":19,"loc":{"start":{"line":19,"column":5},"end":{"line":19,"column":17}}},"3":{"name":"(anonymous_3)","line":23,"loc":{"start":{"line":23,"column":24},"end":{"line":23,"column":36}}}},"statementMap":{"1":{"start":{"line":12,"column":0},"end":{"line":53,"column":5}},"2":{"start":{"line":14,"column":4},"end":{"line":14,"column":14}},"3":{"start":{"line":19,"column":4},"end":{"line":52,"column":9}},"4":{"start":{"line":21,"column":8},"end":{"line":21,"column":19}},"5":{"start":{"line":23,"column":8},"end":{"line":35,"column":13}},"6":{"start":{"line":24,"column":12},"end":{"line":34,"column":13}},"7":{"start":{"line":25,"column":16},"end":{"line":28,"column":30}},"8":{"start":{"line":30,"column":16},"end":{"line":33,"column":27}},"9":{"start":{"line":37,"column":8},"end":{"line":39,"column":21}},"10":{"start":{"line":41,"column":8},"end":{"line":41,"column":54}},"11":{"start":{"line":43,"column":8},"end":{"line":43,"column":50}},"12":{"start":{"line":45,"column":8},"end":{"line":51,"column":9}},"13":{"start":{"line":46,"column":12},"end":{"line":46,"column":56}},"14":{"start":{"line":48,"column":12},"end":{"line":48,"column":35}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":49}},"16":{"start":{"line":50,"column":12},"end":{"line":50,"column":43}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":23},"end":{"line":25,"column":62}},{"start":{"line":26,"column":20},"end":{"line":26,"column":70}},{"start":{"line":27,"column":20},"end":{"line":27,"column":71}},{"start":{"line":28,"column":20},"end":{"line":28,"column":29}}]},"2":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":23},"end":{"line":30,"column":37}},{"start":{"line":31,"column":20},"end":{"line":31,"column":61}},{"start":{"line":32,"column":20},"end":{"line":32,"column":70}},{"start":{"line":33,"column":20},"end":{"line":33,"column":26}}]},"3":{"line":37,"type":"cond-expr","locations":[{"start":{"line":38,"column":14},"end":{"line":38,"column":20}},{"start":{"line":39,"column":14},"end":{"line":39,"column":20}}]},"4":{"line":41,"type":"binary-expr","locations":[{"start":{"line":41,"column":16},"end":{"line":41,"column":44}},{"start":{"line":41,"column":48},"end":{"line":41,"column":53}}]},"5":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":8},"end":{"line":45,"column":8}},{"start":{"line":45,"column":8},"end":{"line":45,"column":8}}]}},"code":["/* istanbul instrument in package npmtest_swarm */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - init-before","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || local;","        // init lib","        local.local = local.npmtest_swarm = local;","        // init exports","        if (local.modeJs === 'browser') {","            local.global.utility2_npmtest_swarm = local;","        } else {","            module.exports = local;","            module.exports.__dirname = __dirname;","            module.exports.module = module;","        }","    }());","}());",""],"l":{"12":2,"14":2,"19":2,"21":2,"23":2,"24":2,"25":2,"30":1,"37":2,"41":2,"43":2,"45":2,"46":1,"48":1,"49":1,"50":1}},"/home/travis/build/npmtest/node-npmtest-swarm/example.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/example.js","s":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":2,"8":1,"9":2,"10":2,"11":2,"12":2,"13":1,"14":2,"15":2,"16":2,"17":2,"18":2,"19":0,"20":2,"21":1,"22":1,"23":1,"24":1,"25":1,"26":0,"27":0,"28":1,"29":1,"30":2,"31":0,"32":0,"33":0,"34":1,"35":2,"36":2,"37":3,"38":3,"39":3,"40":3,"41":0,"42":3,"43":3,"44":3,"45":1,"46":3,"47":1,"48":1,"49":1,"50":1,"51":1,"52":1,"53":1,"54":1,"55":1,"56":1,"57":0,"58":1,"59":6,"60":6,"61":1,"62":2,"63":0,"64":2,"65":1,"66":1,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0},"b":{"1":[2,1,1,1],"2":[1,1,1,1],"3":[1,1],"4":[2,2],"5":[1,1],"6":[1,1],"7":[2,0],"8":[2,1,1,1,1,1],"9":[0,2,0],"10":[1,1],"11":[2,1,1],"12":[1,0],"13":[0,2],"14":[2,0,0,0,0,0,0],"15":[0,3],"16":[3,0],"17":[1,1],"18":[0,1],"19":[1,2,0,2],"20":[1,0],"21":[1,1],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0]},"f":{"1":2,"2":2,"3":2,"4":2,"5":2,"6":2,"7":3,"8":3,"9":3,"10":1,"11":6,"12":0},"fnMap":{"1":{"name":"(anonymous_1)","line":26,"loc":{"start":{"line":26,"column":1},"end":{"line":26,"column":13}}},"2":{"name":"(anonymous_2)","line":33,"loc":{"start":{"line":33,"column":5},"end":{"line":33,"column":17}}},"3":{"name":"(anonymous_3)","line":37,"loc":{"start":{"line":37,"column":24},"end":{"line":37,"column":36}}},"4":{"name":"(anonymous_4)","line":69,"loc":{"start":{"line":69,"column":31},"end":{"line":69,"column":48}},"skip":true},"5":{"name":"(anonymous_5)","line":78,"loc":{"start":{"line":78,"column":26},"end":{"line":78,"column":45}},"skip":true},"6":{"name":"(anonymous_6)","line":123,"loc":{"start":{"line":123,"column":33},"end":{"line":123,"column":48}},"skip":true},"7":{"name":"(anonymous_7)","line":125,"loc":{"start":{"line":125,"column":27},"end":{"line":125,"column":39}},"skip":true},"8":{"name":"(anonymous_8)","line":133,"loc":{"start":{"line":133,"column":59},"end":{"line":133,"column":74}},"skip":true},"9":{"name":"(anonymous_9)","line":143,"loc":{"start":{"line":143,"column":45},"end":{"line":143,"column":62}},"skip":true},"10":{"name":"(anonymous_10)","line":144,"loc":{"start":{"line":144,"column":73},"end":{"line":144,"column":92}},"skip":true},"11":{"name":"(anonymous_11)","line":272,"loc":{"start":{"line":272,"column":51},"end":{"line":272,"column":77}},"skip":true},"12":{"name":"(anonymous_12)","line":315,"loc":{"start":{"line":315,"column":32},"end":{"line":315,"column":61}},"skip":true}},"statementMap":{"1":{"start":{"line":26,"column":0},"end":{"line":326,"column":5}},"2":{"start":{"line":28,"column":4},"end":{"line":28,"column":14}},"3":{"start":{"line":33,"column":4},"end":{"line":60,"column":9}},"4":{"start":{"line":35,"column":8},"end":{"line":35,"column":19}},"5":{"start":{"line":37,"column":8},"end":{"line":49,"column":13}},"6":{"start":{"line":38,"column":12},"end":{"line":48,"column":13}},"7":{"start":{"line":39,"column":16},"end":{"line":42,"column":30}},"8":{"start":{"line":44,"column":16},"end":{"line":47,"column":27}},"9":{"start":{"line":51,"column":8},"end":{"line":53,"column":21}},"10":{"start":{"line":55,"column":8},"end":{"line":57,"column":45}},"11":{"start":{"line":59,"column":8},"end":{"line":59,"column":35}},"12":{"start":{"line":61,"column":4},"end":{"line":325,"column":5}},"13":{"start":{"line":69,"column":8},"end":{"line":121,"column":10},"skip":true},"14":{"start":{"line":70,"column":12},"end":{"line":88,"column":13},"skip":true},"15":{"start":{"line":76,"column":16},"end":{"line":87,"column":19},"skip":true},"16":{"start":{"line":79,"column":20},"end":{"line":86,"column":21},"skip":true},"17":{"start":{"line":82,"column":24},"end":{"line":82,"column":43},"skip":true},"18":{"start":{"line":83,"column":24},"end":{"line":83,"column":30},"skip":true},"19":{"start":{"line":85,"column":24},"end":{"line":85,"column":49},"skip":true},"20":{"start":{"line":89,"column":12},"end":{"line":107,"column":13},"skip":true},"21":{"start":{"line":92,"column":16},"end":{"line":102,"column":17},"skip":true},"22":{"start":{"line":93,"column":20},"end":{"line":93,"column":86},"skip":true},"23":{"start":{"line":94,"column":20},"end":{"line":95,"column":45},"skip":true},"24":{"start":{"line":96,"column":20},"end":{"line":96,"column":42},"skip":true},"25":{"start":{"line":97,"column":20},"end":{"line":97,"column":48},"skip":true},"26":{"start":{"line":100,"column":20},"end":{"line":100,"column":85},"skip":true},"27":{"start":{"line":101,"column":20},"end":{"line":101,"column":96},"skip":true},"28":{"start":{"line":103,"column":16},"end":{"line":103,"column":22},"skip":true},"29":{"start":{"line":106,"column":16},"end":{"line":106,"column":22},"skip":true},"30":{"start":{"line":108,"column":12},"end":{"line":120,"column":13},"skip":true},"31":{"start":{"line":114,"column":16},"end":{"line":119,"column":17},"skip":true},"32":{"start":{"line":116,"column":20},"end":{"line":116,"column":78},"skip":true},"33":{"start":{"line":118,"column":20},"end":{"line":118,"column":47},"skip":true},"34":{"start":{"line":123,"column":8},"end":{"line":141,"column":11},"skip":true},"35":{"start":{"line":124,"column":12},"end":{"line":124,"column":54},"skip":true},"36":{"start":{"line":125,"column":12},"end":{"line":140,"column":14},"skip":true},"37":{"start":{"line":126,"column":16},"end":{"line":126,"column":28},"skip":true},"38":{"start":{"line":127,"column":16},"end":{"line":127,"column":69},"skip":true},"39":{"start":{"line":128,"column":16},"end":{"line":128,"column":75},"skip":true},"40":{"start":{"line":129,"column":16},"end":{"line":131,"column":17},"skip":true},"41":{"start":{"line":130,"column":20},"end":{"line":130,"column":27},"skip":true},"42":{"start":{"line":133,"column":16},"end":{"line":137,"column":36},"skip":true},"43":{"start":{"line":134,"column":20},"end":{"line":136,"column":55},"skip":true},"44":{"start":{"line":139,"column":16},"end":{"line":139,"column":57},"skip":true},"45":{"start":{"line":143,"column":8},"end":{"line":147,"column":11},"skip":true},"46":{"start":{"line":144,"column":12},"end":{"line":146,"column":15},"skip":true},"47":{"start":{"line":145,"column":16},"end":{"line":145,"column":70},"skip":true},"48":{"start":{"line":149,"column":8},"end":{"line":149,"column":31},"skip":true},"49":{"start":{"line":150,"column":8},"end":{"line":150,"column":14},"skip":true},"50":{"start":{"line":158,"column":8},"end":{"line":158,"column":31},"skip":true},"51":{"start":{"line":160,"column":8},"end":{"line":160,"column":33},"skip":true},"52":{"start":{"line":161,"column":8},"end":{"line":161,"column":37},"skip":true},"53":{"start":{"line":162,"column":8},"end":{"line":162,"column":35},"skip":true},"54":{"start":{"line":164,"column":8},"end":{"line":164,"column":50},"skip":true},"55":{"start":{"line":166,"column":8},"end":{"line":256,"column":2},"skip":true},"56":{"start":{"line":258,"column":8},"end":{"line":286,"column":9},"skip":true},"57":{"start":{"line":259,"column":12},"end":{"line":269,"column":14},"skip":true},"58":{"start":{"line":271,"column":12},"end":{"line":285,"column":19},"skip":true},"59":{"start":{"line":274,"column":20},"end":{"line":274,"column":35},"skip":true},"60":{"start":{"line":275,"column":20},"end":{"line":284,"column":21},"skip":true},"61":{"start":{"line":277,"column":24},"end":{"line":277,"column":64},"skip":true},"62":{"start":{"line":279,"column":24},"end":{"line":279,"column":40},"skip":true},"63":{"start":{"line":281,"column":24},"end":{"line":281,"column":40},"skip":true},"64":{"start":{"line":283,"column":24},"end":{"line":283,"column":39},"skip":true},"65":{"start":{"line":288,"column":8},"end":{"line":290,"column":9},"skip":true},"66":{"start":{"line":289,"column":12},"end":{"line":289,"column":18},"skip":true},"67":{"start":{"line":291,"column":8},"end":{"line":293,"column":54},"skip":true},"68":{"start":{"line":296,"column":8},"end":{"line":301,"column":37},"skip":true},"69":{"start":{"line":303,"column":8},"end":{"line":303,"column":82},"skip":true},"70":{"start":{"line":306,"column":8},"end":{"line":308,"column":9},"skip":true},"71":{"start":{"line":307,"column":12},"end":{"line":307,"column":82},"skip":true},"72":{"start":{"line":310,"column":8},"end":{"line":312,"column":9},"skip":true},"73":{"start":{"line":311,"column":12},"end":{"line":311,"column":18},"skip":true},"74":{"start":{"line":313,"column":8},"end":{"line":313,"column":54},"skip":true},"75":{"start":{"line":314,"column":8},"end":{"line":314,"column":69},"skip":true},"76":{"start":{"line":315,"column":8},"end":{"line":323,"column":36},"skip":true},"77":{"start":{"line":316,"column":12},"end":{"line":316,"column":61},"skip":true},"78":{"start":{"line":317,"column":12},"end":{"line":320,"column":13},"skip":true},"79":{"start":{"line":318,"column":16},"end":{"line":318,"column":75},"skip":true},"80":{"start":{"line":319,"column":16},"end":{"line":319,"column":23},"skip":true},"81":{"start":{"line":321,"column":12},"end":{"line":321,"column":38},"skip":true},"82":{"start":{"line":322,"column":12},"end":{"line":322,"column":27},"skip":true},"83":{"start":{"line":324,"column":8},"end":{"line":324,"column":14},"skip":true}},"branchMap":{"1":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":23},"end":{"line":39,"column":62}},{"start":{"line":40,"column":20},"end":{"line":40,"column":70}},{"start":{"line":41,"column":20},"end":{"line":41,"column":71}},{"start":{"line":42,"column":20},"end":{"line":42,"column":29}}]},"2":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":23},"end":{"line":44,"column":37}},{"start":{"line":45,"column":20},"end":{"line":45,"column":61}},{"start":{"line":46,"column":20},"end":{"line":46,"column":70}},{"start":{"line":47,"column":20},"end":{"line":47,"column":26}}]},"3":{"line":51,"type":"cond-expr","locations":[{"start":{"line":52,"column":14},"end":{"line":52,"column":20}},{"start":{"line":53,"column":14},"end":{"line":53,"column":20}}]},"4":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":44}},{"start":{"line":55,"column":49},"end":{"line":57,"column":43}}]},"5":{"line":55,"type":"cond-expr","locations":[{"start":{"line":56,"column":14},"end":{"line":56,"column":49}},{"start":{"line":57,"column":14},"end":{"line":57,"column":43}}]},"6":{"line":61,"type":"switch","locations":[{"start":{"line":68,"column":4},"end":{"line":150,"column":14},"skip":true},{"start":{"line":156,"column":4},"end":{"line":324,"column":14},"skip":true}]},"7":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true},{"start":{"line":70,"column":12},"end":{"line":70,"column":12},"skip":true}]},"8":{"line":70,"type":"binary-expr","locations":[{"start":{"line":70,"column":16},"end":{"line":70,"column":22},"skip":true},{"start":{"line":70,"column":27},"end":{"line":70,"column":32},"skip":true},{"start":{"line":71,"column":20},"end":{"line":71,"column":39},"skip":true},{"start":{"line":72,"column":20},"end":{"line":72,"column":49},"skip":true},{"start":{"line":73,"column":20},"end":{"line":73,"column":58},"skip":true},{"start":{"line":74,"column":20},"end":{"line":74,"column":69},"skip":true}]},"9":{"line":79,"type":"switch","locations":[{"start":{"line":80,"column":20},"end":{"line":80,"column":33},"skip":true},{"start":{"line":81,"column":20},"end":{"line":83,"column":30},"skip":true},{"start":{"line":84,"column":20},"end":{"line":85,"column":49},"skip":true}]},"10":{"line":89,"type":"switch","locations":[{"start":{"line":90,"column":12},"end":{"line":103,"column":22},"skip":true},{"start":{"line":105,"column":12},"end":{"line":106,"column":22},"skip":true}]},"11":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":20},"end":{"line":89,"column":25},"skip":true},{"start":{"line":89,"column":29},"end":{"line":89,"column":48},"skip":true},{"start":{"line":89,"column":52},"end":{"line":89,"column":74},"skip":true}]},"12":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true},{"start":{"line":92,"column":16},"end":{"line":92,"column":16},"skip":true}]},"13":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true},{"start":{"line":108,"column":12},"end":{"line":108,"column":12},"skip":true}]},"14":{"line":108,"type":"binary-expr","locations":[{"start":{"line":108,"column":16},"end":{"line":108,"column":61},"skip":true},{"start":{"line":108,"column":66},"end":{"line":108,"column":72},"skip":true},{"start":{"line":108,"column":77},"end":{"line":108,"column":82},"skip":true},{"start":{"line":109,"column":20},"end":{"line":109,"column":39},"skip":true},{"start":{"line":110,"column":20},"end":{"line":110,"column":49},"skip":true},{"start":{"line":111,"column":20},"end":{"line":111,"column":58},"skip":true},{"start":{"line":112,"column":20},"end":{"line":112,"column":68},"skip":true}]},"15":{"line":129,"type":"if","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true},{"start":{"line":129,"column":16},"end":{"line":129,"column":16},"skip":true}]},"16":{"line":134,"type":"cond-expr","locations":[{"start":{"line":135,"column":26},"end":{"line":135,"column":29},"skip":true},{"start":{"line":136,"column":26},"end":{"line":136,"column":54},"skip":true}]},"17":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":27},"end":{"line":164,"column":43},"skip":true},{"start":{"line":164,"column":47},"end":{"line":164,"column":49},"skip":true}]},"18":{"line":258,"type":"if","locations":[{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true},{"start":{"line":258,"column":8},"end":{"line":258,"column":8},"skip":true}]},"19":{"line":275,"type":"switch","locations":[{"start":{"line":276,"column":20},"end":{"line":277,"column":64},"skip":true},{"start":{"line":278,"column":20},"end":{"line":279,"column":40},"skip":true},{"start":{"line":280,"column":20},"end":{"line":281,"column":40},"skip":true},{"start":{"line":282,"column":20},"end":{"line":283,"column":39},"skip":true}]},"20":{"line":288,"type":"if","locations":[{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true},{"start":{"line":288,"column":8},"end":{"line":288,"column":8},"skip":true}]},"21":{"line":288,"type":"binary-expr","locations":[{"start":{"line":288,"column":12},"end":{"line":288,"column":40},"skip":true},{"start":{"line":288,"column":44},"end":{"line":288,"column":67},"skip":true}]},"22":{"line":292,"type":"binary-expr","locations":[{"start":{"line":292,"column":12},"end":{"line":292,"column":50},"skip":true},{"start":{"line":293,"column":12},"end":{"line":293,"column":53},"skip":true}]},"23":{"line":297,"type":"binary-expr","locations":[{"start":{"line":297,"column":12},"end":{"line":297,"column":63},"skip":true},{"start":{"line":298,"column":12},"end":{"line":301,"column":36},"skip":true}]},"24":{"line":303,"type":"binary-expr","locations":[{"start":{"line":303,"column":43},"end":{"line":303,"column":75},"skip":true},{"start":{"line":303,"column":79},"end":{"line":303,"column":81},"skip":true}]},"25":{"line":306,"type":"if","locations":[{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true},{"start":{"line":306,"column":8},"end":{"line":306,"column":8},"skip":true}]},"26":{"line":310,"type":"if","locations":[{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true},{"start":{"line":310,"column":8},"end":{"line":310,"column":8},"skip":true}]},"27":{"line":313,"type":"binary-expr","locations":[{"start":{"line":313,"column":27},"end":{"line":313,"column":43},"skip":true},{"start":{"line":313,"column":47},"end":{"line":313,"column":53},"skip":true}]},"28":{"line":317,"type":"if","locations":[{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true},{"start":{"line":317,"column":12},"end":{"line":317,"column":12},"skip":true}]}},"code":["/*","example.js","","quickstart example","","instruction","    1. save this script as example.js","    2. run the shell command:","        $ npm install npmtest-swarm && PORT=8081 node example.js","    3. play with the browser-demo on http://127.0.0.1:8081","*/","","","","/* istanbul instrument in package npmtest_swarm */","/*jslint","    bitwise: true,","    browser: true,","    maxerr: 8,","    maxlen: 96,","    node: true,","    nomen: true,","    regexp: true,","    stupid: true","*/","(function () {","    'use strict';","    var local;","","","","    // run shared js-env code - init-before","    (function () {","        // init local","        local = {};","        // init modeJs","        local.modeJs = (function () {","            try {","                return typeof navigator.userAgent === 'string' &&","                    typeof document.querySelector('body') === 'object' &&","                    typeof XMLHttpRequest.prototype.open === 'function' &&","                    'browser';","            } catch (errorCaughtBrowser) {","                return module.exports &&","                    typeof process.versions.node === 'string' &&","                    typeof require('http').createServer === 'function' &&","                    'node';","            }","        }());","        // init global","        local.global = local.modeJs === 'browser'","            ? window","            : global;","        // init utility2_rollup","        local = local.global.utility2_rollup || (local.modeJs === 'browser'","            ? local.global.utility2_npmtest_swarm","            : global.utility2_moduleExports);","        // export local","        local.global.local = local;","    }());","    switch (local.modeJs) {","","","","    // init-after","    // run browser js-env code - init-after","    /* istanbul ignore next */","    case 'browser':","        local.testRunBrowser = function (event) {","            if (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('onreset'))) {","                // reset output","                Array.from(","                    document.querySelectorAll('body > .resettable')","                ).forEach(function (element) {","                    switch (element.tagName) {","                    case 'INPUT':","                    case 'TEXTAREA':","                        element.value = '';","                        break;","                    default:","                        element.textContent = '';","                    }","                });","            }","            switch (event && event.currentTarget && event.currentTarget.id) {","            case 'testRunButton1':","                // show tests","                if (document.querySelector('#testReportDiv1').style.display === 'none') {","                    document.querySelector('#testReportDiv1').style.display = 'block';","                    document.querySelector('#testRunButton1').textContent =","                        'hide internal test';","                    local.modeTest = true;","                    local.testRunDefault(local);","                // hide tests","                } else {","                    document.querySelector('#testReportDiv1').style.display = 'none';","                    document.querySelector('#testRunButton1').textContent = 'run internal test';","                }","                break;","            // custom-case","            default:","                break;","            }","            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&","                    event.currentTarget &&","                    event.currentTarget.className &&","                    event.currentTarget.className.includes &&","                    event.currentTarget.className.includes('oneval')))) {","                // try to eval input-code","                try {","                    /*jslint evil: true*/","                    eval(document.querySelector('#inputTextareaEval1').value);","                } catch (errorCaught) {","                    console.error(errorCaught);","                }","            }","        };","        // log stderr and stdout to #outputTextareaStdout1","        ['error', 'log'].forEach(function (key) {","            console[key + '_original'] = console[key];","            console[key] = function () {","                var element;","                console[key + '_original'].apply(console, arguments);","                element = document.querySelector('#outputTextareaStdout1');","                if (!element) {","                    return;","                }","                // append text to #outputTextareaStdout1","                element.value += Array.from(arguments).map(function (arg) {","                    return typeof arg === 'string'","                        ? arg","                        : JSON.stringify(arg, null, 4);","                }).join(' ') + '\\n';","                // scroll textarea to bottom","                element.scrollTop = element.scrollHeight;","            };","        });","        // init event-handling","        ['change', 'click', 'keyup'].forEach(function (event) {","            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {","                element.addEventListener(event, local.testRunBrowser);","            });","        });","        // run tests","        local.testRunBrowser();","        break;","","","","    // run node js-env code - init-after","    /* istanbul ignore next */","    case 'node':","        // export local","        module.exports = local;","        // require modules","        local.fs = require('fs');","        local.http = require('http');","        local.url = require('url');","        // init assets","        local.assetsDict = local.assetsDict || {};","        /* jslint-ignore-begin */","        local.assetsDict['/assets.index.template.html'] = '\\","<!doctype html>\\n\\","<html lang=\"en\">\\n\\","<head>\\n\\","<meta charset=\"UTF-8\">\\n\\","<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\","<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\","<style>\\n\\","/*csslint\\n\\","    box-sizing: false,\\n\\","    universal-selector: false\\n\\","*/\\n\\","* {\\n\\","    box-sizing: border-box;\\n\\","}\\n\\","body {\\n\\","    background: #dde;\\n\\","    font-family: Arial, Helvetica, sans-serif;\\n\\","    margin: 2rem;\\n\\","}\\n\\","body > * {\\n\\","    margin-bottom: 1rem;\\n\\","}\\n\\",".utility2FooterDiv {\\n\\","    margin-top: 20px;\\n\\","    text-align: center;\\n\\","}\\n\\","</style>\\n\\","<style>\\n\\","/*csslint\\n\\","*/\\n\\","textarea {\\n\\","    font-family: monospace;\\n\\","    height: 10rem;\\n\\","    width: 100%;\\n\\","}\\n\\","textarea[readonly] {\\n\\","    background: #ddd;\\n\\","}\\n\\","</style>\\n\\","</head>\\n\\","<body>\\n\\","<!-- utility2-comment\\n\\","<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\","utility2-comment -->\\n\\","<h1>\\n\\","<!-- utility2-comment\\n\\","    <a\\n\\","        {{#if env.npm_package_homepage}}\\n\\","        href=\"{{env.npm_package_homepage}}\"\\n\\","        {{/if env.npm_package_homepage}}\\n\\","        target=\"_blank\"\\n\\","    >\\n\\","utility2-comment -->\\n\\","        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\","<!-- utility2-comment\\n\\","    </a>\\n\\","utility2-comment -->\\n\\","</h1>\\n\\","<h3>{{env.npm_package_description}}</h3>\\n\\","<!-- utility2-comment\\n\\","<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\","<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\","<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\","utility2-comment -->\\n\\","\\n\\","\\n\\","\\n\\","<label>stderr and stdout</label>\\n\\","<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\","<!-- utility2-comment\\n\\","{{#if isRollup}}\\n\\","<script src=\"assets.app.js\"></script>\\n\\","{{#unless isRollup}}\\n\\","utility2-comment -->\\n\\","<script src=\"assets.utility2.rollup.js\"></script>\\n\\","<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\","<script src=\"assets.npmtest_swarm.rollup.js\"></script>\\n\\","<script src=\"assets.example.js\"></script>\\n\\","<script src=\"assets.test.js\"></script>\\n\\","<!-- utility2-comment\\n\\","{{/if isRollup}}\\n\\","utility2-comment -->\\n\\","<div class=\"utility2FooterDiv\">\\n\\","    [ this app was created with\\n\\","    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\","    ]\\n\\","</div>\\n\\","</body>\\n\\","</html>\\n\\","';","        /* jslint-ignore-end */","        if (local.templateRender) {","            local.assetsDict['/'] = local.templateRender(","                local.assetsDict['/assets.index.template.html'],","                {","                    env: local.objectSetDefault(local.env, {","                        npm_package_description: 'the greatest app in the world!',","                        npm_package_name: 'my-app',","                        npm_package_nameAlias: 'my_app',","                        npm_package_version: '0.0.1'","                    })","                }","            );","        } else {","            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']","                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {","                    // jslint-hack","                    String(match0);","                    switch (match1) {","                    case 'npm_package_description':","                        return 'the greatest app in the world!';","                    case 'npm_package_name':","                        return 'my-app';","                    case 'npm_package_nameAlias':","                        return 'my_app';","                    case 'npm_package_version':","                        return '0.0.1';","                    }","                });","        }","        // run the cli","        if (local.global.utility2_rollup || module !== require.main) {","            break;","        }","        local.assetsDict['/assets.example.js'] =","            local.assetsDict['/assets.example.js'] ||","            local.fs.readFileSync(__filename, 'utf8');","        // bug-workaround - long $npm_package_buildCustomOrg","        /* jslint-ignore-begin */","        local.assetsDict['/assets.npmtest_swarm.rollup.js'] =","            local.assetsDict['/assets.npmtest_swarm.rollup.js'] ||","            local.fs.readFileSync(","                local.npmtest_swarm.__dirname + '/lib.npmtest_swarm.js',","                'utf8'","            ).replace((/^#!/), '//');","        /* jslint-ignore-end */","        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';","        // if $npm_config_timeout_exit exists,","        // then exit this process after $npm_config_timeout_exit ms","        if (Number(process.env.npm_config_timeout_exit)) {","            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));","        }","        // start server","        if (local.global.utility2_serverHttp1) {","            break;","        }","        process.env.PORT = process.env.PORT || '8081';","        console.error('server starting on port ' + process.env.PORT);","        local.http.createServer(function (request, response) {","            request.urlParsed = local.url.parse(request.url);","            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {","                response.end(local.assetsDict[request.urlParsed.pathname]);","                return;","            }","            response.statusCode = 404;","            response.end();","        }).listen(process.env.PORT);","        break;","    }","}());",""],"l":{"26":2,"28":2,"33":2,"35":2,"37":2,"38":2,"39":2,"44":1,"51":2,"55":2,"59":2,"61":2,"69":1,"70":2,"76":2,"79":2,"82":2,"83":2,"85":1,"89":2,"92":1,"93":1,"94":1,"96":1,"97":1,"100":1,"101":1,"103":1,"106":1,"108":2,"114":1,"116":1,"118":1,"123":1,"124":2,"125":2,"126":3,"127":3,"128":3,"129":3,"130":1,"133":3,"134":3,"139":3,"143":1,"144":3,"145":1,"149":1,"150":1,"158":1,"160":1,"161":1,"162":1,"164":1,"166":1,"258":1,"259":1,"271":1,"274":6,"275":6,"277":1,"279":2,"281":1,"283":2,"288":1,"289":1,"291":1,"296":1,"303":1,"306":1,"307":1,"310":1,"311":1,"313":1,"314":1,"315":1,"316":1,"317":1,"318":1,"319":1,"321":1,"322":1,"324":1}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/NodeServer.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/NodeServer.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1},"b":{},"f":{},"fnMap":{},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":39}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":33}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":29}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":35}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":31}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":31}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":37}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":45}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":47}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":53}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":43}},"16":{"start":{"line":19,"column":0},"end":{"line":19,"column":59}},"17":{"start":{"line":21,"column":0},"end":{"line":21,"column":23}}},"branchMap":{},"code":["\"use strict\";","","var Swarm = {'profile': 'node.js'};","","Swarm.env = require('./env');","Swarm.Spec = require('./Spec');","Swarm.LongSpec = require('./LongSpec');","Swarm.Syncable = require('./Syncable');","Swarm.Model = require('./Model');","Swarm.Set = require('./Set');","Swarm.Vector = require('./Vector');","Swarm.Host = require('./Host');","Swarm.Pipe = require('./Pipe');","Swarm.Storage = require('./Storage');","Swarm.FileStorage = require('./FileStorage');","Swarm.LevelStorage = require('./LevelStorage');","Swarm.EinarosWSStream = require('./EinarosWSStream');","Swarm.ReactMixin = require('./ReactMixin');","Swarm.SecondPreciseClock = require('./SecondPreciseClock');","","module.exports = Swarm;",""],"l":{"3":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"21":1}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/env.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/env.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":1,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"b":{"1":[0,1],"2":[0,0],"3":[0,0],"4":[0,0,0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"djb2Hash","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":23}}},"2":{"name":"plain_log","line":42,"loc":{"start":{"line":42,"column":0},"end":{"line":42,"column":38}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":10,"column":1}},"2":{"start":{"line":5,"column":4},"end":{"line":5,"column":20}},"3":{"start":{"line":6,"column":4},"end":{"line":8,"column":5}},"4":{"start":{"line":7,"column":8},"end":{"line":7,"column":56}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":16}},"6":{"start":{"line":12,"column":0},"end":{"line":33,"column":2}},"7":{"start":{"line":35,"column":0},"end":{"line":40,"column":1}},"8":{"start":{"line":36,"column":4},"end":{"line":36,"column":36}},"9":{"start":{"line":37,"column":4},"end":{"line":37,"column":52}},"10":{"start":{"line":38,"column":4},"end":{"line":38,"column":42}},"11":{"start":{"line":39,"column":4},"end":{"line":39,"column":51}},"12":{"start":{"line":42,"column":0},"end":{"line":54,"column":1}},"13":{"start":{"line":43,"column":4},"end":{"line":43,"column":23}},"14":{"start":{"line":44,"column":4},"end":{"line":51,"column":5}},"15":{"start":{"line":46,"column":8},"end":{"line":46,"column":25}},"16":{"start":{"line":47,"column":8},"end":{"line":47,"column":14}},"17":{"start":{"line":49,"column":8},"end":{"line":49,"column":24}},"18":{"start":{"line":50,"column":8},"end":{"line":50,"column":14}},"19":{"start":{"line":52,"column":4},"end":{"line":53,"column":72}}},"branchMap":{"1":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":0},"end":{"line":35,"column":0}},{"start":{"line":35,"column":0},"end":{"line":35,"column":0}}]},"2":{"line":44,"type":"switch","locations":[{"start":{"line":45,"column":4},"end":{"line":47,"column":14}},{"start":{"line":48,"column":4},"end":{"line":50,"column":14}}]},"3":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":42},"end":{"line":52,"column":48}},{"start":{"line":52,"column":52},"end":{"line":52,"column":62}}]},"4":{"line":53,"type":"binary-expr","locations":[{"start":{"line":53,"column":20},"end":{"line":53,"column":26}},{"start":{"line":53,"column":30},"end":{"line":53,"column":42}},{"start":{"line":53,"column":46},"end":{"line":53,"column":62}},{"start":{"line":53,"column":67},"end":{"line":53,"column":69}}]}},"code":["\"use strict\";","","/** a really simplistic default hash function */","function djb2Hash(str) {","    var hash = 5381;","    for (var i = 0; i < str.length; i++) {","        hash = ((hash << 5) + hash) + str.charCodeAt(i);","    }","    return hash;","}","","var env = module.exports = {","    // maps URI schemes to stream implementations","    streams: {},","    // the default host","    localhost: undefined,","    // whether multiple hosts are allowed in one process","    // (that is mostly useful for testing)","    multihost: false,","    // hash function used for consistent hashing","    hashfn: djb2Hash,","","    log: plain_log,","    debug: false,","    trace: false,","","    isServer: typeof(navigator) === 'undefined',","    isBrowser: typeof(navigator) === 'object',","    isWebKit: false,","    isGecko: false,","    isIE: false,","    clockType: undefined // default","};","","if (typeof(navigator) === 'object') {","    var agent = navigator.userAgent;","    env.isWebKit = /AppleWebKit\\/(\\S+)/.test(agent);","    env.isIE = /MSIE ([^;]+)/.test(agent);","    env.isGecko = /rv:.* Gecko\\/\\d{8}/.test(agent);","}","","function plain_log(spec, val, object) {","    var method = 'log';","    switch (spec.op()) {","    case 'error':","        method = 'error';","        break;","    case 'warn':","        method = 'warn';","        break;","    }","    console[method](spec.toString(), val, object && object._id,","            '@' + ((object && object._host && object._host._id) || ''));","}",""],"l":{"4":1,"5":0,"6":0,"7":0,"9":0,"12":1,"35":1,"36":0,"37":0,"38":0,"39":0,"42":1,"43":0,"44":0,"46":0,"47":0,"49":0,"50":0,"52":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Spec.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Spec.js","s":{"1":1,"2":3,"3":0,"4":3,"5":3,"6":0,"7":3,"8":0,"9":3,"10":3,"11":1,"12":1,"13":0,"14":0,"15":0,"16":1,"17":0,"18":1,"19":0,"20":1,"21":0,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":1,"60":0,"61":1,"62":0,"63":1,"64":0,"65":1,"66":0,"67":1,"68":0,"69":1,"70":0,"71":1,"72":1,"73":0,"74":0,"75":0,"76":0,"77":1,"78":0,"79":0,"80":0,"81":1,"82":0,"83":1,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":1,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":1,"98":0,"99":0,"100":0,"101":0,"102":1,"103":0,"104":0,"105":0,"106":0,"107":0,"108":1,"109":1,"110":1,"111":1,"112":1,"113":1,"114":1,"115":1,"116":1,"117":1,"118":0,"119":0,"120":0,"121":1,"122":0,"123":0,"124":0,"125":1,"126":0,"127":0,"128":0,"129":1,"130":0,"131":0,"132":0,"133":0,"134":0,"135":1,"136":0,"137":0,"138":0,"139":0,"140":1,"141":0,"142":0,"143":0,"144":0,"145":0,"146":1,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0},"b":{"1":[0,3],"2":[3,3],"3":[3,0],"4":[0,3],"5":[3,0],"6":[0,3],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0]},"f":{"1":3,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},"fnMap":{"1":{"name":"Spec","line":38,"loc":{"start":{"line":38,"column":0},"end":{"line":38,"column":26}}},"2":{"name":"(anonymous_2)","line":55,"loc":{"start":{"line":55,"column":24},"end":{"line":55,"column":42}}},"3":{"name":"(anonymous_3)","line":57,"loc":{"start":{"line":57,"column":16},"end":{"line":57,"column":40}}},"4":{"name":"(anonymous_4)","line":62,"loc":{"start":{"line":62,"column":15},"end":{"line":62,"column":31}}},"5":{"name":"(anonymous_5)","line":65,"loc":{"start":{"line":65,"column":25},"end":{"line":65,"column":37}}},"6":{"name":"(anonymous_6)","line":68,"loc":{"start":{"line":68,"column":25},"end":{"line":68,"column":37}}},"7":{"name":"(anonymous_7)","line":71,"loc":{"start":{"line":71,"column":23},"end":{"line":71,"column":40}}},"8":{"name":"specGet","line":84,"loc":{"start":{"line":84,"column":21},"end":{"line":84,"column":45}}},"9":{"name":"specGet","line":93,"loc":{"start":{"line":93,"column":21},"end":{"line":93,"column":45}}},"10":{"name":"specHas","line":100,"loc":{"start":{"line":100,"column":21},"end":{"line":100,"column":45}}},"11":{"name":"specSet","line":108,"loc":{"start":{"line":108,"column":21},"end":{"line":108,"column":51}}},"12":{"name":"(anonymous_12)","line":119,"loc":{"start":{"line":119,"column":25},"end":{"line":119,"column":37}}},"13":{"name":"(anonymous_13)","line":120,"loc":{"start":{"line":120,"column":20},"end":{"line":120,"column":32}}},"14":{"name":"(anonymous_14)","line":121,"loc":{"start":{"line":121,"column":22},"end":{"line":121,"column":34}}},"15":{"name":"(anonymous_15)","line":122,"loc":{"start":{"line":122,"column":20},"end":{"line":122,"column":32}}},"16":{"name":"(anonymous_16)","line":123,"loc":{"start":{"line":123,"column":24},"end":{"line":123,"column":36}}},"17":{"name":"(anonymous_17)","line":124,"loc":{"start":{"line":124,"column":24},"end":{"line":124,"column":36}}},"18":{"name":"(anonymous_18)","line":126,"loc":{"start":{"line":126,"column":22},"end":{"line":126,"column":34}}},"19":{"name":"Q","line":127,"loc":{"start":{"line":127,"column":4},"end":{"line":127,"column":21}}},"20":{"name":"(anonymous_20)","line":136,"loc":{"start":{"line":136,"column":21},"end":{"line":136,"column":44}}},"21":{"name":"(anonymous_21)","line":142,"loc":{"start":{"line":142,"column":26},"end":{"line":142,"column":38}}},"22":{"name":"(anonymous_22)","line":145,"loc":{"start":{"line":145,"column":16},"end":{"line":145,"column":37}}},"23":{"name":"(anonymous_23)","line":156,"loc":{"start":{"line":156,"column":22},"end":{"line":156,"column":44}}},"24":{"name":"(anonymous_24)","line":167,"loc":{"start":{"line":167,"column":16},"end":{"line":167,"column":32}}},"25":{"name":"(anonymous_25)","line":174,"loc":{"start":{"line":174,"column":18},"end":{"line":174,"column":40}}},"26":{"name":"(anonymous_26)","line":192,"loc":{"start":{"line":192,"column":10},"end":{"line":192,"column":25}}},"27":{"name":"(anonymous_27)","line":198,"loc":{"start":{"line":198,"column":10},"end":{"line":198,"column":26}}},"28":{"name":"VersionVectorAsAMap","line":206,"loc":{"start":{"line":206,"column":11},"end":{"line":206,"column":45}}},"29":{"name":"(anonymous_29)","line":212,"loc":{"start":{"line":212,"column":25},"end":{"line":212,"column":50}}},"30":{"name":"(anonymous_30)","line":221,"loc":{"start":{"line":221,"column":28},"end":{"line":221,"column":47}}},"31":{"name":"(anonymous_31)","line":227,"loc":{"start":{"line":227,"column":27},"end":{"line":227,"column":39}}},"32":{"name":"(anonymous_32)","line":237,"loc":{"start":{"line":237,"column":30},"end":{"line":237,"column":46}}}},"statementMap":{"1":{"start":{"line":38,"column":0},"end":{"line":52,"column":1}},"2":{"start":{"line":39,"column":4},"end":{"line":49,"column":5}},"3":{"start":{"line":40,"column":8},"end":{"line":40,"column":24}},"4":{"start":{"line":42,"column":8},"end":{"line":42,"column":37}},"5":{"start":{"line":43,"column":8},"end":{"line":45,"column":9}},"6":{"start":{"line":44,"column":12},"end":{"line":44,"column":30}},"7":{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},"8":{"start":{"line":47,"column":12},"end":{"line":47,"column":59}},"9":{"start":{"line":50,"column":4},"end":{"line":50,"column":21}},"10":{"start":{"line":51,"column":4},"end":{"line":51,"column":19}},"11":{"start":{"line":53,"column":0},"end":{"line":53,"column":22}},"12":{"start":{"line":55,"column":0},"end":{"line":61,"column":2}},"13":{"start":{"line":56,"column":4},"end":{"line":59,"column":18}},"14":{"start":{"line":58,"column":20},"end":{"line":58,"column":69}},"15":{"start":{"line":60,"column":4},"end":{"line":60,"column":66}},"16":{"start":{"line":62,"column":0},"end":{"line":64,"column":2}},"17":{"start":{"line":63,"column":4},"end":{"line":63,"column":57}},"18":{"start":{"line":65,"column":0},"end":{"line":67,"column":2}},"19":{"start":{"line":66,"column":4},"end":{"line":66,"column":27}},"20":{"start":{"line":68,"column":0},"end":{"line":70,"column":2}},"21":{"start":{"line":69,"column":4},"end":{"line":69,"column":36}},"22":{"start":{"line":71,"column":0},"end":{"line":83,"column":2}},"23":{"start":{"line":72,"column":4},"end":{"line":72,"column":72}},"24":{"start":{"line":73,"column":4},"end":{"line":75,"column":5}},"25":{"start":{"line":74,"column":8},"end":{"line":74,"column":25}},"26":{"start":{"line":76,"column":4},"end":{"line":76,"column":34}},"27":{"start":{"line":77,"column":4},"end":{"line":77,"column":44}},"28":{"start":{"line":78,"column":4},"end":{"line":78,"column":42}},"29":{"start":{"line":79,"column":4},"end":{"line":81,"column":5}},"30":{"start":{"line":80,"column":8},"end":{"line":80,"column":25}},"31":{"start":{"line":82,"column":4},"end":{"line":82,"column":60}},"32":{"start":{"line":84,"column":0},"end":{"line":92,"column":2}},"33":{"start":{"line":85,"column":4},"end":{"line":85,"column":38}},"34":{"start":{"line":86,"column":4},"end":{"line":88,"column":5}},"35":{"start":{"line":87,"column":8},"end":{"line":87,"column":18}},"36":{"start":{"line":89,"column":4},"end":{"line":89,"column":33}},"37":{"start":{"line":90,"column":4},"end":{"line":90,"column":44}},"38":{"start":{"line":91,"column":4},"end":{"line":91,"column":21}},"39":{"start":{"line":93,"column":0},"end":{"line":99,"column":2}},"40":{"start":{"line":94,"column":4},"end":{"line":94,"column":38}},"41":{"start":{"line":95,"column":4},"end":{"line":95,"column":32}},"42":{"start":{"line":95,"column":20},"end":{"line":95,"column":30}},"43":{"start":{"line":96,"column":4},"end":{"line":96,"column":33}},"44":{"start":{"line":97,"column":4},"end":{"line":97,"column":44}},"45":{"start":{"line":98,"column":4},"end":{"line":98,"column":21}},"46":{"start":{"line":100,"column":0},"end":{"line":107,"column":2}},"47":{"start":{"line":101,"column":4},"end":{"line":106,"column":5}},"48":{"start":{"line":102,"column":8},"end":{"line":102,"column":48}},"49":{"start":{"line":104,"column":8},"end":{"line":104,"column":52}},"50":{"start":{"line":105,"column":8},"end":{"line":105,"column":42}},"51":{"start":{"line":108,"column":0},"end":{"line":118,"column":2}},"52":{"start":{"line":109,"column":4},"end":{"line":109,"column":36}},"53":{"start":{"line":110,"column":4},"end":{"line":110,"column":10}},"54":{"start":{"line":111,"column":4},"end":{"line":111,"column":33}},"55":{"start":{"line":112,"column":4},"end":{"line":116,"column":5}},"56":{"start":{"line":113,"column":8},"end":{"line":115,"column":9}},"57":{"start":{"line":114,"column":12},"end":{"line":114,"column":32}},"58":{"start":{"line":117,"column":4},"end":{"line":117,"column":22}},"59":{"start":{"line":119,"column":0},"end":{"line":119,"column":63}},"60":{"start":{"line":119,"column":39},"end":{"line":119,"column":60}},"61":{"start":{"line":120,"column":0},"end":{"line":120,"column":58}},"62":{"start":{"line":120,"column":34},"end":{"line":120,"column":55}},"63":{"start":{"line":121,"column":0},"end":{"line":121,"column":60}},"64":{"start":{"line":121,"column":36},"end":{"line":121,"column":57}},"65":{"start":{"line":122,"column":0},"end":{"line":122,"column":58}},"66":{"start":{"line":122,"column":34},"end":{"line":122,"column":55}},"67":{"start":{"line":123,"column":0},"end":{"line":123,"column":66}},"68":{"start":{"line":123,"column":38},"end":{"line":123,"column":63}},"69":{"start":{"line":124,"column":0},"end":{"line":124,"column":68}},"70":{"start":{"line":124,"column":38},"end":{"line":124,"column":65}},"71":{"start":{"line":126,"column":0},"end":{"line":134,"column":2}},"72":{"start":{"line":127,"column":4},"end":{"line":130,"column":5}},"73":{"start":{"line":128,"column":8},"end":{"line":128,"column":64}},"74":{"start":{"line":129,"column":8},"end":{"line":129,"column":58}},"75":{"start":{"line":132,"column":4},"end":{"line":132,"column":49}},"76":{"start":{"line":133,"column":4},"end":{"line":133,"column":57}},"77":{"start":{"line":136,"column":0},"end":{"line":141,"column":2}},"78":{"start":{"line":137,"column":4},"end":{"line":139,"column":5}},"79":{"start":{"line":138,"column":8},"end":{"line":138,"column":37}},"80":{"start":{"line":140,"column":4},"end":{"line":140,"column":45}},"81":{"start":{"line":142,"column":0},"end":{"line":142,"column":61}},"82":{"start":{"line":142,"column":40},"end":{"line":142,"column":58}},"83":{"start":{"line":145,"column":0},"end":{"line":154,"column":2}},"84":{"start":{"line":146,"column":4},"end":{"line":148,"column":5}},"85":{"start":{"line":147,"column":8},"end":{"line":147,"column":40}},"86":{"start":{"line":149,"column":4},"end":{"line":149,"column":37}},"87":{"start":{"line":150,"column":4},"end":{"line":152,"column":5}},"88":{"start":{"line":151,"column":8},"end":{"line":151,"column":47}},"89":{"start":{"line":153,"column":4},"end":{"line":153,"column":15}},"90":{"start":{"line":156,"column":0},"end":{"line":165,"column":2}},"91":{"start":{"line":157,"column":4},"end":{"line":157,"column":50}},"92":{"start":{"line":158,"column":4},"end":{"line":158,"column":59}},"93":{"start":{"line":159,"column":4},"end":{"line":163,"column":5}},"94":{"start":{"line":160,"column":8},"end":{"line":162,"column":9}},"95":{"start":{"line":161,"column":12},"end":{"line":161,"column":25}},"96":{"start":{"line":164,"column":4},"end":{"line":164,"column":16}},"97":{"start":{"line":167,"column":0},"end":{"line":173,"column":2}},"98":{"start":{"line":168,"column":4},"end":{"line":168,"column":44}},"99":{"start":{"line":169,"column":4},"end":{"line":171,"column":5}},"100":{"start":{"line":170,"column":8},"end":{"line":170,"column":53}},"101":{"start":{"line":172,"column":4},"end":{"line":172,"column":15}},"102":{"start":{"line":174,"column":0},"end":{"line":181,"column":2}},"103":{"start":{"line":175,"column":4},"end":{"line":175,"column":33}},"104":{"start":{"line":176,"column":4},"end":{"line":176,"column":43}},"105":{"start":{"line":177,"column":4},"end":{"line":179,"column":5}},"106":{"start":{"line":178,"column":8},"end":{"line":178,"column":20}},"107":{"start":{"line":180,"column":4},"end":{"line":180,"column":46}},"108":{"start":{"line":183,"column":0},"end":{"line":183,"column":81}},"109":{"start":{"line":184,"column":0},"end":{"line":184,"column":32}},"110":{"start":{"line":185,"column":0},"end":{"line":185,"column":41}},"111":{"start":{"line":186,"column":0},"end":{"line":186,"column":46}},"112":{"start":{"line":187,"column":0},"end":{"line":187,"column":35}},"113":{"start":{"line":188,"column":0},"end":{"line":188,"column":58}},"114":{"start":{"line":189,"column":0},"end":{"line":189,"column":42}},"115":{"start":{"line":190,"column":0},"end":{"line":190,"column":72}},"116":{"start":{"line":191,"column":0},"end":{"line":191,"column":49}},"117":{"start":{"line":192,"column":0},"end":{"line":197,"column":2}},"118":{"start":{"line":193,"column":4},"end":{"line":195,"column":5}},"119":{"start":{"line":194,"column":8},"end":{"line":194,"column":21}},"120":{"start":{"line":196,"column":4},"end":{"line":196,"column":89}},"121":{"start":{"line":198,"column":0},"end":{"line":204,"column":2}},"122":{"start":{"line":199,"column":4},"end":{"line":203,"column":5}},"123":{"start":{"line":200,"column":8},"end":{"line":200,"column":28}},"124":{"start":{"line":202,"column":8},"end":{"line":202,"column":65}},"125":{"start":{"line":206,"column":0},"end":{"line":211,"column":2}},"126":{"start":{"line":207,"column":4},"end":{"line":207,"column":18}},"127":{"start":{"line":208,"column":4},"end":{"line":210,"column":5}},"128":{"start":{"line":209,"column":8},"end":{"line":209,"column":22}},"129":{"start":{"line":212,"column":0},"end":{"line":220,"column":2}},"130":{"start":{"line":213,"column":4},"end":{"line":213,"column":48}},"131":{"start":{"line":214,"column":4},"end":{"line":219,"column":5}},"132":{"start":{"line":215,"column":8},"end":{"line":215,"column":57}},"133":{"start":{"line":216,"column":8},"end":{"line":218,"column":9}},"134":{"start":{"line":217,"column":12},"end":{"line":217,"column":36}},"135":{"start":{"line":221,"column":0},"end":{"line":226,"column":2}},"136":{"start":{"line":222,"column":4},"end":{"line":222,"column":32}},"137":{"start":{"line":223,"column":4},"end":{"line":223,"column":40}},"138":{"start":{"line":224,"column":4},"end":{"line":224,"column":41}},"139":{"start":{"line":225,"column":4},"end":{"line":225,"column":39}},"140":{"start":{"line":227,"column":0},"end":{"line":236,"column":2}},"141":{"start":{"line":228,"column":4},"end":{"line":229,"column":23}},"142":{"start":{"line":230,"column":4},"end":{"line":234,"column":5}},"143":{"start":{"line":231,"column":8},"end":{"line":233,"column":9}},"144":{"start":{"line":232,"column":12},"end":{"line":232,"column":26}},"145":{"start":{"line":235,"column":4},"end":{"line":235,"column":14}},"146":{"start":{"line":237,"column":0},"end":{"line":251,"column":2}},"147":{"start":{"line":238,"column":4},"end":{"line":238,"column":39}},"148":{"start":{"line":239,"column":4},"end":{"line":242,"column":23}},"149":{"start":{"line":243,"column":4},"end":{"line":245,"column":5}},"150":{"start":{"line":244,"column":8},"end":{"line":244,"column":70}},"151":{"start":{"line":246,"column":4},"end":{"line":246,"column":25}},"152":{"start":{"line":247,"column":4},"end":{"line":249,"column":5}},"153":{"start":{"line":248,"column":8},"end":{"line":248,"column":18}},"154":{"start":{"line":250,"column":4},"end":{"line":250,"column":32}}},"branchMap":{"1":{"line":39,"type":"if","locations":[{"start":{"line":39,"column":4},"end":{"line":39,"column":4}},{"start":{"line":39,"column":4},"end":{"line":39,"column":4}}]},"2":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":8},"end":{"line":39,"column":11}},{"start":{"line":39,"column":15},"end":{"line":39,"column":39}}]},"3":{"line":42,"type":"binary-expr","locations":[{"start":{"line":42,"column":15},"end":{"line":42,"column":18}},{"start":{"line":42,"column":22},"end":{"line":42,"column":24}}]},"4":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":8},"end":{"line":43,"column":8}},{"start":{"line":43,"column":8},"end":{"line":43,"column":8}}]},"5":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":12},"end":{"line":43,"column":17}},{"start":{"line":43,"column":21},"end":{"line":43,"column":41}}]},"6":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":8}},{"start":{"line":46,"column":8},"end":{"line":46,"column":8}}]},"7":{"line":58,"type":"cond-expr","locations":[{"start":{"line":58,"column":58},"end":{"line":58,"column":63}},{"start":{"line":58,"column":66},"end":{"line":58,"column":68}}]},"8":{"line":72,"type":"cond-expr","locations":[{"start":{"line":72,"column":21},"end":{"line":72,"column":58}},{"start":{"line":72,"column":61},"end":{"line":72,"column":71}}]},"9":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},{"start":{"line":73,"column":4},"end":{"line":73,"column":4}}]},"10":{"line":79,"type":"if","locations":[{"start":{"line":79,"column":4},"end":{"line":79,"column":4}},{"start":{"line":79,"column":4},"end":{"line":79,"column":4}}]},"11":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"12":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":11},"end":{"line":91,"column":12}},{"start":{"line":91,"column":16},"end":{"line":91,"column":20}}]},"13":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":4},"end":{"line":95,"column":4}},{"start":{"line":95,"column":4},"end":{"line":95,"column":4}}]},"14":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":11},"end":{"line":98,"column":12}},{"start":{"line":98,"column":16},"end":{"line":98,"column":20}}]},"15":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]},"16":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":8},"end":{"line":113,"column":8}},{"start":{"line":113,"column":8},"end":{"line":113,"column":8}}]},"17":{"line":129,"type":"binary-expr","locations":[{"start":{"line":129,"column":16},"end":{"line":129,"column":45}},{"start":{"line":129,"column":51},"end":{"line":129,"column":56}}]},"18":{"line":133,"type":"cond-expr","locations":[{"start":{"line":133,"column":28},"end":{"line":133,"column":50}},{"start":{"line":133,"column":53},"end":{"line":133,"column":55}}]},"19":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":4},"end":{"line":137,"column":4}},{"start":{"line":137,"column":4},"end":{"line":137,"column":4}}]},"20":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":4},"end":{"line":146,"column":4}},{"start":{"line":146,"column":4},"end":{"line":146,"column":4}}]},"21":{"line":146,"type":"binary-expr","locations":[{"start":{"line":146,"column":8},"end":{"line":146,"column":13}},{"start":{"line":146,"column":17},"end":{"line":146,"column":31}}]},"22":{"line":149,"type":"binary-expr","locations":[{"start":{"line":149,"column":25},"end":{"line":149,"column":31}},{"start":{"line":149,"column":35},"end":{"line":149,"column":36}}]},"23":{"line":150,"type":"binary-expr","locations":[{"start":{"line":150,"column":11},"end":{"line":150,"column":12}},{"start":{"line":150,"column":17},"end":{"line":150,"column":25}}]},"24":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":8},"end":{"line":160,"column":8}},{"start":{"line":160,"column":8},"end":{"line":160,"column":8}}]},"25":{"line":177,"type":"if","locations":[{"start":{"line":177,"column":4},"end":{"line":177,"column":4}},{"start":{"line":177,"column":4},"end":{"line":177,"column":4}}]},"26":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":29},"end":{"line":180,"column":33}},{"start":{"line":180,"column":37},"end":{"line":180,"column":44}}]},"27":{"line":193,"type":"if","locations":[{"start":{"line":193,"column":4},"end":{"line":193,"column":4}},{"start":{"line":193,"column":4},"end":{"line":193,"column":4}}]},"28":{"line":193,"type":"binary-expr","locations":[{"start":{"line":193,"column":8},"end":{"line":193,"column":20}},{"start":{"line":193,"column":24},"end":{"line":193,"column":41}}]},"29":{"line":196,"type":"binary-expr","locations":[{"start":{"line":196,"column":11},"end":{"line":196,"column":35}},{"start":{"line":196,"column":39},"end":{"line":196,"column":88}}]},"30":{"line":199,"type":"if","locations":[{"start":{"line":199,"column":4},"end":{"line":199,"column":4}},{"start":{"line":199,"column":4},"end":{"line":199,"column":4}}]},"31":{"line":202,"type":"cond-expr","locations":[{"start":{"line":202,"column":43},"end":{"line":202,"column":47}},{"start":{"line":202,"column":50},"end":{"line":202,"column":64}}]},"32":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":4},"end":{"line":208,"column":4}},{"start":{"line":208,"column":4},"end":{"line":208,"column":4}}]},"33":{"line":215,"type":"binary-expr","locations":[{"start":{"line":215,"column":38},"end":{"line":215,"column":45}},{"start":{"line":215,"column":49},"end":{"line":215,"column":56}}]},"34":{"line":216,"type":"if","locations":[{"start":{"line":216,"column":8},"end":{"line":216,"column":8}},{"start":{"line":216,"column":8},"end":{"line":216,"column":8}}]},"35":{"line":216,"type":"binary-expr","locations":[{"start":{"line":216,"column":20},"end":{"line":216,"column":36}},{"start":{"line":216,"column":40},"end":{"line":216,"column":42}}]},"36":{"line":224,"type":"binary-expr","locations":[{"start":{"line":224,"column":25},"end":{"line":224,"column":29}},{"start":{"line":224,"column":33},"end":{"line":224,"column":40}}]},"37":{"line":225,"type":"binary-expr","locations":[{"start":{"line":225,"column":18},"end":{"line":225,"column":31}},{"start":{"line":225,"column":35},"end":{"line":225,"column":37}}]},"38":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":8},"end":{"line":231,"column":8}},{"start":{"line":231,"column":8},"end":{"line":231,"column":8}}]},"39":{"line":231,"type":"binary-expr","locations":[{"start":{"line":231,"column":12},"end":{"line":231,"column":15}},{"start":{"line":231,"column":19},"end":{"line":231,"column":32}}]},"40":{"line":238,"type":"binary-expr","locations":[{"start":{"line":238,"column":11},"end":{"line":238,"column":15}},{"start":{"line":238,"column":19},"end":{"line":238,"column":38}}]},"41":{"line":239,"type":"binary-expr","locations":[{"start":{"line":239,"column":14},"end":{"line":239,"column":22}},{"start":{"line":239,"column":26},"end":{"line":239,"column":28}}]},"42":{"line":240,"type":"binary-expr","locations":[{"start":{"line":240,"column":21},"end":{"line":240,"column":29}},{"start":{"line":240,"column":33},"end":{"line":240,"column":36}}]},"43":{"line":244,"type":"cond-expr","locations":[{"start":{"line":244,"column":53},"end":{"line":244,"column":55}},{"start":{"line":244,"column":58},"end":{"line":244,"column":67}}]},"44":{"line":247,"type":"binary-expr","locations":[{"start":{"line":247,"column":11},"end":{"line":247,"column":27}},{"start":{"line":247,"column":31},"end":{"line":247,"column":57}}]},"45":{"line":250,"type":"binary-expr","locations":[{"start":{"line":250,"column":11},"end":{"line":250,"column":23}},{"start":{"line":250,"column":27},"end":{"line":250,"column":31}}]}},"code":["\"use strict\";","","//  S P E C I F I E R","//","//  The Swarm aims to switch fully from the classic HTTP","//  request-response client-server interaction pattern to continuous","//  real-time synchronization (WebSocket), possibly involving","//  client-to-client interaction (WebRTC) and client-side storage","//  (WebStorage). That demands (a) unification of transfer and storage","//  where possible and (b) transferring, processing and storing of","//  fine-grained changes.","//","//  That's why we use compound event identifiers named *specifiers*","//  instead of just regular \"plain\" object ids everyone is so used to.","//  Our ids have to fully describe the context of every small change as","//  it is likely to be delivered, processed and stored separately from","//  the rest of the related state.  For every atomic operation, be it a","//  field mutation or a method invocation, a specifier contains its","//  class, object id, a method name and, most importantly, its","//  version id.","//","//  A serialized specifier is a sequence of Base64 tokens each prefixed","//  with a \"quant\". A quant for a class name is '/', an object id is","//  prefixed with '#', a method with '.' and a version id with '!'.  A","//  special quant '+' separates parts of each token.  For example, a","//  typical version id looks like \"!7AMTc+gritzko\" which corresponds to","//  a version created on Tue Oct 22 2013 08:05:59 GMT by @gritzko (see","//  Host.time()).","//","//  A full serialized specifier looks like","//        /TodoItem#7AM0f+gritzko.done!7AMTc+gritzko","//  (a todo item created by @gritzko was marked 'done' by himself)","//","//  Specifiers are stored in strings, but we use a lightweight wrapper","//  class Spec to parse them easily. A wrapper is immutable as we pass","//  specifiers around a lot.","","function Spec(str, quant) {","    if (str && str.constructor === Spec) {","        str = str.value;","    } else { // later we assume value has valid format","        str = (str || '').toString();","        if (quant && str.charAt(0) >= '0') {","            str = quant + str;","        }","        if (str.replace(Spec.reQTokExt, '')) {","            throw new Error('malformed specifier: ' + str);","        }","    }","    this.value = str;","    this.index = 0;","}","module.exports = Spec;","","Spec.prototype.filter = function (quants) {","    var filterfn = //typeof(quants)==='function' ? quants :","                function (token, quant) {","                    return quants.indexOf(quant) !== -1 ? token : '';","                };","    return new Spec(this.value.replace(Spec.reQTokExt, filterfn));","};","Spec.pattern = function (spec) {","    return spec.toString().replace(Spec.reQTokExt, '$1');","};","Spec.prototype.isEmpty = function () {","    return this.value==='';","};","Spec.prototype.pattern = function () {","    return Spec.pattern(this.value);","};","Spec.prototype.token = function (quant) {","    var at = quant ? this.value.indexOf(quant, this.index) : this.index;","    if (at === -1) {","        return undefined;","    }","    Spec.reQTokExt.lastIndex = at;","    var m = Spec.reQTokExt.exec(this.value);","    this.index = Spec.reQTokExt.lastIndex;","    if (!m) {","        return undefined;","    }","    return {quant: m[1], body: m[2], bare: m[3], ext: m[4]};","};","Spec.prototype.get = function specGet(quant) {","    var i = this.value.indexOf(quant);","    if (i === -1) {","        return '';","    }","    Spec.reQTokExt.lastIndex = i;","    var m = Spec.reQTokExt.exec(this.value);","    return m && m[2];","};","Spec.prototype.tok = function specGet(quant) {","    var i = this.value.indexOf(quant);","    if (i === -1) { return ''; }","    Spec.reQTokExt.lastIndex = i;","    var m = Spec.reQTokExt.exec(this.value);","    return m && m[0];","};","Spec.prototype.has = function specHas(quant) {","    if (quant.length===1) {","        return this.value.indexOf(quant) !== -1;","    } else {","        var toks = this.value.match(Spec.reQTokExt);","        return toks.indexOf(quant) !== -1;","    }","};","Spec.prototype.set = function specSet(spec, quant) {","    var ret = new Spec(spec, quant);","    var m;","    Spec.reQTokExt.lastIndex = 0;","    while (null !== (m = Spec.reQTokExt.exec(this.value))) {","        if (!ret.has(m[1])) {","            ret = ret.add(m[0]);","        }","    }","    return ret.sort();","};","Spec.prototype.version = function () { return this.get('!'); };","Spec.prototype.op = function () { return this.get('.'); };","Spec.prototype.type = function () { return this.get('/'); };","Spec.prototype.id = function () { return this.get('#'); };","Spec.prototype.typeid = function () { return this.filter('/#'); };","Spec.prototype.source = function () { return this.token('!').ext; };","","Spec.prototype.sort = function () {","    function Q(a, b) {","        var qa = a.charAt(0), qb = b.charAt(0), q = Spec.quants;","        return (q.indexOf(qa) - q.indexOf(qb)) || (a < b);","    }","","    var split = this.value.match(Spec.reQTokExt);","    return new Spec(split ? split.sort(Q).join('') : '');","};","","Spec.prototype.add = function (spec, quant) {","    if (spec.constructor !== Spec) {","        spec = new Spec(spec, quant);","    }","    return new Spec(this.value + spec.value);","};","Spec.prototype.toString = function () { return this.value; };","","","Spec.int2base = function (i, padlen) {","    if (i < 0 || i >= (1 << 30)) {","        throw new Error('out of range');","    }","    var ret = '', togo = padlen || 5;","    for (; i || (togo > 0); i >>= 6, togo--) {","        ret = Spec.base64.charAt(i & 63) + ret;","    }","    return ret;","};","","Spec.prototype.fits = function (specFilter) {","    var myToks = this.value.match(Spec.reQTokExt);","    var filterToks = specFilter.match(Spec.reQTokExt), tok;","    while (tok=filterToks.pop()) {","        if (myToks.indexOf(tok) === -1) {","            return false;","        }","    }","    return true;","};","","Spec.base2int = function (base) {","    var ret = 0, l = base.match(Spec.re64l);","    for (var shift = 0; l.length; shift += 6) {","        ret += Spec.base64.indexOf(l.pop()) << shift;","    }","    return ret;","};","Spec.parseToken = function (token_body) {","    Spec.reTokExt.lastIndex = -1;","    var m = Spec.reTokExt.exec(token_body);","    if (!m) {","        return null;","    }","    return {bare: m[1], ext: m[2] || 'swarm'}; // FIXME not generic","};","","Spec.base64 = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz~';","Spec.rT = '[0-9A-Za-z_~]{1,80}'; // 60*8 bits is enough for everyone","Spec.reTok = new RegExp('^'+Spec.rT+'$'); // plain no-extension token","Spec.re64l = new RegExp('[0-9A-Za-z_~]', 'g');","Spec.quants = ['/', '#', '!', '.'];","Spec.rsTokExt = '^(=)(?:\\\\+(=))?$'.replace(/=/g, Spec.rT);","Spec.reTokExt = new RegExp(Spec.rsTokExt);","Spec.rsQTokExt = '([/#\\\\.!\\\\*])((=)(?:\\\\+(=))?)'.replace(/=/g, Spec.rT);","Spec.reQTokExt = new RegExp(Spec.rsQTokExt, 'g');","Spec.is = function (str) {","    if (str === null || str === undefined) {","        return false;","    }","    return str.constructor === Spec || '' === str.toString().replace(Spec.reQTokExt, '');","};","Spec.as = function (spec) {","    if (!spec) {","        return new Spec('');","    } else {","        return spec.constructor === Spec ? spec : new Spec(spec);","    }","};","","Spec.Map = function VersionVectorAsAMap(vec) {","    this.map = {};","    if (vec) {","        this.add(vec);","    }","};","Spec.Map.prototype.add = function (versionVector) {","    var vec = new Spec(versionVector, '!'), tok;","    while (undefined !== (tok = vec.token('!'))) {","        var time = tok.bare, source = tok.ext || 'swarm';","        if (time > (this.map[source] || '')) {","            this.map[source] = time;","        }","    }","};","Spec.Map.prototype.covers = function (version) {","    Spec.reTokExt.lastIndex = 0;","    var m = Spec.reTokExt.exec(version);","    var ts = m[1], src = m[2] || 'swarm';","    return ts <= (this.map[src] || '');","};","Spec.Map.prototype.maxTs = function () {","    var ts = null,","        map = this.map;","    for (var src in map) {","        if (!ts || ts < map[src]) {","            ts = map[src];","        }","    }","    return ts;","};","Spec.Map.prototype.toString = function (trim) {","    trim = trim || {top: 10, rot: '0'};","    var top = trim.top || 10,","        rot = '!' + (trim.rot || '0'),","        ret = [],","        map = this.map;","    for (var src in map) {","        ret.push('!' + map[src] + (src === 'swarm' ? '' : '+' + src));","    }","    ret.sort().reverse();","    while (ret.length > top || ret[ret.length - 1] <= rot) {","        ret.pop();","    }","    return ret.join('') || '!0';","};",""],"l":{"38":1,"39":3,"40":0,"42":3,"43":3,"44":0,"46":3,"47":0,"50":3,"51":3,"53":1,"55":1,"56":0,"58":0,"60":0,"62":1,"63":0,"65":1,"66":0,"68":1,"69":0,"71":1,"72":0,"73":0,"74":0,"76":0,"77":0,"78":0,"79":0,"80":0,"82":0,"84":1,"85":0,"86":0,"87":0,"89":0,"90":0,"91":0,"93":1,"94":0,"95":0,"96":0,"97":0,"98":0,"100":1,"101":0,"102":0,"104":0,"105":0,"108":1,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"117":0,"119":1,"120":1,"121":1,"122":1,"123":1,"124":1,"126":1,"127":1,"128":0,"129":0,"132":0,"133":0,"136":1,"137":0,"138":0,"140":0,"142":1,"145":1,"146":0,"147":0,"149":0,"150":0,"151":0,"153":0,"156":1,"157":0,"158":0,"159":0,"160":0,"161":0,"164":0,"167":1,"168":0,"169":0,"170":0,"172":0,"174":1,"175":0,"176":0,"177":0,"178":0,"180":0,"183":1,"184":1,"185":1,"186":1,"187":1,"188":1,"189":1,"190":1,"191":1,"192":1,"193":0,"194":0,"196":0,"198":1,"199":0,"200":0,"202":0,"206":1,"207":0,"208":0,"209":0,"212":1,"213":0,"214":0,"215":0,"216":0,"217":0,"221":1,"222":0,"223":0,"224":0,"225":0,"227":1,"228":0,"230":0,"231":0,"232":0,"235":0,"237":1,"238":0,"239":0,"243":0,"244":0,"246":0,"247":0,"248":0,"250":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/LongSpec.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/LongSpec.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1,"18":1,"19":1,"20":1,"21":0,"22":0,"23":0,"24":0,"25":1,"26":0,"27":0,"28":0,"29":0,"30":1,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":0,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":1,"71":1,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":1,"119":1,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":1,"163":0,"164":0,"165":0,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":1,"191":0,"192":1,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":1,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":1,"236":0,"237":1,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":1,"271":0,"272":0,"273":0,"274":0,"275":1,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":1,"311":0,"312":0,"313":0,"314":0,"315":1,"316":0,"317":1,"318":0,"319":0,"320":0,"321":1,"322":0,"323":0,"324":1,"325":0,"326":0,"327":1,"328":0,"329":0,"330":1,"331":0,"332":0,"333":1,"334":1,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0,0],"25":[0,0],"26":[0,0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0,0,0,0],"45":[0,0],"46":[0,0],"47":[0,0],"48":[0,0],"49":[0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0],"79":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0},"fnMap":{"1":{"name":"(anonymous_1)","line":14,"loc":{"start":{"line":14,"column":15},"end":{"line":14,"column":41}}},"2":{"name":"(anonymous_2)","line":43,"loc":{"start":{"line":43,"column":30},"end":{"line":43,"column":42}}},"3":{"name":"(anonymous_3)","line":51,"loc":{"start":{"line":51,"column":28},"end":{"line":51,"column":40}}},"4":{"name":"(anonymous_4)","line":59,"loc":{"start":{"line":59,"column":32},"end":{"line":59,"column":44}}},"5":{"name":"(anonymous_5)","line":69,"loc":{"start":{"line":69,"column":34},"end":{"line":69,"column":49}}},"6":{"name":"(anonymous_6)","line":99,"loc":{"start":{"line":99,"column":19},"end":{"line":99,"column":32}}},"7":{"name":"(anonymous_7)","line":104,"loc":{"start":{"line":104,"column":19},"end":{"line":104,"column":34}}},"8":{"name":"Iterator","line":133,"loc":{"start":{"line":133,"column":20},"end":{"line":133,"column":53}}},"9":{"name":"encode","line":171,"loc":{"start":{"line":171,"column":37},"end":{"line":171,"column":58}}},"10":{"name":"decode","line":234,"loc":{"start":{"line":234,"column":37},"end":{"line":234,"column":56}}},"11":{"name":"(anonymous_11)","line":290,"loc":{"start":{"line":290,"column":35},"end":{"line":290,"column":48}}},"12":{"name":"(anonymous_12)","line":330,"loc":{"start":{"line":330,"column":34},"end":{"line":330,"column":46}}},"13":{"name":"(anonymous_13)","line":335,"loc":{"start":{"line":335,"column":35},"end":{"line":335,"column":54}}},"14":{"name":"(anonymous_14)","line":361,"loc":{"start":{"line":361,"column":41},"end":{"line":361,"column":60}}},"15":{"name":"(anonymous_15)","line":392,"loc":{"start":{"line":392,"column":36},"end":{"line":392,"column":48}}},"16":{"name":"(anonymous_16)","line":409,"loc":{"start":{"line":409,"column":37},"end":{"line":409,"column":51}}},"17":{"name":"(anonymous_17)","line":458,"loc":{"start":{"line":458,"column":42},"end":{"line":458,"column":56}}},"18":{"name":"(anonymous_18)","line":466,"loc":{"start":{"line":466,"column":36},"end":{"line":466,"column":53}}},"19":{"name":"(anonymous_19)","line":519,"loc":{"start":{"line":519,"column":36},"end":{"line":519,"column":48}}},"20":{"name":"(anonymous_20)","line":528,"loc":{"start":{"line":528,"column":30},"end":{"line":528,"column":47}}},"21":{"name":"(anonymous_21)","line":532,"loc":{"start":{"line":532,"column":25},"end":{"line":532,"column":37}}},"22":{"name":"(anonymous_22)","line":539,"loc":{"start":{"line":539,"column":28},"end":{"line":539,"column":46}}},"23":{"name":"(anonymous_23)","line":544,"loc":{"start":{"line":544,"column":29},"end":{"line":544,"column":44}}},"24":{"name":"(anonymous_24)","line":549,"loc":{"start":{"line":549,"column":29},"end":{"line":549,"column":53}}},"25":{"name":"ls_add","line":562,"loc":{"start":{"line":562,"column":25},"end":{"line":562,"column":48}}},"26":{"name":"(anonymous_26)","line":574,"loc":{"start":{"line":574,"column":26},"end":{"line":574,"column":53}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":14,"column":0},"end":{"line":34,"column":2}},"3":{"start":{"line":15,"column":4},"end":{"line":15,"column":55}},"4":{"start":{"line":16,"column":4},"end":{"line":16,"column":31}},"5":{"start":{"line":16,"column":18},"end":{"line":16,"column":29}},"6":{"start":{"line":17,"column":4},"end":{"line":22,"column":5}},"7":{"start":{"line":18,"column":8},"end":{"line":18,"column":19}},"8":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"9":{"start":{"line":20,"column":12},"end":{"line":20,"column":36}},"10":{"start":{"line":23,"column":4},"end":{"line":25,"column":5}},"11":{"start":{"line":24,"column":8},"end":{"line":24,"column":70}},"12":{"start":{"line":29,"column":4},"end":{"line":29,"column":21}},"13":{"start":{"line":30,"column":4},"end":{"line":30,"column":27}},"14":{"start":{"line":31,"column":4},"end":{"line":33,"column":5}},"15":{"start":{"line":32,"column":8},"end":{"line":32,"column":26}},"16":{"start":{"line":36,"column":0},"end":{"line":36,"column":49}},"17":{"start":{"line":37,"column":0},"end":{"line":37,"column":80}},"18":{"start":{"line":38,"column":0},"end":{"line":38,"column":31}},"19":{"start":{"line":39,"column":0},"end":{"line":40,"column":72}},"20":{"start":{"line":43,"column":0},"end":{"line":49,"column":2}},"21":{"start":{"line":44,"column":4},"end":{"line":44,"column":17}},"22":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"23":{"start":{"line":46,"column":8},"end":{"line":46,"column":29}},"24":{"start":{"line":48,"column":4},"end":{"line":48,"column":24}},"25":{"start":{"line":51,"column":0},"end":{"line":57,"column":2}},"26":{"start":{"line":52,"column":4},"end":{"line":52,"column":16}},"27":{"start":{"line":53,"column":4},"end":{"line":55,"column":5}},"28":{"start":{"line":54,"column":8},"end":{"line":54,"column":36}},"29":{"start":{"line":56,"column":4},"end":{"line":56,"column":15}},"30":{"start":{"line":59,"column":0},"end":{"line":65,"column":2}},"31":{"start":{"line":60,"column":4},"end":{"line":60,"column":16}},"32":{"start":{"line":61,"column":4},"end":{"line":63,"column":5}},"33":{"start":{"line":62,"column":8},"end":{"line":62,"column":37}},"34":{"start":{"line":64,"column":4},"end":{"line":64,"column":15}},"35":{"start":{"line":69,"column":0},"end":{"line":93,"column":2}},"36":{"start":{"line":70,"column":4},"end":{"line":70,"column":30}},"37":{"start":{"line":72,"column":4},"end":{"line":72,"column":50}},"38":{"start":{"line":73,"column":4},"end":{"line":78,"column":5}},"39":{"start":{"line":74,"column":8},"end":{"line":77,"column":9}},"40":{"start":{"line":75,"column":12},"end":{"line":75,"column":47}},"41":{"start":{"line":76,"column":12},"end":{"line":76,"column":40}},"42":{"start":{"line":76,"column":30},"end":{"line":76,"column":37}},"43":{"start":{"line":79,"column":4},"end":{"line":83,"column":5}},"44":{"start":{"line":80,"column":8},"end":{"line":80,"column":49}},"45":{"start":{"line":81,"column":8},"end":{"line":81,"column":31}},"46":{"start":{"line":82,"column":8},"end":{"line":82,"column":49}},"47":{"start":{"line":82,"column":34},"end":{"line":82,"column":46}},"48":{"start":{"line":84,"column":4},"end":{"line":89,"column":5}},"49":{"start":{"line":85,"column":8},"end":{"line":87,"column":9}},"50":{"start":{"line":86,"column":12},"end":{"line":86,"column":44}},"51":{"start":{"line":88,"column":8},"end":{"line":88,"column":17}},"52":{"start":{"line":90,"column":4},"end":{"line":90,"column":20}},"53":{"start":{"line":91,"column":4},"end":{"line":91,"column":20}},"54":{"start":{"line":92,"column":4},"end":{"line":92,"column":14}},"55":{"start":{"line":99,"column":0},"end":{"line":102,"column":2}},"56":{"start":{"line":100,"column":4},"end":{"line":100,"column":72}},"57":{"start":{"line":100,"column":31},"end":{"line":100,"column":70}},"58":{"start":{"line":101,"column":4},"end":{"line":101,"column":64}},"59":{"start":{"line":104,"column":0},"end":{"line":109,"column":2}},"60":{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},"61":{"start":{"line":106,"column":8},"end":{"line":106,"column":51}},"62":{"start":{"line":108,"column":4},"end":{"line":108,"column":69}},"63":{"start":{"line":133,"column":0},"end":{"line":150,"column":2}},"64":{"start":{"line":134,"column":4},"end":{"line":134,"column":23}},"65":{"start":{"line":143,"column":4},"end":{"line":143,"column":23}},"66":{"start":{"line":144,"column":4},"end":{"line":149,"column":5}},"67":{"start":{"line":145,"column":8},"end":{"line":147,"column":9}},"68":{"start":{"line":146,"column":12},"end":{"line":146,"column":32}},"69":{"start":{"line":148,"column":8},"end":{"line":148,"column":25}},"70":{"start":{"line":154,"column":0},"end":{"line":155,"column":73}},"71":{"start":{"line":171,"column":0},"end":{"line":230,"column":2}},"72":{"start":{"line":172,"column":4},"end":{"line":172,"column":28}},"73":{"start":{"line":173,"column":4},"end":{"line":173,"column":21}},"74":{"start":{"line":174,"column":4},"end":{"line":174,"column":22}},"75":{"start":{"line":175,"column":4},"end":{"line":175,"column":81}},"76":{"start":{"line":175,"column":40},"end":{"line":175,"column":80}},"77":{"start":{"line":176,"column":4},"end":{"line":176,"column":50}},"78":{"start":{"line":177,"column":4},"end":{"line":177,"column":27}},"79":{"start":{"line":178,"column":4},"end":{"line":178,"column":46}},"80":{"start":{"line":179,"column":4},"end":{"line":179,"column":22}},"81":{"start":{"line":180,"column":4},"end":{"line":182,"column":5}},"82":{"start":{"line":181,"column":8},"end":{"line":181,"column":90}},"83":{"start":{"line":183,"column":4},"end":{"line":185,"column":5}},"84":{"start":{"line":184,"column":8},"end":{"line":184,"column":84}},"85":{"start":{"line":186,"column":4},"end":{"line":186,"column":60}},"86":{"start":{"line":187,"column":4},"end":{"line":187,"column":36}},"87":{"start":{"line":188,"column":4},"end":{"line":188,"column":31}},"88":{"start":{"line":190,"column":4},"end":{"line":227,"column":5}},"89":{"start":{"line":194,"column":8},"end":{"line":195,"column":53}},"90":{"start":{"line":196,"column":8},"end":{"line":196,"column":34}},"91":{"start":{"line":197,"column":8},"end":{"line":199,"column":9}},"92":{"start":{"line":198,"column":12},"end":{"line":198,"column":29}},"93":{"start":{"line":200,"column":11},"end":{"line":227,"column":5}},"94":{"start":{"line":201,"column":8},"end":{"line":201,"column":38}},"95":{"start":{"line":202,"column":8},"end":{"line":202,"column":39}},"96":{"start":{"line":203,"column":8},"end":{"line":205,"column":9}},"97":{"start":{"line":204,"column":12},"end":{"line":204,"column":65}},"98":{"start":{"line":206,"column":11},"end":{"line":227,"column":5}},"99":{"start":{"line":207,"column":8},"end":{"line":207,"column":47}},"100":{"start":{"line":208,"column":8},"end":{"line":208,"column":47}},"101":{"start":{"line":209,"column":8},"end":{"line":209,"column":38}},"102":{"start":{"line":210,"column":8},"end":{"line":210,"column":48}},"103":{"start":{"line":211,"column":8},"end":{"line":211,"column":29}},"104":{"start":{"line":212,"column":8},"end":{"line":214,"column":9}},"105":{"start":{"line":213,"column":12},"end":{"line":213,"column":83}},"106":{"start":{"line":215,"column":11},"end":{"line":227,"column":5}},"107":{"start":{"line":216,"column":8},"end":{"line":216,"column":47}},"108":{"start":{"line":217,"column":8},"end":{"line":217,"column":47}},"109":{"start":{"line":218,"column":8},"end":{"line":218,"column":38}},"110":{"start":{"line":219,"column":8},"end":{"line":219,"column":38}},"111":{"start":{"line":220,"column":8},"end":{"line":220,"column":29}},"112":{"start":{"line":221,"column":8},"end":{"line":223,"column":9}},"113":{"start":{"line":222,"column":12},"end":{"line":222,"column":71}},"114":{"start":{"line":225,"column":8},"end":{"line":225,"column":22}},"115":{"start":{"line":226,"column":8},"end":{"line":226,"column":25}},"116":{"start":{"line":228,"column":4},"end":{"line":228,"column":33}},"117":{"start":{"line":229,"column":4},"end":{"line":229,"column":54}},"118":{"start":{"line":231,"column":0},"end":{"line":231,"column":37}},"119":{"start":{"line":234,"column":0},"end":{"line":287,"column":2}},"120":{"start":{"line":235,"column":4},"end":{"line":235,"column":48}},"121":{"start":{"line":235,"column":29},"end":{"line":235,"column":46}},"122":{"start":{"line":236,"column":4},"end":{"line":236,"column":30}},"123":{"start":{"line":237,"column":4},"end":{"line":237,"column":29}},"124":{"start":{"line":238,"column":4},"end":{"line":238,"column":28}},"125":{"start":{"line":239,"column":4},"end":{"line":239,"column":64}},"126":{"start":{"line":240,"column":4},"end":{"line":240,"column":33}},"127":{"start":{"line":241,"column":4},"end":{"line":241,"column":19}},"128":{"start":{"line":242,"column":4},"end":{"line":244,"column":5}},"129":{"start":{"line":243,"column":8},"end":{"line":243,"column":70}},"130":{"start":{"line":245,"column":4},"end":{"line":254,"column":5}},"131":{"start":{"line":246,"column":8},"end":{"line":252,"column":9}},"132":{"start":{"line":247,"column":12},"end":{"line":247,"column":28}},"133":{"start":{"line":249,"column":12},"end":{"line":249,"column":40}},"134":{"start":{"line":250,"column":12},"end":{"line":250,"column":47}},"135":{"start":{"line":251,"column":12},"end":{"line":251,"column":90}},"136":{"start":{"line":253,"column":8},"end":{"line":253,"column":22}},"137":{"start":{"line":255,"column":4},"end":{"line":281,"column":5}},"138":{"start":{"line":257,"column":12},"end":{"line":257,"column":63}},"139":{"start":{"line":258,"column":12},"end":{"line":258,"column":18}},"140":{"start":{"line":260,"column":12},"end":{"line":260,"column":42}},"141":{"start":{"line":261,"column":12},"end":{"line":261,"column":42}},"142":{"start":{"line":262,"column":12},"end":{"line":262,"column":24}},"143":{"start":{"line":263,"column":12},"end":{"line":263,"column":18}},"144":{"start":{"line":265,"column":12},"end":{"line":265,"column":54}},"145":{"start":{"line":266,"column":12},"end":{"line":266,"column":56}},"146":{"start":{"line":267,"column":12},"end":{"line":267,"column":42}},"147":{"start":{"line":268,"column":12},"end":{"line":268,"column":42}},"148":{"start":{"line":269,"column":12},"end":{"line":269,"column":32}},"149":{"start":{"line":270,"column":12},"end":{"line":270,"column":18}},"150":{"start":{"line":272,"column":12},"end":{"line":272,"column":54}},"151":{"start":{"line":273,"column":12},"end":{"line":273,"column":54}},"152":{"start":{"line":274,"column":12},"end":{"line":274,"column":42}},"153":{"start":{"line":275,"column":12},"end":{"line":275,"column":42}},"154":{"start":{"line":276,"column":12},"end":{"line":276,"column":32}},"155":{"start":{"line":277,"column":12},"end":{"line":277,"column":18}},"156":{"start":{"line":279,"column":12},"end":{"line":279,"column":23}},"157":{"start":{"line":280,"column":12},"end":{"line":280,"column":18}},"158":{"start":{"line":282,"column":4},"end":{"line":285,"column":5}},"159":{"start":{"line":283,"column":8},"end":{"line":283,"column":52}},"160":{"start":{"line":284,"column":8},"end":{"line":284,"column":20}},"161":{"start":{"line":286,"column":4},"end":{"line":286,"column":14}},"162":{"start":{"line":290,"column":0},"end":{"line":327,"column":2}},"163":{"start":{"line":292,"column":4},"end":{"line":292,"column":29}},"164":{"start":{"line":292,"column":21},"end":{"line":292,"column":28}},"165":{"start":{"line":294,"column":4},"end":{"line":294,"column":37}},"166":{"start":{"line":295,"column":4},"end":{"line":295,"column":74}},"167":{"start":{"line":296,"column":4},"end":{"line":296,"column":46}},"168":{"start":{"line":298,"column":4},"end":{"line":313,"column":5}},"169":{"start":{"line":299,"column":8},"end":{"line":299,"column":21}},"170":{"start":{"line":300,"column":8},"end":{"line":300,"column":28}},"171":{"start":{"line":301,"column":8},"end":{"line":309,"column":9}},"172":{"start":{"line":302,"column":12},"end":{"line":302,"column":39}},"173":{"start":{"line":303,"column":12},"end":{"line":303,"column":35}},"174":{"start":{"line":304,"column":15},"end":{"line":309,"column":9}},"175":{"start":{"line":305,"column":12},"end":{"line":305,"column":33}},"176":{"start":{"line":307,"column":12},"end":{"line":307,"column":38}},"177":{"start":{"line":308,"column":12},"end":{"line":308,"column":35}},"178":{"start":{"line":310,"column":8},"end":{"line":310,"column":26}},"179":{"start":{"line":311,"column":8},"end":{"line":311,"column":22}},"180":{"start":{"line":312,"column":8},"end":{"line":312,"column":33}},"181":{"start":{"line":312,"column":25},"end":{"line":312,"column":32}},"182":{"start":{"line":315,"column":4},"end":{"line":320,"column":5}},"183":{"start":{"line":316,"column":8},"end":{"line":316,"column":35}},"184":{"start":{"line":317,"column":8},"end":{"line":317,"column":31}},"185":{"start":{"line":319,"column":8},"end":{"line":319,"column":29}},"186":{"start":{"line":322,"column":4},"end":{"line":322,"column":32}},"187":{"start":{"line":323,"column":4},"end":{"line":323,"column":17}},"188":{"start":{"line":324,"column":4},"end":{"line":324,"column":22}},"189":{"start":{"line":326,"column":4},"end":{"line":326,"column":25}},"190":{"start":{"line":330,"column":0},"end":{"line":332,"column":2}},"191":{"start":{"line":331,"column":4},"end":{"line":331,"column":70}},"192":{"start":{"line":335,"column":0},"end":{"line":356,"column":2}},"193":{"start":{"line":337,"column":4},"end":{"line":337,"column":70}},"194":{"start":{"line":338,"column":4},"end":{"line":338,"column":23}},"195":{"start":{"line":339,"column":4},"end":{"line":339,"column":21}},"196":{"start":{"line":340,"column":4},"end":{"line":340,"column":58}},"197":{"start":{"line":341,"column":4},"end":{"line":348,"column":5}},"198":{"start":{"line":342,"column":8},"end":{"line":342,"column":28}},"199":{"start":{"line":343,"column":8},"end":{"line":343,"column":27}},"200":{"start":{"line":344,"column":8},"end":{"line":346,"column":9}},"201":{"start":{"line":345,"column":12},"end":{"line":345,"column":30}},"202":{"start":{"line":347,"column":8},"end":{"line":347,"column":27}},"203":{"start":{"line":349,"column":4},"end":{"line":354,"column":5}},"204":{"start":{"line":350,"column":8},"end":{"line":353,"column":9}},"205":{"start":{"line":351,"column":12},"end":{"line":351,"column":24}},"206":{"start":{"line":352,"column":12},"end":{"line":352,"column":19}},"207":{"start":{"line":355,"column":4},"end":{"line":355,"column":24}},"208":{"start":{"line":361,"column":0},"end":{"line":390,"column":2}},"209":{"start":{"line":362,"column":4},"end":{"line":362,"column":35}},"210":{"start":{"line":363,"column":4},"end":{"line":363,"column":49}},"211":{"start":{"line":363,"column":28},"end":{"line":363,"column":48}},"212":{"start":{"line":364,"column":4},"end":{"line":364,"column":19}},"213":{"start":{"line":365,"column":4},"end":{"line":367,"column":5}},"214":{"start":{"line":366,"column":8},"end":{"line":366,"column":49}},"215":{"start":{"line":368,"column":4},"end":{"line":368,"column":24}},"216":{"start":{"line":369,"column":4},"end":{"line":369,"column":23}},"217":{"start":{"line":370,"column":4},"end":{"line":370,"column":37}},"218":{"start":{"line":371,"column":4},"end":{"line":376,"column":5}},"219":{"start":{"line":372,"column":8},"end":{"line":372,"column":25}},"220":{"start":{"line":373,"column":8},"end":{"line":373,"column":49}},"221":{"start":{"line":375,"column":8},"end":{"line":375,"column":26}},"222":{"start":{"line":377,"column":4},"end":{"line":389,"column":5}},"223":{"start":{"line":378,"column":8},"end":{"line":378,"column":35}},"224":{"start":{"line":379,"column":8},"end":{"line":379,"column":18}},"225":{"start":{"line":380,"column":8},"end":{"line":380,"column":81}},"226":{"start":{"line":380,"column":75},"end":{"line":380,"column":79}},"227":{"start":{"line":381,"column":8},"end":{"line":381,"column":31}},"228":{"start":{"line":382,"column":8},"end":{"line":382,"column":18}},"229":{"start":{"line":383,"column":8},"end":{"line":383,"column":81}},"230":{"start":{"line":383,"column":75},"end":{"line":383,"column":79}},"231":{"start":{"line":384,"column":8},"end":{"line":384,"column":41}},"232":{"start":{"line":385,"column":8},"end":{"line":385,"column":38}},"233":{"start":{"line":387,"column":8},"end":{"line":387,"column":34}},"234":{"start":{"line":388,"column":8},"end":{"line":388,"column":31}},"235":{"start":{"line":392,"column":0},"end":{"line":394,"column":2}},"236":{"start":{"line":393,"column":4},"end":{"line":393,"column":25}},"237":{"start":{"line":409,"column":0},"end":{"line":456,"column":2}},"238":{"start":{"line":411,"column":4},"end":{"line":411,"column":33}},"239":{"start":{"line":413,"column":4},"end":{"line":413,"column":59}},"240":{"start":{"line":415,"column":4},"end":{"line":415,"column":37}},"241":{"start":{"line":416,"column":4},"end":{"line":416,"column":70}},"242":{"start":{"line":417,"column":4},"end":{"line":444,"column":5}},"243":{"start":{"line":418,"column":8},"end":{"line":426,"column":9}},"244":{"start":{"line":419,"column":12},"end":{"line":419,"column":37}},"245":{"start":{"line":420,"column":12},"end":{"line":420,"column":34}},"246":{"start":{"line":421,"column":12},"end":{"line":421,"column":28}},"247":{"start":{"line":423,"column":12},"end":{"line":423,"column":32}},"248":{"start":{"line":424,"column":12},"end":{"line":424,"column":28}},"249":{"start":{"line":425,"column":12},"end":{"line":425,"column":25}},"250":{"start":{"line":428,"column":8},"end":{"line":428,"column":42}},"251":{"start":{"line":429,"column":8},"end":{"line":429,"column":57}},"252":{"start":{"line":430,"column":8},"end":{"line":430,"column":55}},"253":{"start":{"line":431,"column":8},"end":{"line":441,"column":9}},"254":{"start":{"line":432,"column":12},"end":{"line":432,"column":34}},"255":{"start":{"line":433,"column":12},"end":{"line":433,"column":38}},"256":{"start":{"line":434,"column":12},"end":{"line":434,"column":37}},"257":{"start":{"line":435,"column":12},"end":{"line":435,"column":72}},"258":{"start":{"line":436,"column":12},"end":{"line":436,"column":56}},"259":{"start":{"line":437,"column":12},"end":{"line":437,"column":53}},"260":{"start":{"line":439,"column":12},"end":{"line":439,"column":62}},"261":{"start":{"line":440,"column":12},"end":{"line":440,"column":46}},"262":{"start":{"line":442,"column":8},"end":{"line":442,"column":31}},"263":{"start":{"line":443,"column":8},"end":{"line":443,"column":27}},"264":{"start":{"line":445,"column":4},"end":{"line":445,"column":18}},"265":{"start":{"line":446,"column":4},"end":{"line":452,"column":5}},"266":{"start":{"line":447,"column":8},"end":{"line":447,"column":25}},"267":{"start":{"line":448,"column":8},"end":{"line":448,"column":40}},"268":{"start":{"line":449,"column":8},"end":{"line":449,"column":31}},"269":{"start":{"line":451,"column":8},"end":{"line":451,"column":29}},"270":{"start":{"line":458,"column":0},"end":{"line":464,"column":2}},"271":{"start":{"line":459,"column":4},"end":{"line":459,"column":28}},"272":{"start":{"line":460,"column":4},"end":{"line":460,"column":43}},"273":{"start":{"line":461,"column":4},"end":{"line":463,"column":5}},"274":{"start":{"line":462,"column":8},"end":{"line":462,"column":25}},"275":{"start":{"line":466,"column":0},"end":{"line":516,"column":2}},"276":{"start":{"line":467,"column":4},"end":{"line":467,"column":29}},"277":{"start":{"line":467,"column":21},"end":{"line":467,"column":28}},"278":{"start":{"line":468,"column":4},"end":{"line":468,"column":23}},"279":{"start":{"line":469,"column":4},"end":{"line":469,"column":35}},"280":{"start":{"line":470,"column":4},"end":{"line":470,"column":42}},"281":{"start":{"line":472,"column":4},"end":{"line":472,"column":31}},"282":{"start":{"line":473,"column":4},"end":{"line":473,"column":38}},"283":{"start":{"line":474,"column":4},"end":{"line":474,"column":41}},"284":{"start":{"line":476,"column":4},"end":{"line":476,"column":29}},"285":{"start":{"line":479,"column":4},"end":{"line":479,"column":31}},"286":{"start":{"line":480,"column":4},"end":{"line":480,"column":55}},"287":{"start":{"line":482,"column":4},"end":{"line":482,"column":59}},"288":{"start":{"line":485,"column":4},"end":{"line":513,"column":5}},"289":{"start":{"line":486,"column":8},"end":{"line":486,"column":39}},"290":{"start":{"line":487,"column":8},"end":{"line":487,"column":45}},"291":{"start":{"line":488,"column":8},"end":{"line":488,"column":44}},"292":{"start":{"line":489,"column":8},"end":{"line":491,"column":9}},"293":{"start":{"line":490,"column":12},"end":{"line":490,"column":49}},"294":{"start":{"line":492,"column":8},"end":{"line":492,"column":40}},"295":{"start":{"line":493,"column":8},"end":{"line":493,"column":37}},"296":{"start":{"line":494,"column":8},"end":{"line":494,"column":33}},"297":{"start":{"line":496,"column":8},"end":{"line":501,"column":9}},"298":{"start":{"line":497,"column":12},"end":{"line":497,"column":24}},"299":{"start":{"line":499,"column":12},"end":{"line":499,"column":71}},"300":{"start":{"line":500,"column":12},"end":{"line":500,"column":48}},"301":{"start":{"line":502,"column":8},"end":{"line":502,"column":50}},"302":{"start":{"line":503,"column":8},"end":{"line":507,"column":9}},"303":{"start":{"line":505,"column":12},"end":{"line":505,"column":49}},"304":{"start":{"line":506,"column":12},"end":{"line":506,"column":50}},"305":{"start":{"line":508,"column":8},"end":{"line":512,"column":9}},"306":{"start":{"line":509,"column":12},"end":{"line":509,"column":75}},"307":{"start":{"line":510,"column":12},"end":{"line":510,"column":50}},"308":{"start":{"line":511,"column":12},"end":{"line":511,"column":32}},"309":{"start":{"line":514,"column":4},"end":{"line":514,"column":24}},"310":{"start":{"line":519,"column":0},"end":{"line":524,"column":2}},"311":{"start":{"line":520,"column":4},"end":{"line":520,"column":49}},"312":{"start":{"line":521,"column":4},"end":{"line":521,"column":28}},"313":{"start":{"line":522,"column":4},"end":{"line":522,"column":28}},"314":{"start":{"line":523,"column":4},"end":{"line":523,"column":28}},"315":{"start":{"line":528,"column":0},"end":{"line":530,"column":2}},"316":{"start":{"line":529,"column":4},"end":{"line":529,"column":45}},"317":{"start":{"line":532,"column":0},"end":{"line":536,"column":2}},"318":{"start":{"line":533,"column":4},"end":{"line":533,"column":40}},"319":{"start":{"line":534,"column":4},"end":{"line":534,"column":37}},"320":{"start":{"line":535,"column":4},"end":{"line":535,"column":13}},"321":{"start":{"line":539,"column":0},"end":{"line":542,"column":2}},"322":{"start":{"line":540,"column":4},"end":{"line":540,"column":72}},"323":{"start":{"line":541,"column":4},"end":{"line":541,"column":26}},"324":{"start":{"line":544,"column":0},"end":{"line":547,"column":2}},"325":{"start":{"line":545,"column":4},"end":{"line":545,"column":34}},"326":{"start":{"line":546,"column":4},"end":{"line":546,"column":24}},"327":{"start":{"line":549,"column":0},"end":{"line":552,"column":2}},"328":{"start":{"line":550,"column":4},"end":{"line":550,"column":38}},"329":{"start":{"line":551,"column":4},"end":{"line":551,"column":40}},"330":{"start":{"line":562,"column":0},"end":{"line":565,"column":2}},"331":{"start":{"line":563,"column":4},"end":{"line":563,"column":25}},"332":{"start":{"line":564,"column":4},"end":{"line":564,"column":26}},"333":{"start":{"line":566,"column":0},"end":{"line":566,"column":51}},"334":{"start":{"line":574,"column":0},"end":{"line":584,"column":2}},"335":{"start":{"line":576,"column":4},"end":{"line":576,"column":38}},"336":{"start":{"line":577,"column":4},"end":{"line":582,"column":5}},"337":{"start":{"line":578,"column":8},"end":{"line":580,"column":9}},"338":{"start":{"line":579,"column":12},"end":{"line":579,"column":21}},"339":{"start":{"line":581,"column":8},"end":{"line":581,"column":17}},"340":{"start":{"line":583,"column":4},"end":{"line":583,"column":13}},"341":{"start":{"line":586,"column":0},"end":{"line":586,"column":26}}},"branchMap":{"1":{"line":15,"type":"binary-expr","locations":[{"start":{"line":15,"column":29},"end":{"line":15,"column":37}},{"start":{"line":15,"column":41},"end":{"line":15,"column":54}}]},"2":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":4}},{"start":{"line":16,"column":4},"end":{"line":16,"column":4}}]},"3":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":4},"end":{"line":17,"column":4}},{"start":{"line":17,"column":4},"end":{"line":17,"column":4}}]},"4":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":4},"end":{"line":23,"column":4}},{"start":{"line":23,"column":4},"end":{"line":23,"column":4}}]},"5":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":4},"end":{"line":31,"column":4}},{"start":{"line":31,"column":4},"end":{"line":31,"column":4}}]},"6":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},{"start":{"line":73,"column":4},"end":{"line":73,"column":4}}]},"7":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":21},"end":{"line":74,"column":24}},{"start":{"line":74,"column":28},"end":{"line":74,"column":40}}]},"8":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":12},"end":{"line":76,"column":12}},{"start":{"line":76,"column":12},"end":{"line":76,"column":12}}]},"9":{"line":79,"type":"binary-expr","locations":[{"start":{"line":79,"column":11},"end":{"line":79,"column":14}},{"start":{"line":79,"column":18},"end":{"line":79,"column":34}}]},"10":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":82,"column":8}},{"start":{"line":82,"column":8},"end":{"line":82,"column":8}}]},"11":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"12":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":8}},{"start":{"line":85,"column":8},"end":{"line":85,"column":8}}]},"13":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":4},"end":{"line":100,"column":4}},{"start":{"line":100,"column":4},"end":{"line":100,"column":4}}]},"14":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":8},"end":{"line":100,"column":11}},{"start":{"line":100,"column":15},"end":{"line":100,"column":27}}]},"15":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":105,"column":4}},{"start":{"line":105,"column":4},"end":{"line":105,"column":4}}]},"16":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":4},"end":{"line":144,"column":4}},{"start":{"line":144,"column":4},"end":{"line":144,"column":4}}]},"17":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":8},"end":{"line":145,"column":8}},{"start":{"line":145,"column":8},"end":{"line":145,"column":8}}]},"18":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":4},"end":{"line":175,"column":4}},{"start":{"line":175,"column":4},"end":{"line":175,"column":4}}]},"19":{"line":175,"type":"binary-expr","locations":[{"start":{"line":175,"column":8},"end":{"line":175,"column":10}},{"start":{"line":175,"column":14},"end":{"line":175,"column":37}}]},"20":{"line":180,"type":"if","locations":[{"start":{"line":180,"column":4},"end":{"line":180,"column":4}},{"start":{"line":180,"column":4},"end":{"line":180,"column":4}}]},"21":{"line":181,"type":"cond-expr","locations":[{"start":{"line":181,"column":70},"end":{"line":181,"column":79}},{"start":{"line":181,"column":80},"end":{"line":181,"column":89}}]},"22":{"line":183,"type":"if","locations":[{"start":{"line":183,"column":4},"end":{"line":183,"column":4}},{"start":{"line":183,"column":4},"end":{"line":183,"column":4}}]},"23":{"line":184,"type":"binary-expr","locations":[{"start":{"line":184,"column":16},"end":{"line":184,"column":47}},{"start":{"line":184,"column":51},"end":{"line":184,"column":83}}]},"24":{"line":186,"type":"binary-expr","locations":[{"start":{"line":186,"column":17},"end":{"line":186,"column":19}},{"start":{"line":186,"column":23},"end":{"line":186,"column":40}},{"start":{"line":186,"column":44},"end":{"line":186,"column":59}}]},"25":{"line":190,"type":"if","locations":[{"start":{"line":190,"column":4},"end":{"line":190,"column":4}},{"start":{"line":190,"column":4},"end":{"line":190,"column":4}}]},"26":{"line":190,"type":"binary-expr","locations":[{"start":{"line":190,"column":9},"end":{"line":190,"column":23}},{"start":{"line":191,"column":10},"end":{"line":191,"column":39}},{"start":{"line":192,"column":10},"end":{"line":192,"column":39}}]},"27":{"line":194,"type":"binary-expr","locations":[{"start":{"line":194,"column":17},"end":{"line":194,"column":51}},{"start":{"line":195,"column":17},"end":{"line":195,"column":52}}]},"28":{"line":197,"type":"if","locations":[{"start":{"line":197,"column":8},"end":{"line":197,"column":8}},{"start":{"line":197,"column":8},"end":{"line":197,"column":8}}]},"29":{"line":200,"type":"if","locations":[{"start":{"line":200,"column":11},"end":{"line":200,"column":11}},{"start":{"line":200,"column":11},"end":{"line":200,"column":11}}]},"30":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":8},"end":{"line":203,"column":8}},{"start":{"line":203,"column":8},"end":{"line":203,"column":8}}]},"31":{"line":203,"type":"binary-expr","locations":[{"start":{"line":203,"column":12},"end":{"line":203,"column":18}},{"start":{"line":203,"column":22},"end":{"line":203,"column":41}}]},"32":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":11},"end":{"line":206,"column":11}},{"start":{"line":206,"column":11},"end":{"line":206,"column":11}}]},"33":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":8},"end":{"line":212,"column":8}},{"start":{"line":212,"column":8},"end":{"line":212,"column":8}}]},"34":{"line":212,"type":"binary-expr","locations":[{"start":{"line":212,"column":12},"end":{"line":212,"column":18}},{"start":{"line":212,"column":22},"end":{"line":212,"column":41}}]},"35":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":11},"end":{"line":215,"column":11}},{"start":{"line":215,"column":11},"end":{"line":215,"column":11}}]},"36":{"line":221,"type":"if","locations":[{"start":{"line":221,"column":8},"end":{"line":221,"column":8}},{"start":{"line":221,"column":8},"end":{"line":221,"column":8}}]},"37":{"line":221,"type":"binary-expr","locations":[{"start":{"line":221,"column":12},"end":{"line":221,"column":18}},{"start":{"line":221,"column":22},"end":{"line":221,"column":41}}]},"38":{"line":229,"type":"cond-expr","locations":[{"start":{"line":229,"column":21},"end":{"line":229,"column":26}},{"start":{"line":229,"column":29},"end":{"line":229,"column":53}}]},"39":{"line":229,"type":"binary-expr","locations":[{"start":{"line":229,"column":43},"end":{"line":229,"column":48}},{"start":{"line":229,"column":50},"end":{"line":229,"column":52}}]},"40":{"line":235,"type":"if","locations":[{"start":{"line":235,"column":4},"end":{"line":235,"column":4}},{"start":{"line":235,"column":4},"end":{"line":235,"column":4}}]},"41":{"line":242,"type":"if","locations":[{"start":{"line":242,"column":4},"end":{"line":242,"column":4}},{"start":{"line":242,"column":4},"end":{"line":242,"column":4}}]},"42":{"line":245,"type":"if","locations":[{"start":{"line":245,"column":4},"end":{"line":245,"column":4}},{"start":{"line":245,"column":4},"end":{"line":245,"column":4}}]},"43":{"line":246,"type":"if","locations":[{"start":{"line":246,"column":8},"end":{"line":246,"column":8}},{"start":{"line":246,"column":8},"end":{"line":246,"column":8}}]},"44":{"line":255,"type":"switch","locations":[{"start":{"line":256,"column":8},"end":{"line":258,"column":18}},{"start":{"line":259,"column":8},"end":{"line":263,"column":18}},{"start":{"line":264,"column":8},"end":{"line":270,"column":18}},{"start":{"line":271,"column":8},"end":{"line":277,"column":18}},{"start":{"line":278,"column":8},"end":{"line":280,"column":18}}]},"45":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":4},"end":{"line":282,"column":4}},{"start":{"line":282,"column":4},"end":{"line":282,"column":4}}]},"46":{"line":292,"type":"if","locations":[{"start":{"line":292,"column":4},"end":{"line":292,"column":4}},{"start":{"line":292,"column":4},"end":{"line":292,"column":4}}]},"47":{"line":295,"type":"cond-expr","locations":[{"start":{"line":295,"column":32},"end":{"line":295,"column":69}},{"start":{"line":295,"column":72},"end":{"line":295,"column":73}}]},"48":{"line":298,"type":"if","locations":[{"start":{"line":298,"column":4},"end":{"line":298,"column":4}},{"start":{"line":298,"column":4},"end":{"line":298,"column":4}}]},"49":{"line":301,"type":"if","locations":[{"start":{"line":301,"column":8},"end":{"line":301,"column":8}},{"start":{"line":301,"column":8},"end":{"line":301,"column":8}}]},"50":{"line":301,"type":"binary-expr","locations":[{"start":{"line":301,"column":12},"end":{"line":301,"column":22}},{"start":{"line":301,"column":26},"end":{"line":301,"column":48}}]},"51":{"line":304,"type":"if","locations":[{"start":{"line":304,"column":15},"end":{"line":304,"column":15}},{"start":{"line":304,"column":15},"end":{"line":304,"column":15}}]},"52":{"line":312,"type":"if","locations":[{"start":{"line":312,"column":8},"end":{"line":312,"column":8}},{"start":{"line":312,"column":8},"end":{"line":312,"column":8}}]},"53":{"line":315,"type":"if","locations":[{"start":{"line":315,"column":4},"end":{"line":315,"column":4}},{"start":{"line":315,"column":4},"end":{"line":315,"column":4}}]},"54":{"line":331,"type":"binary-expr","locations":[{"start":{"line":331,"column":11},"end":{"line":331,"column":28}},{"start":{"line":331,"column":32},"end":{"line":331,"column":69}}]},"55":{"line":338,"type":"binary-expr","locations":[{"start":{"line":338,"column":12},"end":{"line":338,"column":17}},{"start":{"line":338,"column":21},"end":{"line":338,"column":22}}]},"56":{"line":341,"type":"if","locations":[{"start":{"line":341,"column":4},"end":{"line":341,"column":4}},{"start":{"line":341,"column":4},"end":{"line":341,"column":4}}]},"57":{"line":344,"type":"binary-expr","locations":[{"start":{"line":344,"column":15},"end":{"line":344,"column":29}},{"start":{"line":344,"column":33},"end":{"line":344,"column":48}}]},"58":{"line":349,"type":"if","locations":[{"start":{"line":349,"column":4},"end":{"line":349,"column":4}},{"start":{"line":349,"column":4},"end":{"line":349,"column":4}}]},"59":{"line":363,"type":"if","locations":[{"start":{"line":363,"column":4},"end":{"line":363,"column":4}},{"start":{"line":363,"column":4},"end":{"line":363,"column":4}}]},"60":{"line":371,"type":"if","locations":[{"start":{"line":371,"column":4},"end":{"line":371,"column":4}},{"start":{"line":371,"column":4},"end":{"line":371,"column":4}}]},"61":{"line":377,"type":"if","locations":[{"start":{"line":377,"column":4},"end":{"line":377,"column":4}},{"start":{"line":377,"column":4},"end":{"line":377,"column":4}}]},"62":{"line":413,"type":"binary-expr","locations":[{"start":{"line":413,"column":20},"end":{"line":413,"column":30}},{"start":{"line":413,"column":34},"end":{"line":413,"column":58}}]},"63":{"line":417,"type":"if","locations":[{"start":{"line":417,"column":4},"end":{"line":417,"column":4}},{"start":{"line":417,"column":4},"end":{"line":417,"column":4}}]},"64":{"line":418,"type":"if","locations":[{"start":{"line":418,"column":8},"end":{"line":418,"column":8}},{"start":{"line":418,"column":8},"end":{"line":418,"column":8}}]},"65":{"line":431,"type":"if","locations":[{"start":{"line":431,"column":8},"end":{"line":431,"column":8}},{"start":{"line":431,"column":8},"end":{"line":431,"column":8}}]},"66":{"line":446,"type":"if","locations":[{"start":{"line":446,"column":4},"end":{"line":446,"column":4}},{"start":{"line":446,"column":4},"end":{"line":446,"column":4}}]},"67":{"line":467,"type":"if","locations":[{"start":{"line":467,"column":4},"end":{"line":467,"column":4}},{"start":{"line":467,"column":4},"end":{"line":467,"column":4}}]},"68":{"line":468,"type":"binary-expr","locations":[{"start":{"line":468,"column":12},"end":{"line":468,"column":17}},{"start":{"line":468,"column":21},"end":{"line":468,"column":22}}]},"69":{"line":480,"type":"cond-expr","locations":[{"start":{"line":480,"column":34},"end":{"line":480,"column":50}},{"start":{"line":480,"column":53},"end":{"line":480,"column":54}}]},"70":{"line":482,"type":"binary-expr","locations":[{"start":{"line":482,"column":20},"end":{"line":482,"column":30}},{"start":{"line":482,"column":34},"end":{"line":482,"column":58}}]},"71":{"line":485,"type":"if","locations":[{"start":{"line":485,"column":4},"end":{"line":485,"column":4}},{"start":{"line":485,"column":4},"end":{"line":485,"column":4}}]},"72":{"line":489,"type":"if","locations":[{"start":{"line":489,"column":8},"end":{"line":489,"column":8}},{"start":{"line":489,"column":8},"end":{"line":489,"column":8}}]},"73":{"line":496,"type":"if","locations":[{"start":{"line":496,"column":8},"end":{"line":496,"column":8}},{"start":{"line":496,"column":8},"end":{"line":496,"column":8}}]},"74":{"line":503,"type":"if","locations":[{"start":{"line":503,"column":8},"end":{"line":503,"column":8}},{"start":{"line":503,"column":8},"end":{"line":503,"column":8}}]},"75":{"line":508,"type":"if","locations":[{"start":{"line":508,"column":8},"end":{"line":508,"column":8}},{"start":{"line":508,"column":8},"end":{"line":508,"column":8}}]},"76":{"line":508,"type":"binary-expr","locations":[{"start":{"line":508,"column":12},"end":{"line":508,"column":35}},{"start":{"line":508,"column":39},"end":{"line":508,"column":51}}]},"77":{"line":540,"type":"cond-expr","locations":[{"start":{"line":540,"column":51},"end":{"line":540,"column":52}},{"start":{"line":540,"column":55},"end":{"line":540,"column":71}}]},"78":{"line":551,"type":"cond-expr","locations":[{"start":{"line":551,"column":24},"end":{"line":551,"column":26}},{"start":{"line":551,"column":29},"end":{"line":551,"column":39}}]},"79":{"line":578,"type":"if","locations":[{"start":{"line":578,"column":8},"end":{"line":578,"column":8}},{"start":{"line":578,"column":8},"end":{"line":578,"column":8}}]}},"code":["\"use strict\";","","var Spec = require('./Spec');","","/**LongSpec is a Long Specifier, i.e. a string of quant+id tokens that may be"," * indeed very (many megabytes) long.  Ids are compressed using"," * dynamic dictionaries (codebooks) or \"unicode numbers\" (base-32768"," * encoding utilizing Unicode symbols as quasi-binary).  Unicode"," * numbers are particularly handy for encoding timestamps.  LongSpecs"," * may be assigned shared codebooks (2nd parameter); a codebook is an"," * object containing encode/decode tables and some stats, e.g."," * {en:{'/Type':'/T'}, de:{'/T':'/Type'}}. It is OK to pass an empty object as"," * a codebook; it gets initialized automatically).  */","var LongSpec = function (spec, codeBook) {","    var cb = this.codeBook = codeBook || {en:{},de:{}};","    if (!cb.en) { cb.en = {}; }","    if (!cb.de) { // revert en to make de","        cb.de = {};","        for(var tok in cb.en) {","            cb.de[cb.en[tok]] = tok;","        }","    }","    if (!cb.lastCodes) {","        cb.lastCodes = {'/':0x30,'#':0x30,'!':0x30,'.':0x30,'+':0x30};","    }","    // For a larger document, a single LongSpec may be some megabytes long.","    // As we don't want to rewrite those megabytes on every keypress, we","    // divide data into chunks.","    this.chunks = [];","    this.chunkLengths = [];","    if (spec) {","        this.append(spec);","    }","};","","LongSpec.reQTokEn = /([/#\\!\\.\\+])([0-\\u802f]+)/g;","LongSpec.reQTok = new RegExp('([/#\\\\.!\\\\*\\\\+])(=)'.replace(/=/g, Spec.rT), 'g');","LongSpec.rTEn = '[0-\\\\u802f]+';","LongSpec.reQTokExtEn = new RegExp","    ('([/#\\\\.!\\\\*])((=)(?:\\\\+(=))?)'.replace(/=/g, LongSpec.rTEn), 'g');","","/** Well, for many-MB LongSpecs this may take some time. */","LongSpec.prototype.toString = function () {","    var ret = [];","    for(var i = this.iterator(); !i.end(); i.next()){","        ret.push(i.decode());","    }","    return ret.join('');","};","","LongSpec.prototype.length = function () { // TODO .length ?","    var len = 0;","    for(var i=0; i<this.chunks.length; i++) {","        len += this.chunkLengths[i];","    }","    return len;","};","","LongSpec.prototype.charLength = function () {","    var len = 0;","    for(var i=0; i<this.chunks.length; i++) {","        len += this.chunks[i].length;","    }","    return len;","};","","//   T O K E N  C O M P R E S S I O N","","LongSpec.prototype.allocateCode = function (tok) {","    var quant = tok.charAt(0);","    //if (Spec.quants.indexOf(quant)===-1) {throw new Error('invalid token');}","    var en, cb = this.codeBook, lc = cb.lastCodes;","    if (lc[quant]<'z'.charCodeAt(0)) { // pick a nice letter","        for(var i=1; !en && i<tok.length; i++) {","            var x = tok.charAt(i), e = quant+x;","            if (!cb.de[e]) {  en = e;  }","        }","    }","    while (!en && lc[quant]<0x802f) {","        var y = String.fromCharCode(lc[quant]++);","        var mayUse = quant + y;","        if ( ! cb.en[mayUse] ) {  en = mayUse;  }","    }","    if (!en) {","        if (tok.length<=3) {","            throw new Error(\"out of codes\");","        }","        en = tok;","    }","    cb.en[tok] = en;","    cb.de[en] = tok;","    return en;","};","","//  F O R M A T  C O N V E R S I O N","","","/** Always 2-char base2^15 coding for an int (0...2^30-1) */","LongSpec.int2uni = function (i) {","    if (i<0 || i>0x7fffffff) { throw new Error('int is out of range'); }","    return String.fromCharCode( 0x30+(i>>15), 0x30+(i&0x7fff) );","};","","LongSpec.uni2int = function (uni) {","    if (!/^[0-\\u802f]{2}$/.test(uni)) {","        throw new Error('invalid unicode number') ;","    }","    return ((uni.charCodeAt(0)-0x30)<<15) | (uni.charCodeAt(1)-0x30);","};","","//  I T E R A T O R S","","/*  Unfortunately, LongSpec cannot be made a simple array because tokens are","    not fixed-width in the general case. Some tokens are dictionary-encoded","    into two-symbol segments, e.g. \".on\" --> \".o\". Other tokens may need 6","    symbols to encode, e.g. \"!timstse+author~ssn\" -> \"!tss+a\".","    Also, iterators opportuniatically use sequential compression. Namely,","    tokens that differ by +1 are collapsed into quant-only sequences:","    \"!abc+s!abd+s\" -> \"!abc+s!\"","    So, locating and iterating becomes less-than-trivial. Raw string offsets","    better not be exposed in the external interface; hence, we need iterators.","","    {","        offset:5,       // char offset in the string (chunk)","        index:1,        // index of the entry (token)","        en: \"!\",        // the actual matched token (encoded)","        chunk:0,        // index of the chunk","        de: \"!timst00+author~ssn\", // decoded token","        seqstart: \"!ts0+a\", // first token of the sequence (encoded)","        seqoffset: 3    // offset in the sequence","    }","*/","LongSpec.Iterator = function Iterator (owner, index) {","    this.owner = owner;         // our LongSpec","    /*this.chunk = 0;             // the chunk we are in","    this.index = -1;            // token index (position \"before the 1st token\")","    this.chunkIndex = -1;       // token index within the chunk","    this.prevFull = undefined;  // previous full (non-collapsed) token","    //  seqStart IS the previous match or prev match is trivial","    this.prevCollapsed = 0;","    this.match = null;","    //this.next();*/","    this.skip2chunk(0);","    if (index) {","        if (index.constructor===LongSpec.Iterator) {","            index = index.index;","        }","        this.skip(index);","    }","};","","","// also matches collapsed quant-only tokens","LongSpec.Iterator.reTok = new RegExp","    ('([/#\\\\.!\\\\*])((=)(?:\\\\+(=))?)?'.replace(/=/g, LongSpec.rTEn), 'g');","","","/* The method converts a (relatively) verbose Base64 specifier into an"," * internal compressed format.  Compressed tokens are also"," * variable-length; the length of the token depends on the encoding"," * method used."," * 1 unicode symbol: dictionary-encoded (up to 2^15 entries for each quant),"," * 2 symbols: simple timestamp base-2^15 encoded,"," * 3 symbols: timestamp+seq base-2^15,"," * 4 symbols: long-number base-2^15,"," * 5 symbols and more: unencoded original (fallback)."," * As long as two sequential unicoded entries differ by +1 in the body"," * of the token (quant and extension being the same), we use sequential"," * compression. The token is collapsed (only the quant is left)."," * */","LongSpec.Iterator.prototype.encode = function encode (de) {","    var re = Spec.reQTokExt;","    re.lastIndex = 0;","    var m=re.exec(de); // this one is de","    if (!m || m[0].length!==de.length) {throw new Error('malformed token: '+de);}","    var tok=m[0], quant=m[1], body=m[3], ext=m[4];","    var pm = this.prevFull; // this one is en","    var prevTok, prevQuant, prevBody, prevExt;","    var enBody, enExt;","    if (pm) {","        prevTok=pm[0], prevQuant=pm[1], prevBody=pm[3], prevExt=pm[4]?'+'+pm[4]:undefined;","    }","    if (ext) {","        enExt = this.owner.codeBook.en['+'+ext] || this.owner.allocateCode('+'+ext);","    }","    var maySeq = pm && quant===prevQuant && enExt===prevExt;","    var haveSeq=false, seqBody = '';","    var int1, int2, uni1, uni2;","    //var expected = head + (counter===-1?'':Spec.int2base(counter+inc,1)) + tail;","    if ( body.length<=4 ||          // TODO make it a switch","         (quant in LongSpec.quants2code) ||","         (tok in this.owner.codeBook.en) ) {  // 1 symbol by the codebook","","        enBody = this.owner.codeBook.en[quant+body] ||","                 this.owner.allocateCode(quant+body);","        enBody = enBody.substr(1); // FIXME separate codebooks 4 quants","        if (maySeq) {// seq coding for dictionary-coded","            seqBody = enBody;","        }","    } else if (body.length===5) { // 2-symbol base-2^15","        var int = Spec.base2int(body);","        enBody = LongSpec.int2uni(int);","        if (maySeq && prevBody.length===2) {","            seqBody = LongSpec.int2uni(int-this.prevCollapsed-1);","        }","    } else if (body.length===7) { // 3-symbol base-2^15","        int1 = Spec.base2int(body.substr(0,5));","        int2 = Spec.base2int(body.substr(5,2));","        uni1 = LongSpec.int2uni(int1);","        uni2 = LongSpec.int2uni(int2).charAt(1);","        enBody = uni1 + uni2;","        if (maySeq && prevBody.length===3) {","            seqBody = uni1 + LongSpec.int2uni(int2-this.prevCollapsed-1).charAt(1);","        }","    } else if (body.length===10) { // 4-symbol 60-bit long number","        int1 = Spec.base2int(body.substr(0,5));","        int2 = Spec.base2int(body.substr(5,5));","        uni1 = LongSpec.int2uni(int1);","        uni2 = LongSpec.int2uni(int2);","        enBody = uni1 + uni2;","        if (maySeq && prevBody.length===4) {","            seqBody = uni1+LongSpec.int2uni(int2-this.prevCollapsed-1);","        }","    } else { // verbatim","        enBody = body;","        seqBody = enBody;","    }","    haveSeq = seqBody===prevBody;","    return haveSeq ? quant : quant+enBody+(enExt||'');","};","LongSpec.quants2code = {'/':1,'.':1};","","/** Decode a compressed specifier back into base64. */","LongSpec.Iterator.prototype.decode = function decode () {","    if (this.match===null) { return undefined; }","    var quant = this.match[1];","    var body = this.match[3];","    var ext = this.match[4];","    var pm=this.prevFull, prevTok, prevQuant, prevBody, prevExt;","    var int1, int2, base1, base2;","    var de = quant;","    if (pm) {","        prevTok=pm[0], prevQuant=pm[1], prevBody=pm[3], prevExt=pm[4];","    }","    if (!body) {","        if (prevBody.length===1) {","            body = prevBody;","        } else {","            var l_1 = prevBody.length-1;","            var int = prevBody.charCodeAt(l_1);","            body = prevBody.substr(0,l_1) + String.fromCharCode(int+this.prevCollapsed+1);","        }","        ext = prevExt;","    }","    switch (body.length) {","        case 1:","            de += this.owner.codeBook.de[quant+body].substr(1); // TODO sep codebooks","            break;","        case 2:","            int1 = LongSpec.uni2int(body);","            base1 = Spec.int2base(int1,5);","            de += base1;","            break;","        case 3:","            int1 = LongSpec.uni2int(body.substr(0,2));","            int2 = LongSpec.uni2int('0'+body.charAt(2));","            base1 = Spec.int2base(int1,5);","            base2 = Spec.int2base(int2,2);","            de += base1 + base2;","            break;","        case 4:","            int1 = LongSpec.uni2int(body.substr(0,2));","            int2 = LongSpec.uni2int(body.substr(2,2));","            base1 = Spec.int2base(int1,5);","            base2 = Spec.int2base(int2,5);","            de += base1 + base2;","            break;","        default:","            de += body;","            break;","    }","    if (ext) {","        var deExt = this.owner.codeBook.de['+'+ext];","        de += deExt;","    }","    return de;","};","","","LongSpec.Iterator.prototype.next = function ( ) {","","    if (this.end()) {return;}","","    var re = LongSpec.Iterator.reTok;","    re.lastIndex = this.match ? this.match.index+this.match[0].length : 0;","    var chunk = this.owner.chunks[this.chunk];","","    if (chunk.length===re.lastIndex) {","        this.chunk++;","        this.chunkIndex = 0;","        if (this.match && this.match[0].length>0) {","            this.prevFull = this.match;","            this.prevCollapsed = 0;","        } else if (this.match) {","            this.prevCollapsed++;","        } else { // empty","            this.prevFull = undefined;","            this.prevCollapsed = 0;","        }","        this.match = null;","        this.index ++;","        if (this.end()) {return;}","    }","","    if (this.match[0].length>1) {","        this.prevFull = this.match;","        this.prevCollapsed = 0;","    } else {","        this.prevCollapsed++;","    }","","    this.match = re.exec(chunk);","    this.index++;","    this.chunkIndex++;","","    return this.match[0];","};","","","LongSpec.Iterator.prototype.end = function () {","    return this.match===null && this.chunk===this.owner.chunks.length;","};","","","LongSpec.Iterator.prototype.skip = function ( count ) {","    // TODO may implement fast-skip of seq-compressed spans","    var lengths = this.owner.chunkLengths, chunks = this.owner.chunks;","    count = count || 1;","    var left = count;","    var leftInChunk = lengths[this.chunk]-this.chunkIndex;","    if ( leftInChunk <= count ) { // skip chunks","        left -= leftInChunk; // skip the current chunk","        var c=this.chunk+1;    // how many extra chunks to skip","        while (left>chunks[c] && c<chunks.length) {","            left-=chunks[++c];","        }","        this.skip2chunk(c);","    }","    if (this.chunk<chunks.length) {","        while (left>0) {","            this.next();","            left--;","        }","    }","    return count - left;","};","","/** Irrespectively of the current state of the iterator moves it to the","  * first token in the chunk specified; chunk===undefined moves it to","  * the end() position (one after the last token). */","LongSpec.Iterator.prototype.skip2chunk = function ( chunk ) {","    var chunks = this.owner.chunks;","    if (chunk===undefined) {chunk=chunks.length;}","    this.index = 0;","    for(var c=0; c<chunk; c++) { // TODO perf pick the current value","        this.index += this.owner.chunkLengths[c];","    }","    this.chunkIndex = 0;","    this.chunk = chunk;","    var re = LongSpec.Iterator.reTok;","    if ( chunk < chunks.length ) {","        re.lastIndex = 0;","        this.match = re.exec(chunks[this.chunk]);","    } else {","        this.match = null;","    }","    if (chunk>0) { // (1) chunks must not be empty; (2) a chunk starts with a full token","        var prev = chunks[chunk-1];","        var j = 0;","        while (Spec.quants.indexOf(prev.charAt(prev.length-1-j)) !== -1) { j++; }","        this.prevCollapsed = j;","        var k = 0;","        while (Spec.quants.indexOf(prev.charAt(prev.length-1-j-k))===-1) { k++; }","        re.lastIndex = prev.length-1-j-k;","        this.prevFull = re.exec(prev);","    } else {","        this.prevFull = undefined;","        this.prevCollapsed = 0;","    }","};","","LongSpec.Iterator.prototype.token = function () {","    return this.decode();","};","","/*LongSpec.Iterator.prototype.de = function () {","    if (this.match===null) {return undefined;}","    return this.owner.decode(this.match[0],this.prevFull?this.prevFull[0]:undefined,this.prevCollapsed);","};*/","","/*LongSpec.Iterator.prototype.insertDe = function (de) {","    var en = this.owner.encode(de,this.prevFull?this.prevFull[0]:undefined,this.prevCollapsed);","    this.insert(en);","};*/","","","/** As sequential coding is incapsulated in LongSpec.Iterator, inserts are","  * done by Iterator as well. */","LongSpec.Iterator.prototype.insert = function (de) { // insertBefore","","    var insStr = this.encode(de);","","    var brokenSeq = this.match && this.match[0].length===1;","","    var re = LongSpec.Iterator.reTok;","    var chunks = this.owner.chunks, lengths = this.owner.chunkLengths;","    if (this.chunk==chunks.length) { // end(), append","        if (chunks.length>0) {","            var ind = this.chunk - 1;","            chunks[ind] += insStr;","            lengths[ind] ++;","        } else {","            chunks.push(insStr);","            lengths.push(1);","            this.chunk++;","        }","    } else {","        var chunkStr = chunks[this.chunk];","        var preEq = chunkStr.substr(0, this.match.index);","        var postEq = chunkStr.substr(this.match.index);","        if (brokenSeq) {","            var me = this.token();","            this.prevFull = undefined;","            var en = this.encode(me);","            chunks[this.chunk] = preEq + insStr + en + postEq.substr(1);","            re.lastIndex = preEq.length + insStr.length;","            this.match = re.exec(chunks[this.chunk]);","        } else {","            chunks[this.chunk] = preEq + insStr + /**/ postEq;","            this.match.index += insStr.length;","        }","        lengths[this.chunk] ++;","        this.chunkIndex ++;","    }","    this.index ++;","    if (insStr.length>1) {","        re.lastIndex = 0;","        this.prevFull = re.exec(insStr);","        this.prevCollapsed = 0;","    } else {","        this.prevCollapsed++;","    }","","    // may split chunks","    // may join chunks","};","","LongSpec.Iterator.prototype.insertBlock = function (de) { // insertBefore","    var re = Spec.reQTokExt;","    var toks = de.match(re).reverse(), tok;","    while (tok=toks.pop()) {","        this.insert(tok);","    }","};","","LongSpec.Iterator.prototype.erase = function (count) {","    if (this.end()) {return;}","    count = count || 1;","    var chunks = this.owner.chunks;","    var lengths = this.owner.chunkLengths;","    // remember offsets","    var fromChunk = this.chunk;","    var fromOffset = this.match.index;","    var fromChunkIndex = this.chunkIndex; // TODO clone USE 2 iterators or i+c","","    count = this.skip(count); // checked for runaway skip()","    // the iterator now is at the first-after-erased pos","","    var tillChunk = this.chunk;","    var tillOffset = this.match ? this.match.index : 0; // end()","","    var collapsed = this.match && this.match[0].length===1;","","    // splice strings, adjust indexes","    if (fromChunk===tillChunk) {","        var chunk = chunks[this.chunk];","        var pre = chunk.substr(0,fromOffset);","        var post = chunk.substr(tillOffset);","        if (collapsed) { // sequence is broken now; needs expansion","            post = this.token() + post.substr(1);","        }","        chunks[this.chunk] = pre + post;","        lengths[this.chunk] -= count;","        this.chunkIndex -= count;","    } else {  // FIXME refac, more tests (+wear)","        if (fromOffset===0) {","            fromChunk--;","        } else {","            chunks[fromChunk] = chunks[fromChunk].substr(0,fromOffset);","            lengths[fromChunk] = fromChunkIndex;","        }","        var midChunks = tillChunk - fromChunk - 1;","        if (midChunks) { // wipe'em out","            //for(var c=fromChunk+1; c<tillChunk; c++) ;","            chunks.splice(fromChunk+1,midChunks);","            lengths.splice(fromChunk+1,midChunks);","        }","        if (tillChunk<chunks.length && tillOffset>0) {","            chunks[tillChunk] = chunks[tillChunk].substr(this.match.index);","            lengths[tillChunk] -= this.chunkIndex;","            this.chunkIndex = 0;","        }","    }","    this.index -= count;","","};","","","LongSpec.Iterator.prototype.clone = function () {","    var copy = new LongSpec.Iterator(this.owner);","    copy.chunk = this.chunk;","    copy.match = this.match;","    copy.index = this.index;","};","","//  L O N G S P E C  A P I","","LongSpec.prototype.iterator = function (index) {","    return new LongSpec.Iterator(this,index);","};","","LongSpec.prototype.end = function () {","    var e = new LongSpec.Iterator(this);","    e.skip2chunk(this.chunks.length);","    return e;","};","","/** Insert a token at a given position. */","LongSpec.prototype.insert = function (tok, i) {","    var iter = i.constructor===LongSpec.Iterator ? i : this.iterator(i);","    iter.insertBlock(tok);","};","","LongSpec.prototype.tokenAt = function (pos) {","    var iter = this.iterator(pos);","    return iter.token();","};","","LongSpec.prototype.indexOf = function (tok, startAt) {","    var iter = this.find(tok,startAt);","    return iter.end() ? -1 : iter.index;","};","","/*LongSpec.prototype.insertAfter = function (tok, i) {","    LongSpec.reQTokExtEn.lastIndex = i;","    var m = LongSpec.reQTokExtEn.exec(this.value);","    if (m.index!==i) { throw new Error('incorrect position'); }","    var splitAt = i+m[0].length;","    this.insertBefore(tok,splitAt);","};*/","","LongSpec.prototype.add = function ls_add (spec) {","    var pos = this.end();","    pos.insertBlock(spec);","};","LongSpec.prototype.append = LongSpec.prototype.add;","","/** The method finds the first occurence of a token, returns an"," * iterator.  While the internal format of an iterator is kind of"," * opaque, and generally is not recommended to rely on, that is"," * actually a regex match array. Note that it contains encoded tokens."," * The second parameter is the position to start scanning from, passed"," * either as an iterator or an offset. */","LongSpec.prototype.find = function (tok, startIndex) {","    //var en = this.encode(tok).toString(); // don't split on +","    var i = this.iterator(startIndex);","    while (!i.end()) {","        if (i.token()===tok) {","            return i;","        }","        i.next();","    }","    return i;","};","","module.exports = LongSpec;",""],"l":{"3":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"23":0,"24":0,"29":0,"30":0,"31":0,"32":0,"36":1,"37":1,"38":1,"39":1,"43":1,"44":0,"45":0,"46":0,"48":0,"51":1,"52":0,"53":0,"54":0,"56":0,"59":1,"60":0,"61":0,"62":0,"64":0,"69":1,"70":0,"72":0,"73":0,"74":0,"75":0,"76":0,"79":0,"80":0,"81":0,"82":0,"84":0,"85":0,"86":0,"88":0,"90":0,"91":0,"92":0,"99":1,"100":0,"101":0,"104":1,"105":0,"106":0,"108":0,"133":1,"134":0,"143":0,"144":0,"145":0,"146":0,"148":0,"154":1,"171":1,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"183":0,"184":0,"186":0,"187":0,"188":0,"190":0,"194":0,"196":0,"197":0,"198":0,"200":0,"201":0,"202":0,"203":0,"204":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"225":0,"226":0,"228":0,"229":0,"231":1,"234":1,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"245":0,"246":0,"247":0,"249":0,"250":0,"251":0,"253":0,"255":0,"257":0,"258":0,"260":0,"261":0,"262":0,"263":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"279":0,"280":0,"282":0,"283":0,"284":0,"286":0,"290":1,"292":0,"294":0,"295":0,"296":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"307":0,"308":0,"310":0,"311":0,"312":0,"315":0,"316":0,"317":0,"319":0,"322":0,"323":0,"324":0,"326":0,"330":1,"331":0,"335":1,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"347":0,"349":0,"350":0,"351":0,"352":0,"355":0,"361":1,"362":0,"363":0,"364":0,"365":0,"366":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"375":0,"377":0,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"387":0,"388":0,"392":1,"393":0,"409":1,"411":0,"413":0,"415":0,"416":0,"417":0,"418":0,"419":0,"420":0,"421":0,"423":0,"424":0,"425":0,"428":0,"429":0,"430":0,"431":0,"432":0,"433":0,"434":0,"435":0,"436":0,"437":0,"439":0,"440":0,"442":0,"443":0,"445":0,"446":0,"447":0,"448":0,"449":0,"451":0,"458":1,"459":0,"460":0,"461":0,"462":0,"466":1,"467":0,"468":0,"469":0,"470":0,"472":0,"473":0,"474":0,"476":0,"479":0,"480":0,"482":0,"485":0,"486":0,"487":0,"488":0,"489":0,"490":0,"492":0,"493":0,"494":0,"496":0,"497":0,"499":0,"500":0,"502":0,"503":0,"505":0,"506":0,"508":0,"509":0,"510":0,"511":0,"514":0,"519":1,"520":0,"521":0,"522":0,"523":0,"528":1,"529":0,"532":1,"533":0,"534":0,"535":0,"539":1,"540":0,"541":0,"544":1,"545":0,"546":0,"549":1,"550":0,"551":0,"562":1,"563":0,"564":0,"566":1,"574":1,"576":0,"577":0,"578":0,"579":0,"581":0,"583":0,"586":1}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Syncable.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Syncable.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":1,"21":1,"22":1,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":1,"32":1,"33":1,"34":3,"35":3,"36":0,"37":1,"38":6,"39":6,"40":3,"41":3,"42":0,"43":3,"44":3,"45":6,"46":6,"47":6,"48":6,"49":6,"50":6,"51":6,"52":5,"53":25,"54":5,"55":5,"56":6,"57":7,"58":7,"59":7,"60":0,"61":6,"62":12,"63":12,"64":12,"65":0,"66":6,"67":0,"68":0,"69":0,"70":6,"71":2,"72":6,"73":6,"74":101,"75":101,"76":101,"77":84,"78":17,"79":0,"80":17,"81":17,"82":0,"83":0,"84":6,"85":2,"86":2,"87":0,"88":2,"89":2,"90":2,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":6,"101":6,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":6,"111":6,"112":6,"113":6,"114":6,"115":6,"116":6,"117":6,"118":0,"119":6,"120":12,"121":1,"122":12,"123":1,"124":11,"125":9,"126":2,"127":1,"128":19,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":6,"138":6,"139":6,"140":6,"141":6,"142":6,"143":1,"144":0,"145":0,"146":0,"147":0,"148":0,"149":1,"150":0,"151":0,"152":0,"153":0,"154":0,"155":0,"156":1,"157":0,"158":1,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":1,"166":0,"167":0,"168":0,"169":0,"170":0,"171":0,"172":0,"173":0,"174":0,"175":0,"176":0,"177":0,"178":0,"179":0,"180":0,"181":0,"182":0,"183":0,"184":0,"185":0,"186":0,"187":0,"188":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"195":0,"196":0,"197":0,"198":0,"199":0,"200":0,"201":0,"202":0,"203":0,"204":0,"205":0,"206":0,"207":0,"208":0,"209":0,"210":0,"211":0,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"222":0,"223":0,"224":0,"225":0,"226":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"236":0,"237":0,"238":0,"239":0,"240":0,"241":0,"242":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"250":0,"251":0,"252":0,"253":0,"254":0,"255":0,"256":0,"257":0,"258":0,"259":0,"260":0,"261":0,"262":0,"263":0,"264":0,"265":0,"266":0,"267":0,"268":0,"269":0,"270":0,"271":0,"272":0,"273":0,"274":0,"275":0,"276":0,"277":0,"278":0,"279":0,"280":0,"281":0,"282":0,"283":0,"284":0,"285":0,"286":0,"287":0,"288":0,"289":0,"290":0,"291":0,"292":0,"293":0,"294":0,"295":0,"296":0,"297":0,"298":0,"299":0,"300":0,"301":0,"302":0,"303":0,"304":0,"305":0,"306":0,"307":0,"308":0,"309":0,"310":0,"311":0,"312":0,"313":0,"314":0,"315":0,"316":0,"317":0,"318":0,"319":0,"320":0,"321":0,"322":0,"323":0,"324":0,"325":0,"326":0,"327":0,"328":0,"329":0,"330":0,"331":0,"332":0,"333":0,"334":0,"335":0,"336":0,"337":0,"338":0,"339":0,"340":0,"341":0,"342":0,"343":0,"344":0,"345":0,"346":0,"347":0,"348":0,"349":0,"350":0,"351":0,"352":0,"353":0,"354":0,"355":0,"356":0,"357":0,"358":0,"359":0,"360":0,"361":0,"362":0,"363":0,"364":0,"365":0,"366":0,"367":0,"368":0,"369":0,"370":0,"371":0,"372":0,"373":0,"374":0,"375":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":0,"382":0,"383":0,"384":0,"385":0,"386":0,"387":0,"388":0,"389":1,"390":1,"391":0,"392":0,"393":0,"394":0,"395":0,"396":0,"397":0,"398":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[3,0],"12":[3,3],"13":[5,1],"14":[6,1],"15":[7,0],"16":[6,2],"17":[12,0],"18":[6,6],"19":[0,0],"20":[6,4],"21":[101,0],"22":[84,17],"23":[0,17],"24":[17,17],"25":[17,0],"26":[6,4],"27":[0,2],"28":[2,0,0],"29":[0,0],"30":[0,0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[6,0],"36":[6,2],"37":[1,11],"38":[12,11],"39":[9,2],"40":[11,10],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0],"46":[0,0],"47":[0,0,0,0,0,0,0,0],"48":[0,0],"49":[0,0,0,0],"50":[0,0],"51":[0,0],"52":[0,0],"53":[0,0],"54":[0,0],"55":[0,0],"56":[0,0],"57":[0,0],"58":[0,0],"59":[0,0],"60":[0,0],"61":[0,0],"62":[0,0],"63":[0,0],"64":[0,0],"65":[0,0],"66":[0,0,0],"67":[0,0],"68":[0,0],"69":[0,0],"70":[0,0],"71":[0,0],"72":[0,0],"73":[0,0],"74":[0,0],"75":[0,0],"76":[0,0],"77":[0,0],"78":[0,0,0],"79":[0,0],"80":[0,0],"81":[0,0],"82":[0,0],"83":[0,0],"84":[0,0,0],"85":[0,0],"86":[0,0],"87":[0,0],"88":[0,0],"89":[0,0],"90":[0,0],"91":[0,0],"92":[0,0],"93":[0,0],"94":[0,0],"95":[0,0],"96":[0,0],"97":[0,0],"98":[0,0],"99":[0,0],"100":[0,0],"101":[0,0],"102":[0,0],"103":[0,0],"104":[0,0],"105":[0,0],"106":[0,0],"107":[0,0],"108":[0,0],"109":[0,0],"110":[0,0],"111":[0,0],"112":[0,0],"113":[0,0],"114":[0,0],"115":[0,0],"116":[0,0],"117":[0,0],"118":[0,0],"119":[0,0],"120":[0,0],"121":[0,0],"122":[0,0],"123":[0,0],"124":[0,0],"125":[0,0],"126":[0,0],"127":[0,0],"128":[0,0],"129":[0,0],"130":[0,0],"131":[0,0,0],"132":[0,0],"133":[0,0],"134":[0,0],"135":[0,0],"136":[0,0],"137":[0,0],"138":[0,0],"139":[0,0,0],"140":[0,0],"141":[0,0],"142":[0,0],"143":[0,0],"144":[0,0]},"f":{"1":0,"2":0,"3":3,"4":6,"5":0,"6":6,"7":2,"8":0,"9":0,"10":12,"11":19,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0},"fnMap":{"1":{"name":"Syncable","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":20}}},"2":{"name":"(anonymous_2)","line":55,"loc":{"start":{"line":55,"column":20},"end":{"line":55,"column":35}}},"3":{"name":"fnname","line":65,"loc":{"start":{"line":65,"column":0},"end":{"line":65,"column":20}}},"4":{"name":"(anonymous_4)","line":79,"loc":{"start":{"line":79,"column":18},"end":{"line":79,"column":37}}},"5":{"name":"SomeSyncable","line":83,"loc":{"start":{"line":83,"column":13},"end":{"line":83,"column":37}}},"6":{"name":"(anonymous_6)","line":92,"loc":{"start":{"line":92,"column":20},"end":{"line":92,"column":32}}},"7":{"name":"(anonymous_7)","line":140,"loc":{"start":{"line":140,"column":35},"end":{"line":140,"column":52}}},"8":{"name":"(anonymous_8)","line":183,"loc":{"start":{"line":183,"column":57},"end":{"line":183,"column":73}}},"9":{"name":"(anonymous_9)","line":200,"loc":{"start":{"line":200,"column":29},"end":{"line":200,"column":57}}},"10":{"name":"normalizeDefault","line":232,"loc":{"start":{"line":232,"column":4},"end":{"line":232,"column":35}}},"11":{"name":"wrapCall","line":243,"loc":{"start":{"line":243,"column":4},"end":{"line":243,"column":28}}},"12":{"name":"wrapper","line":244,"loc":{"start":{"line":244,"column":15},"end":{"line":244,"column":34}}},"13":{"name":"(anonymous_13)","line":279,"loc":{"start":{"line":279,"column":23},"end":{"line":279,"column":41}}},"14":{"name":"(anonymous_14)","line":291,"loc":{"start":{"line":291,"column":26},"end":{"line":291,"column":44}}},"15":{"name":"(anonymous_15)","line":311,"loc":{"start":{"line":311,"column":26},"end":{"line":311,"column":47}}},"16":{"name":"(anonymous_16)","line":324,"loc":{"start":{"line":324,"column":10},"end":{"line":324,"column":22}}},"17":{"name":"(anonymous_17)","line":331,"loc":{"start":{"line":331,"column":18},"end":{"line":331,"column":32}}},"18":{"name":"(anonymous_18)","line":339,"loc":{"start":{"line":339,"column":15},"end":{"line":339,"column":27}}},"19":{"name":"(anonymous_19)","line":346,"loc":{"start":{"line":346,"column":13},"end":{"line":346,"column":42}}},"20":{"name":"fail","line":351,"loc":{"start":{"line":351,"column":8},"end":{"line":351,"column":31}}},"21":{"name":"(anonymous_21)","line":418,"loc":{"start":{"line":418,"column":10},"end":{"line":418,"column":38}}},"22":{"name":"(anonymous_22)","line":443,"loc":{"start":{"line":443,"column":13},"end":{"line":443,"column":38}}},"23":{"name":"(anonymous_23)","line":452,"loc":{"start":{"line":452,"column":11},"end":{"line":452,"column":29}}},"24":{"name":"(anonymous_24)","line":465,"loc":{"start":{"line":465,"column":13},"end":{"line":465,"column":25}}},"25":{"name":"(anonymous_25)","line":500,"loc":{"start":{"line":500,"column":10},"end":{"line":500,"column":26}}},"26":{"name":"(anonymous_26)","line":523,"loc":{"start":{"line":523,"column":16},"end":{"line":523,"column":28}}},"27":{"name":"(anonymous_27)","line":533,"loc":{"start":{"line":533,"column":9},"end":{"line":533,"column":35}}},"28":{"name":"(anonymous_28)","line":541,"loc":{"start":{"line":541,"column":14},"end":{"line":541,"column":40}}},"29":{"name":"(anonymous_29)","line":554,"loc":{"start":{"line":554,"column":14},"end":{"line":554,"column":30}}},"30":{"name":"(anonymous_30)","line":568,"loc":{"start":{"line":568,"column":14},"end":{"line":568,"column":26}}},"31":{"name":"(anonymous_31)","line":572,"loc":{"start":{"line":572,"column":22},"end":{"line":572,"column":58}}},"32":{"name":"(anonymous_32)","line":589,"loc":{"start":{"line":589,"column":11},"end":{"line":589,"column":23}}},"33":{"name":"(anonymous_33)","line":614,"loc":{"start":{"line":614,"column":12},"end":{"line":614,"column":42}}},"34":{"name":"(anonymous_34)","line":625,"loc":{"start":{"line":625,"column":29},"end":{"line":625,"column":41}}},"35":{"name":"(anonymous_35)","line":638,"loc":{"start":{"line":638,"column":29},"end":{"line":638,"column":41}}},"36":{"name":"deliverWithFilter","line":659,"loc":{"start":{"line":659,"column":33},"end":{"line":659,"column":76}}},"37":{"name":"(anonymous_37)","line":681,"loc":{"start":{"line":681,"column":14},"end":{"line":681,"column":44}}},"38":{"name":"(anonymous_38)","line":692,"loc":{"start":{"line":692,"column":13},"end":{"line":692,"column":40}}},"39":{"name":"(anonymous_39)","line":700,"loc":{"start":{"line":700,"column":15},"end":{"line":700,"column":42}}},"40":{"name":"(anonymous_40)","line":716,"loc":{"start":{"line":716,"column":15},"end":{"line":716,"column":42}}},"41":{"name":"(anonymous_41)","line":736,"loc":{"start":{"line":736,"column":14},"end":{"line":736,"column":42}}},"42":{"name":"(anonymous_42)","line":797,"loc":{"start":{"line":797,"column":17},"end":{"line":797,"column":29}}},"43":{"name":"(anonymous_43)","line":825,"loc":{"start":{"line":825,"column":25},"end":{"line":825,"column":52}}},"44":{"name":"(anonymous_44)","line":842,"loc":{"start":{"line":842,"column":10},"end":{"line":842,"column":36}}},"45":{"name":"(anonymous_45)","line":869,"loc":{"start":{"line":869,"column":19},"end":{"line":869,"column":46}}},"46":{"name":"(anonymous_46)","line":876,"loc":{"start":{"line":876,"column":11},"end":{"line":876,"column":23}}},"47":{"name":"(anonymous_47)","line":895,"loc":{"start":{"line":895,"column":8},"end":{"line":895,"column":20}}},"48":{"name":"(anonymous_48)","line":907,"loc":{"start":{"line":907,"column":10},"end":{"line":907,"column":32}}},"49":{"name":"onceWrap","line":908,"loc":{"start":{"line":908,"column":24},"end":{"line":908,"column":58}}},"50":{"name":"stateVersionVector","line":930,"loc":{"start":{"line":930,"column":30},"end":{"line":930,"column":65}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":10,"column":0},"end":{"line":51,"column":1}},"4":{"start":{"line":12,"column":4},"end":{"line":12,"column":23}},"5":{"start":{"line":22,"column":4},"end":{"line":22,"column":23}},"6":{"start":{"line":24,"column":4},"end":{"line":24,"column":53}},"7":{"start":{"line":25,"column":4},"end":{"line":26,"column":39}},"8":{"start":{"line":27,"column":4},"end":{"line":34,"column":5}},"9":{"start":{"line":28,"column":8},"end":{"line":28,"column":68}},"10":{"start":{"line":29,"column":11},"end":{"line":34,"column":5}},"11":{"start":{"line":30,"column":8},"end":{"line":30,"column":32}},"12":{"start":{"line":32,"column":8},"end":{"line":32,"column":37}},"13":{"start":{"line":33,"column":8},"end":{"line":33,"column":29}},"14":{"start":{"line":37,"column":4},"end":{"line":37,"column":42}},"15":{"start":{"line":38,"column":4},"end":{"line":38,"column":41}},"16":{"start":{"line":38,"column":26},"end":{"line":38,"column":39}},"17":{"start":{"line":46,"column":4},"end":{"line":46,"column":17}},"18":{"start":{"line":48,"column":4},"end":{"line":48,"column":23}},"19":{"start":{"line":50,"column":4},"end":{"line":50,"column":16}},"20":{"start":{"line":52,"column":0},"end":{"line":52,"column":26}},"21":{"start":{"line":54,"column":0},"end":{"line":54,"column":20}},"22":{"start":{"line":55,"column":0},"end":{"line":60,"column":2}},"23":{"start":{"line":56,"column":4},"end":{"line":56,"column":31}},"24":{"start":{"line":56,"column":16},"end":{"line":56,"column":29}},"25":{"start":{"line":57,"column":4},"end":{"line":57,"column":54}},"26":{"start":{"line":57,"column":40},"end":{"line":57,"column":52}},"27":{"start":{"line":58,"column":4},"end":{"line":58,"column":77}},"28":{"start":{"line":58,"column":63},"end":{"line":58,"column":75}},"29":{"start":{"line":59,"column":4},"end":{"line":59,"column":17}},"30":{"start":{"line":61,"column":0},"end":{"line":61,"column":60}},"31":{"start":{"line":62,"column":0},"end":{"line":62,"column":86}},"32":{"start":{"line":63,"column":0},"end":{"line":63,"column":23}},"33":{"start":{"line":65,"column":0},"end":{"line":68,"column":1}},"34":{"start":{"line":66,"column":4},"end":{"line":66,"column":36}},"35":{"start":{"line":66,"column":19},"end":{"line":66,"column":34}},"36":{"start":{"line":67,"column":4},"end":{"line":67,"column":59}},"37":{"start":{"line":79,"column":0},"end":{"line":268,"column":2}},"38":{"start":{"line":80,"column":4},"end":{"line":80,"column":28}},"39":{"start":{"line":81,"column":4},"end":{"line":89,"column":5}},"40":{"start":{"line":82,"column":8},"end":{"line":82,"column":31}},"41":{"start":{"line":83,"column":8},"end":{"line":85,"column":10}},"42":{"start":{"line":84,"column":12},"end":{"line":84,"column":49}},"43":{"start":{"line":86,"column":8},"end":{"line":86,"column":18}},"44":{"start":{"line":88,"column":8},"end":{"line":88,"column":26}},"45":{"start":{"line":92,"column":4},"end":{"line":216,"column":6}},"46":{"start":{"line":93,"column":8},"end":{"line":93,"column":30}},"47":{"start":{"line":94,"column":8},"end":{"line":94,"column":28}},"48":{"start":{"line":95,"column":8},"end":{"line":95,"column":23}},"49":{"start":{"line":96,"column":8},"end":{"line":96,"column":29}},"50":{"start":{"line":98,"column":8},"end":{"line":99,"column":17}},"51":{"start":{"line":100,"column":8},"end":{"line":108,"column":9}},"52":{"start":{"line":102,"column":12},"end":{"line":104,"column":13}},"53":{"start":{"line":103,"column":16},"end":{"line":103,"column":68}},"54":{"start":{"line":105,"column":12},"end":{"line":107,"column":13}},"55":{"start":{"line":106,"column":16},"end":{"line":106,"column":58}},"56":{"start":{"line":111,"column":8},"end":{"line":118,"column":9}},"57":{"start":{"line":112,"column":12},"end":{"line":117,"column":13}},"58":{"start":{"line":113,"column":16},"end":{"line":113,"column":48}},"59":{"start":{"line":114,"column":16},"end":{"line":114,"column":44}},"60":{"start":{"line":116,"column":16},"end":{"line":116,"column":54}},"61":{"start":{"line":121,"column":8},"end":{"line":128,"column":9}},"62":{"start":{"line":122,"column":12},"end":{"line":127,"column":13}},"63":{"start":{"line":123,"column":16},"end":{"line":123,"column":58}},"64":{"start":{"line":124,"column":16},"end":{"line":124,"column":44}},"65":{"start":{"line":126,"column":16},"end":{"line":126,"column":62}},"66":{"start":{"line":131,"column":8},"end":{"line":137,"column":9}},"67":{"start":{"line":132,"column":12},"end":{"line":136,"column":13}},"68":{"start":{"line":133,"column":16},"end":{"line":133,"column":44}},"69":{"start":{"line":135,"column":16},"end":{"line":135,"column":55}},"70":{"start":{"line":140,"column":8},"end":{"line":144,"column":17}},"71":{"start":{"line":141,"column":12},"end":{"line":143,"column":13}},"72":{"start":{"line":142,"column":16},"end":{"line":142,"column":41}},"73":{"start":{"line":147,"column":8},"end":{"line":164,"column":9}},"74":{"start":{"line":148,"column":12},"end":{"line":163,"column":13}},"75":{"start":{"line":149,"column":16},"end":{"line":149,"column":55}},"76":{"start":{"line":150,"column":16},"end":{"line":160,"column":17}},"77":{"start":{"line":152,"column":20},"end":{"line":152,"column":43}},"78":{"start":{"line":153,"column":23},"end":{"line":160,"column":17}},"79":{"start":{"line":154,"column":20},"end":{"line":154,"column":43}},"80":{"start":{"line":155,"column":23},"end":{"line":160,"column":17}},"81":{"start":{"line":157,"column":20},"end":{"line":157,"column":29}},"82":{"start":{"line":159,"column":20},"end":{"line":159,"column":68}},"83":{"start":{"line":162,"column":16},"end":{"line":162,"column":58}},"84":{"start":{"line":167,"column":8},"end":{"line":197,"column":9}},"85":{"start":{"line":168,"column":12},"end":{"line":168,"column":47}},"86":{"start":{"line":169,"column":12},"end":{"line":169,"column":40}},"87":{"start":{"line":169,"column":29},"end":{"line":169,"column":38}},"88":{"start":{"line":171,"column":12},"end":{"line":196,"column":13}},"89":{"start":{"line":174,"column":16},"end":{"line":174,"column":51}},"90":{"start":{"line":175,"column":16},"end":{"line":175,"column":22}},"91":{"start":{"line":178,"column":16},"end":{"line":178,"column":53}},"92":{"start":{"line":179,"column":16},"end":{"line":179,"column":22}},"93":{"start":{"line":181,"column":16},"end":{"line":195,"column":17}},"94":{"start":{"line":183,"column":20},"end":{"line":192,"column":29}},"95":{"start":{"line":184,"column":24},"end":{"line":191,"column":25}},"96":{"start":{"line":186,"column":28},"end":{"line":186,"column":40}},"97":{"start":{"line":188,"column":28},"end":{"line":188,"column":46}},"98":{"start":{"line":190,"column":28},"end":{"line":190,"column":72}},"99":{"start":{"line":194,"column":20},"end":{"line":194,"column":64}},"100":{"start":{"line":199,"column":8},"end":{"line":199,"column":29}},"101":{"start":{"line":200,"column":8},"end":{"line":212,"column":10}},"102":{"start":{"line":201,"column":12},"end":{"line":201,"column":64}},"103":{"start":{"line":202,"column":12},"end":{"line":204,"column":13}},"104":{"start":{"line":203,"column":16},"end":{"line":203,"column":60}},"105":{"start":{"line":205,"column":12},"end":{"line":205,"column":52}},"106":{"start":{"line":206,"column":12},"end":{"line":211,"column":13}},"107":{"start":{"line":207,"column":16},"end":{"line":207,"column":53}},"108":{"start":{"line":208,"column":16},"end":{"line":210,"column":17}},"109":{"start":{"line":209,"column":20},"end":{"line":209,"column":62}},"110":{"start":{"line":214,"column":8},"end":{"line":214,"column":39}},"111":{"start":{"line":215,"column":8},"end":{"line":215,"column":26}},"112":{"start":{"line":218,"column":4},"end":{"line":218,"column":43}},"113":{"start":{"line":219,"column":4},"end":{"line":219,"column":35}},"114":{"start":{"line":220,"column":4},"end":{"line":220,"column":26}},"115":{"start":{"line":223,"column":4},"end":{"line":223,"column":12}},"116":{"start":{"line":224,"column":4},"end":{"line":224,"column":32}},"117":{"start":{"line":225,"column":4},"end":{"line":227,"column":5}},"118":{"start":{"line":226,"column":8},"end":{"line":226,"column":59}},"119":{"start":{"line":228,"column":4},"end":{"line":230,"column":5}},"120":{"start":{"line":229,"column":8},"end":{"line":229,"column":56}},"121":{"start":{"line":232,"column":4},"end":{"line":240,"column":5}},"122":{"start":{"line":233,"column":8},"end":{"line":235,"column":9}},"123":{"start":{"line":234,"column":12},"end":{"line":234,"column":23}},"124":{"start":{"line":236,"column":8},"end":{"line":238,"column":9}},"125":{"start":{"line":237,"column":12},"end":{"line":237,"column":49}},"126":{"start":{"line":239,"column":8},"end":{"line":239,"column":39}},"127":{"start":{"line":243,"column":4},"end":{"line":259,"column":5}},"128":{"start":{"line":244,"column":8},"end":{"line":258,"column":10}},"129":{"start":{"line":246,"column":12},"end":{"line":246,"column":47}},"130":{"start":{"line":247,"column":12},"end":{"line":247,"column":68}},"131":{"start":{"line":249,"column":12},"end":{"line":249,"column":76}},"132":{"start":{"line":251,"column":12},"end":{"line":255,"column":13}},"133":{"start":{"line":252,"column":16},"end":{"line":252,"column":26}},"134":{"start":{"line":253,"column":19},"end":{"line":255,"column":13}},"135":{"start":{"line":254,"column":16},"end":{"line":254,"column":31}},"136":{"start":{"line":257,"column":12},"end":{"line":257,"column":50}},"137":{"start":{"line":262,"column":4},"end":{"line":262,"column":23}},"138":{"start":{"line":263,"column":4},"end":{"line":263,"column":28}},"139":{"start":{"line":264,"column":4},"end":{"line":264,"column":38}},"140":{"start":{"line":265,"column":4},"end":{"line":265,"column":44}},"141":{"start":{"line":266,"column":4},"end":{"line":266,"column":30}},"142":{"start":{"line":267,"column":4},"end":{"line":267,"column":14}},"143":{"start":{"line":279,"column":0},"end":{"line":285,"column":2}},"144":{"start":{"line":280,"column":4},"end":{"line":280,"column":46}},"145":{"start":{"line":281,"column":4},"end":{"line":281,"column":29}},"146":{"start":{"line":282,"column":4},"end":{"line":282,"column":40}},"147":{"start":{"line":283,"column":4},"end":{"line":283,"column":18}},"148":{"start":{"line":284,"column":4},"end":{"line":284,"column":28}},"149":{"start":{"line":291,"column":0},"end":{"line":303,"column":2}},"150":{"start":{"line":292,"column":4},"end":{"line":295,"column":29}},"151":{"start":{"line":296,"column":4},"end":{"line":298,"column":5}},"152":{"start":{"line":297,"column":8},"end":{"line":297,"column":44}},"153":{"start":{"line":299,"column":4},"end":{"line":299,"column":24}},"154":{"start":{"line":300,"column":4},"end":{"line":302,"column":5}},"155":{"start":{"line":301,"column":8},"end":{"line":301,"column":19}},"156":{"start":{"line":311,"column":0},"end":{"line":316,"column":2}},"157":{"start":{"line":312,"column":4},"end":{"line":315,"column":40}},"158":{"start":{"line":320,"column":0},"end":{"line":918,"column":3}},"159":{"start":{"line":324,"column":24},"end":{"line":324,"column":75}},"160":{"start":{"line":332,"column":8},"end":{"line":332,"column":68}},"161":{"start":{"line":340,"column":8},"end":{"line":340,"column":51}},"162":{"start":{"line":347,"column":8},"end":{"line":347,"column":29}},"163":{"start":{"line":348,"column":8},"end":{"line":348,"column":41}},"164":{"start":{"line":349,"column":8},"end":{"line":349,"column":18}},"165":{"start":{"line":351,"column":8},"end":{"line":358,"column":9}},"166":{"start":{"line":352,"column":12},"end":{"line":352,"column":86}},"167":{"start":{"line":353,"column":12},"end":{"line":357,"column":13}},"168":{"start":{"line":354,"column":16},"end":{"line":354,"column":45}},"169":{"start":{"line":355,"column":19},"end":{"line":357,"column":13}},"170":{"start":{"line":356,"column":16},"end":{"line":356,"column":38}},"171":{"start":{"line":361,"column":8},"end":{"line":363,"column":9}},"172":{"start":{"line":362,"column":12},"end":{"line":362,"column":48}},"173":{"start":{"line":364,"column":8},"end":{"line":366,"column":9}},"174":{"start":{"line":365,"column":12},"end":{"line":365,"column":49}},"175":{"start":{"line":367,"column":8},"end":{"line":369,"column":9}},"176":{"start":{"line":368,"column":12},"end":{"line":368,"column":58}},"177":{"start":{"line":370,"column":8},"end":{"line":372,"column":9}},"178":{"start":{"line":371,"column":12},"end":{"line":371,"column":50}},"179":{"start":{"line":374,"column":8},"end":{"line":374,"column":48}},"180":{"start":{"line":376,"column":8},"end":{"line":409,"column":9}},"181":{"start":{"line":377,"column":12},"end":{"line":377,"column":33}},"182":{"start":{"line":378,"column":12},"end":{"line":406,"column":13}},"183":{"start":{"line":379,"column":16},"end":{"line":382,"column":17}},"184":{"start":{"line":380,"column":20},"end":{"line":380,"column":49}},"185":{"start":{"line":381,"column":20},"end":{"line":381,"column":27}},"186":{"start":{"line":384,"column":16},"end":{"line":384,"column":62}},"187":{"start":{"line":386,"column":16},"end":{"line":396,"column":17}},"188":{"start":{"line":387,"column":20},"end":{"line":387,"column":76}},"189":{"start":{"line":393,"column":20},"end":{"line":393,"column":92}},"190":{"start":{"line":395,"column":20},"end":{"line":395,"column":44}},"191":{"start":{"line":398,"column":16},"end":{"line":398,"column":45}},"192":{"start":{"line":399,"column":19},"end":{"line":406,"column":13}},"193":{"start":{"line":401,"column":16},"end":{"line":401,"column":67}},"194":{"start":{"line":403,"column":16},"end":{"line":403,"column":45}},"195":{"start":{"line":405,"column":16},"end":{"line":405,"column":54}},"196":{"start":{"line":408,"column":12},"end":{"line":408,"column":55}},"197":{"start":{"line":412,"column":8},"end":{"line":412,"column":20}},"198":{"start":{"line":419,"column":8},"end":{"line":421,"column":47}},"199":{"start":{"line":422,"column":8},"end":{"line":439,"column":9}},"200":{"start":{"line":423,"column":12},"end":{"line":423,"column":28}},"201":{"start":{"line":424,"column":12},"end":{"line":431,"column":13}},"202":{"start":{"line":425,"column":16},"end":{"line":425,"column":30}},"203":{"start":{"line":427,"column":16},"end":{"line":427,"column":63}},"204":{"start":{"line":427,"column":52},"end":{"line":427,"column":61}},"205":{"start":{"line":428,"column":16},"end":{"line":428,"column":62}},"206":{"start":{"line":428,"column":51},"end":{"line":428,"column":60}},"207":{"start":{"line":429,"column":16},"end":{"line":429,"column":56}},"208":{"start":{"line":429,"column":45},"end":{"line":429,"column":54}},"209":{"start":{"line":430,"column":16},"end":{"line":430,"column":31}},"210":{"start":{"line":432,"column":12},"end":{"line":438,"column":13}},"211":{"start":{"line":433,"column":16},"end":{"line":437,"column":17}},"212":{"start":{"line":434,"column":20},"end":{"line":434,"column":57}},"213":{"start":{"line":436,"column":20},"end":{"line":436,"column":56}},"214":{"start":{"line":440,"column":8},"end":{"line":440,"column":45}},"215":{"start":{"line":444,"column":8},"end":{"line":444,"column":44}},"216":{"start":{"line":445,"column":8},"end":{"line":445,"column":35}},"217":{"start":{"line":453,"column":8},"end":{"line":459,"column":9}},"218":{"start":{"line":454,"column":12},"end":{"line":458,"column":13}},"219":{"start":{"line":455,"column":16},"end":{"line":455,"column":57}},"220":{"start":{"line":456,"column":16},"end":{"line":457,"column":60}},"221":{"start":{"line":468,"column":8},"end":{"line":468,"column":69}},"222":{"start":{"line":469,"column":8},"end":{"line":473,"column":9}},"223":{"start":{"line":470,"column":12},"end":{"line":472,"column":13}},"224":{"start":{"line":471,"column":16},"end":{"line":471,"column":28}},"225":{"start":{"line":474,"column":8},"end":{"line":474,"column":19}},"226":{"start":{"line":503,"column":8},"end":{"line":503,"column":49}},"227":{"start":{"line":503,"column":30},"end":{"line":503,"column":47}},"228":{"start":{"line":504,"column":8},"end":{"line":504,"column":26}},"229":{"start":{"line":505,"column":8},"end":{"line":505,"column":24}},"230":{"start":{"line":506,"column":8},"end":{"line":519,"column":9}},"231":{"start":{"line":507,"column":12},"end":{"line":507,"column":47}},"232":{"start":{"line":508,"column":12},"end":{"line":513,"column":13}},"233":{"start":{"line":509,"column":16},"end":{"line":512,"column":17}},"234":{"start":{"line":510,"column":20},"end":{"line":510,"column":49}},"235":{"start":{"line":511,"column":20},"end":{"line":511,"column":58}},"236":{"start":{"line":515,"column":12},"end":{"line":515,"column":48}},"237":{"start":{"line":516,"column":12},"end":{"line":518,"column":13}},"238":{"start":{"line":517,"column":16},"end":{"line":517,"column":54}},"239":{"start":{"line":520,"column":8},"end":{"line":520,"column":21}},"240":{"start":{"line":534,"column":8},"end":{"line":534,"column":20}},"241":{"start":{"line":542,"column":8},"end":{"line":544,"column":9}},"242":{"start":{"line":543,"column":12},"end":{"line":543,"column":43}},"243":{"start":{"line":545,"column":8},"end":{"line":547,"column":9}},"244":{"start":{"line":546,"column":12},"end":{"line":546,"column":45}},"245":{"start":{"line":555,"column":8},"end":{"line":555,"column":45}},"246":{"start":{"line":555,"column":30},"end":{"line":555,"column":43}},"247":{"start":{"line":556,"column":8},"end":{"line":556,"column":51}},"248":{"start":{"line":556,"column":36},"end":{"line":556,"column":49}},"249":{"start":{"line":557,"column":8},"end":{"line":557,"column":35}},"250":{"start":{"line":558,"column":8},"end":{"line":558,"column":62}},"251":{"start":{"line":558,"column":47},"end":{"line":558,"column":60}},"252":{"start":{"line":559,"column":8},"end":{"line":559,"column":73}},"253":{"start":{"line":559,"column":59},"end":{"line":559,"column":71}},"254":{"start":{"line":560,"column":8},"end":{"line":560,"column":44}},"255":{"start":{"line":569,"column":8},"end":{"line":569,"column":31}},"256":{"start":{"line":573,"column":8},"end":{"line":574,"column":14}},"257":{"start":{"line":575,"column":8},"end":{"line":575,"column":33}},"258":{"start":{"line":575,"column":22},"end":{"line":575,"column":31}},"259":{"start":{"line":577,"column":8},"end":{"line":585,"column":9}},"260":{"start":{"line":578,"column":12},"end":{"line":578,"column":35}},"261":{"start":{"line":579,"column":12},"end":{"line":581,"column":13}},"262":{"start":{"line":580,"column":16},"end":{"line":580,"column":26}},"263":{"start":{"line":582,"column":12},"end":{"line":584,"column":13}},"264":{"start":{"line":583,"column":16},"end":{"line":583,"column":25}},"265":{"start":{"line":586,"column":8},"end":{"line":586,"column":18}},"266":{"start":{"line":590,"column":8},"end":{"line":590,"column":45}},"267":{"start":{"line":591,"column":8},"end":{"line":598,"column":9}},"268":{"start":{"line":592,"column":12},"end":{"line":592,"column":33}},"269":{"start":{"line":593,"column":12},"end":{"line":597,"column":13}},"270":{"start":{"line":594,"column":16},"end":{"line":594,"column":82}},"271":{"start":{"line":596,"column":16},"end":{"line":596,"column":39}},"272":{"start":{"line":617,"column":12},"end":{"line":617,"column":34}},"273":{"start":{"line":617,"column":25},"end":{"line":617,"column":32}},"274":{"start":{"line":619,"column":12},"end":{"line":619,"column":28}},"275":{"start":{"line":621,"column":12},"end":{"line":632,"column":13}},"276":{"start":{"line":622,"column":16},"end":{"line":630,"column":19}},"277":{"start":{"line":626,"column":24},"end":{"line":626,"column":57}},"278":{"start":{"line":627,"column":24},"end":{"line":627,"column":48}},"279":{"start":{"line":628,"column":24},"end":{"line":628,"column":57}},"280":{"start":{"line":631,"column":16},"end":{"line":631,"column":23}},"281":{"start":{"line":634,"column":12},"end":{"line":642,"column":13}},"282":{"start":{"line":635,"column":16},"end":{"line":641,"column":18}},"283":{"start":{"line":639,"column":24},"end":{"line":639,"column":62}},"284":{"start":{"line":644,"column":12},"end":{"line":672,"column":13}},"285":{"start":{"line":645,"column":16},"end":{"line":645,"column":47}},"286":{"start":{"line":646,"column":16},"end":{"line":647,"column":51}},"287":{"start":{"line":649,"column":16},"end":{"line":654,"column":17}},"288":{"start":{"line":650,"column":20},"end":{"line":650,"column":83}},"289":{"start":{"line":651,"column":20},"end":{"line":651,"column":74}},"290":{"start":{"line":653,"column":20},"end":{"line":653,"column":27}},"291":{"start":{"line":655,"column":16},"end":{"line":665,"column":17}},"292":{"start":{"line":656,"column":20},"end":{"line":664,"column":22}},"293":{"start":{"line":660,"column":28},"end":{"line":662,"column":29}},"294":{"start":{"line":661,"column":32},"end":{"line":661,"column":66}},"295":{"start":{"line":667,"column":16},"end":{"line":671,"column":17}},"296":{"start":{"line":668,"column":20},"end":{"line":668,"column":54}},"297":{"start":{"line":669,"column":20},"end":{"line":669,"column":72}},"298":{"start":{"line":670,"column":20},"end":{"line":670,"column":85}},"299":{"start":{"line":674,"column":12},"end":{"line":674,"column":34}},"300":{"start":{"line":682,"column":12},"end":{"line":688,"column":13}},"301":{"start":{"line":683,"column":16},"end":{"line":683,"column":52}},"302":{"start":{"line":684,"column":16},"end":{"line":684,"column":43}},"303":{"start":{"line":685,"column":16},"end":{"line":687,"column":17}},"304":{"start":{"line":686,"column":20},"end":{"line":686,"column":64}},"305":{"start":{"line":693,"column":12},"end":{"line":693,"column":50}},"306":{"start":{"line":694,"column":12},"end":{"line":696,"column":13}},"307":{"start":{"line":695,"column":16},"end":{"line":695,"column":42}},"308":{"start":{"line":701,"column":12},"end":{"line":701,"column":50}},"309":{"start":{"line":702,"column":12},"end":{"line":704,"column":13}},"310":{"start":{"line":703,"column":16},"end":{"line":703,"column":42}},"311":{"start":{"line":705,"column":12},"end":{"line":707,"column":13}},"312":{"start":{"line":706,"column":16},"end":{"line":706,"column":35}},"313":{"start":{"line":717,"column":12},"end":{"line":717,"column":83}},"314":{"start":{"line":738,"column":12},"end":{"line":741,"column":23}},"315":{"start":{"line":742,"column":12},"end":{"line":742,"column":28}},"316":{"start":{"line":744,"column":12},"end":{"line":767,"column":13}},"317":{"start":{"line":746,"column":16},"end":{"line":751,"column":17}},"318":{"start":{"line":747,"column":20},"end":{"line":749,"column":21}},"319":{"start":{"line":748,"column":24},"end":{"line":748,"column":59}},"320":{"start":{"line":750,"column":20},"end":{"line":750,"column":37}},"321":{"start":{"line":752,"column":16},"end":{"line":752,"column":59}},"322":{"start":{"line":754,"column":16},"end":{"line":758,"column":17}},"323":{"start":{"line":755,"column":20},"end":{"line":757,"column":21}},"324":{"start":{"line":756,"column":24},"end":{"line":756,"column":46}},"325":{"start":{"line":760,"column":16},"end":{"line":760,"column":29}},"326":{"start":{"line":762,"column":16},"end":{"line":762,"column":34}},"327":{"start":{"line":763,"column":16},"end":{"line":763,"column":47}},"328":{"start":{"line":765,"column":16},"end":{"line":765,"column":61}},"329":{"start":{"line":766,"column":16},"end":{"line":766,"column":64}},"330":{"start":{"line":769,"column":12},"end":{"line":773,"column":13}},"331":{"start":{"line":770,"column":16},"end":{"line":772,"column":17}},"332":{"start":{"line":771,"column":20},"end":{"line":771,"column":55}},"333":{"start":{"line":775,"column":12},"end":{"line":775,"column":27}},"334":{"start":{"line":776,"column":12},"end":{"line":778,"column":13}},"335":{"start":{"line":777,"column":16},"end":{"line":777,"column":35}},"336":{"start":{"line":779,"column":12},"end":{"line":779,"column":35}},"337":{"start":{"line":781,"column":12},"end":{"line":783,"column":13}},"338":{"start":{"line":782,"column":16},"end":{"line":782,"column":69}},"339":{"start":{"line":785,"column":12},"end":{"line":785,"column":30}},"340":{"start":{"line":798,"column":8},"end":{"line":799,"column":28}},"341":{"start":{"line":802,"column":8},"end":{"line":814,"column":9}},"342":{"start":{"line":803,"column":12},"end":{"line":803,"column":31}},"343":{"start":{"line":804,"column":12},"end":{"line":806,"column":13}},"344":{"start":{"line":805,"column":16},"end":{"line":805,"column":25}},"345":{"start":{"line":807,"column":12},"end":{"line":807,"column":38}},"346":{"start":{"line":808,"column":12},"end":{"line":808,"column":49}},"347":{"start":{"line":809,"column":12},"end":{"line":813,"column":13}},"348":{"start":{"line":810,"column":16},"end":{"line":810,"column":63}},"349":{"start":{"line":812,"column":16},"end":{"line":812,"column":48}},"350":{"start":{"line":816,"column":8},"end":{"line":835,"column":9}},"351":{"start":{"line":817,"column":12},"end":{"line":817,"column":32}},"352":{"start":{"line":818,"column":12},"end":{"line":820,"column":13}},"353":{"start":{"line":819,"column":16},"end":{"line":819,"column":25}},"354":{"start":{"line":821,"column":12},"end":{"line":821,"column":49}},"355":{"start":{"line":822,"column":12},"end":{"line":833,"column":15}},"356":{"start":{"line":826,"column":20},"end":{"line":828,"column":21}},"357":{"start":{"line":827,"column":24},"end":{"line":827,"column":31}},"358":{"start":{"line":830,"column":20},"end":{"line":830,"column":56}},"359":{"start":{"line":831,"column":20},"end":{"line":831,"column":39}},"360":{"start":{"line":834,"column":12},"end":{"line":834,"column":64}},"361":{"start":{"line":843,"column":8},"end":{"line":844,"column":45}},"362":{"start":{"line":845,"column":8},"end":{"line":855,"column":9}},"363":{"start":{"line":846,"column":12},"end":{"line":854,"column":13}},"364":{"start":{"line":847,"column":16},"end":{"line":853,"column":17}},"365":{"start":{"line":848,"column":20},"end":{"line":849,"column":40}},"366":{"start":{"line":850,"column":20},"end":{"line":852,"column":61}},"367":{"start":{"line":856,"column":8},"end":{"line":861,"column":9}},"368":{"start":{"line":857,"column":12},"end":{"line":857,"column":32}},"369":{"start":{"line":858,"column":12},"end":{"line":858,"column":42}},"370":{"start":{"line":859,"column":12},"end":{"line":859,"column":58}},"371":{"start":{"line":860,"column":12},"end":{"line":860,"column":55}},"372":{"start":{"line":862,"column":8},"end":{"line":862,"column":20}},"373":{"start":{"line":870,"column":8},"end":{"line":870,"column":54}},"374":{"start":{"line":877,"column":8},"end":{"line":879,"column":19}},"375":{"start":{"line":881,"column":8},"end":{"line":881,"column":24}},"376":{"start":{"line":882,"column":8},"end":{"line":884,"column":9}},"377":{"start":{"line":883,"column":12},"end":{"line":883,"column":38}},"378":{"start":{"line":885,"column":8},"end":{"line":887,"column":9}},"379":{"start":{"line":886,"column":12},"end":{"line":886,"column":57}},"380":{"start":{"line":888,"column":8},"end":{"line":888,"column":36}},"381":{"start":{"line":896,"column":8},"end":{"line":896,"column":27}},"382":{"start":{"line":897,"column":8},"end":{"line":899,"column":9}},"383":{"start":{"line":898,"column":12},"end":{"line":898,"column":25}},"384":{"start":{"line":908,"column":8},"end":{"line":916,"column":11}},"385":{"start":{"line":910,"column":12},"end":{"line":914,"column":13}},"386":{"start":{"line":911,"column":16},"end":{"line":911,"column":46}},"387":{"start":{"line":913,"column":16},"end":{"line":913,"column":43}},"388":{"start":{"line":915,"column":12},"end":{"line":915,"column":39}},"389":{"start":{"line":921,"column":0},"end":{"line":921,"column":59}},"390":{"start":{"line":930,"column":0},"end":{"line":944,"column":2}},"391":{"start":{"line":931,"column":4},"end":{"line":932,"column":77}},"392":{"start":{"line":933,"column":4},"end":{"line":937,"column":5}},"393":{"start":{"line":934,"column":8},"end":{"line":936,"column":9}},"394":{"start":{"line":935,"column":12},"end":{"line":935,"column":24}},"395":{"start":{"line":938,"column":4},"end":{"line":942,"column":5}},"396":{"start":{"line":939,"column":8},"end":{"line":941,"column":9}},"397":{"start":{"line":940,"column":12},"end":{"line":940,"column":24}},"398":{"start":{"line":943,"column":4},"end":{"line":943,"column":26}}},"branchMap":{"1":{"line":25,"type":"cond-expr","locations":[{"start":{"line":26,"column":12},"end":{"line":26,"column":22}},{"start":{"line":26,"column":25},"end":{"line":26,"column":38}}]},"2":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":18},"end":{"line":25,"column":29}},{"start":{"line":25,"column":33},"end":{"line":25,"column":71}}]},"3":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"4":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":19},"end":{"line":28,"column":46}},{"start":{"line":28,"column":50},"end":{"line":28,"column":67}}]},"5":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":11},"end":{"line":29,"column":11}},{"start":{"line":29,"column":11},"end":{"line":29,"column":11}}]},"6":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},{"start":{"line":38,"column":4},"end":{"line":38,"column":4}}]},"7":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":56,"column":4}},{"start":{"line":56,"column":4},"end":{"line":56,"column":4}}]},"8":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":4},"end":{"line":57,"column":4}},{"start":{"line":57,"column":4},"end":{"line":57,"column":4}}]},"9":{"line":58,"type":"if","locations":[{"start":{"line":58,"column":4},"end":{"line":58,"column":4}},{"start":{"line":58,"column":4},"end":{"line":58,"column":4}}]},"10":{"line":58,"type":"binary-expr","locations":[{"start":{"line":58,"column":8},"end":{"line":58,"column":19}},{"start":{"line":58,"column":23},"end":{"line":58,"column":59}}]},"11":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":4},"end":{"line":66,"column":4}},{"start":{"line":66,"column":4},"end":{"line":66,"column":4}}]},"12":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":4},"end":{"line":81,"column":4}},{"start":{"line":81,"column":4},"end":{"line":81,"column":4}}]},"13":{"line":100,"type":"if","locations":[{"start":{"line":100,"column":8},"end":{"line":100,"column":8}},{"start":{"line":100,"column":8},"end":{"line":100,"column":8}}]},"14":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":21},"end":{"line":111,"column":28}},{"start":{"line":111,"column":32},"end":{"line":111,"column":34}}]},"15":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":12},"end":{"line":112,"column":12}},{"start":{"line":112,"column":12},"end":{"line":112,"column":12}}]},"16":{"line":121,"type":"binary-expr","locations":[{"start":{"line":121,"column":21},"end":{"line":121,"column":33}},{"start":{"line":121,"column":37},"end":{"line":121,"column":39}}]},"17":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":12},"end":{"line":122,"column":12}},{"start":{"line":122,"column":12},"end":{"line":122,"column":12}}]},"18":{"line":131,"type":"binary-expr","locations":[{"start":{"line":131,"column":21},"end":{"line":131,"column":32}},{"start":{"line":131,"column":36},"end":{"line":131,"column":38}}]},"19":{"line":132,"type":"if","locations":[{"start":{"line":132,"column":12},"end":{"line":132,"column":12}},{"start":{"line":132,"column":12},"end":{"line":132,"column":12}}]},"20":{"line":140,"type":"binary-expr","locations":[{"start":{"line":140,"column":9},"end":{"line":140,"column":19}},{"start":{"line":140,"column":23},"end":{"line":140,"column":25}}]},"21":{"line":148,"type":"if","locations":[{"start":{"line":148,"column":12},"end":{"line":148,"column":12}},{"start":{"line":148,"column":12},"end":{"line":148,"column":12}}]},"22":{"line":150,"type":"if","locations":[{"start":{"line":150,"column":16},"end":{"line":150,"column":16}},{"start":{"line":150,"column":16},"end":{"line":150,"column":16}}]},"23":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":23},"end":{"line":153,"column":23}},{"start":{"line":153,"column":23},"end":{"line":153,"column":23}}]},"24":{"line":153,"type":"binary-expr","locations":[{"start":{"line":153,"column":27},"end":{"line":153,"column":46}},{"start":{"line":153,"column":50},"end":{"line":153,"column":69}}]},"25":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":23},"end":{"line":155,"column":23}},{"start":{"line":155,"column":23},"end":{"line":155,"column":23}}]},"26":{"line":167,"type":"binary-expr","locations":[{"start":{"line":167,"column":21},"end":{"line":167,"column":34}},{"start":{"line":167,"column":38},"end":{"line":167,"column":40}}]},"27":{"line":169,"type":"if","locations":[{"start":{"line":169,"column":12},"end":{"line":169,"column":12}},{"start":{"line":169,"column":12},"end":{"line":169,"column":12}}]},"28":{"line":171,"type":"switch","locations":[{"start":{"line":172,"column":12},"end":{"line":175,"column":22}},{"start":{"line":176,"column":12},"end":{"line":179,"column":22}},{"start":{"line":180,"column":12},"end":{"line":195,"column":17}}]},"29":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":16},"end":{"line":181,"column":16}},{"start":{"line":181,"column":16},"end":{"line":181,"column":16}}]},"30":{"line":184,"type":"switch","locations":[{"start":{"line":185,"column":24},"end":{"line":186,"column":40}},{"start":{"line":187,"column":24},"end":{"line":188,"column":46}},{"start":{"line":189,"column":24},"end":{"line":190,"column":72}}]},"31":{"line":202,"type":"if","locations":[{"start":{"line":202,"column":12},"end":{"line":202,"column":12}},{"start":{"line":202,"column":12},"end":{"line":202,"column":12}}]},"32":{"line":206,"type":"if","locations":[{"start":{"line":206,"column":12},"end":{"line":206,"column":12}},{"start":{"line":206,"column":12},"end":{"line":206,"column":12}}]},"33":{"line":207,"type":"binary-expr","locations":[{"start":{"line":207,"column":16},"end":{"line":207,"column":39}},{"start":{"line":207,"column":44},"end":{"line":207,"column":51}}]},"34":{"line":209,"type":"binary-expr","locations":[{"start":{"line":209,"column":20},"end":{"line":209,"column":24}},{"start":{"line":209,"column":28},"end":{"line":209,"column":61}}]},"35":{"line":225,"type":"binary-expr","locations":[{"start":{"line":225,"column":17},"end":{"line":225,"column":32}},{"start":{"line":225,"column":36},"end":{"line":225,"column":38}}]},"36":{"line":228,"type":"binary-expr","locations":[{"start":{"line":228,"column":17},"end":{"line":228,"column":29}},{"start":{"line":228,"column":33},"end":{"line":228,"column":35}}]},"37":{"line":233,"type":"if","locations":[{"start":{"line":233,"column":8},"end":{"line":233,"column":8}},{"start":{"line":233,"column":8},"end":{"line":233,"column":8}}]},"38":{"line":233,"type":"binary-expr","locations":[{"start":{"line":233,"column":12},"end":{"line":233,"column":15}},{"start":{"line":233,"column":19},"end":{"line":233,"column":27}}]},"39":{"line":236,"type":"if","locations":[{"start":{"line":236,"column":8},"end":{"line":236,"column":8}},{"start":{"line":236,"column":8},"end":{"line":236,"column":8}}]},"40":{"line":236,"type":"binary-expr","locations":[{"start":{"line":236,"column":12},"end":{"line":236,"column":15}},{"start":{"line":236,"column":19},"end":{"line":236,"column":47}}]},"41":{"line":249,"type":"binary-expr","locations":[{"start":{"line":249,"column":12},"end":{"line":249,"column":52}},{"start":{"line":249,"column":57},"end":{"line":249,"column":74}}]},"42":{"line":251,"type":"if","locations":[{"start":{"line":251,"column":12},"end":{"line":251,"column":12}},{"start":{"line":251,"column":12},"end":{"line":251,"column":12}}]},"43":{"line":253,"type":"if","locations":[{"start":{"line":253,"column":19},"end":{"line":253,"column":19}},{"start":{"line":253,"column":19},"end":{"line":253,"column":19}}]},"44":{"line":282,"type":"binary-expr","locations":[{"start":{"line":282,"column":4},"end":{"line":282,"column":8}},{"start":{"line":282,"column":13},"end":{"line":282,"column":38}}]},"45":{"line":296,"type":"if","locations":[{"start":{"line":296,"column":4},"end":{"line":296,"column":4}},{"start":{"line":296,"column":4},"end":{"line":296,"column":4}}]},"46":{"line":300,"type":"binary-expr","locations":[{"start":{"line":300,"column":11},"end":{"line":300,"column":22}},{"start":{"line":300,"column":26},"end":{"line":300,"column":48}}]},"47":{"line":312,"type":"binary-expr","locations":[{"start":{"line":312,"column":11},"end":{"line":312,"column":15}},{"start":{"line":312,"column":21},"end":{"line":312,"column":33}},{"start":{"line":313,"column":9},"end":{"line":313,"column":16}},{"start":{"line":313,"column":20},"end":{"line":313,"column":37}},{"start":{"line":314,"column":9},"end":{"line":314,"column":14}},{"start":{"line":314,"column":18},"end":{"line":314,"column":33}},{"start":{"line":315,"column":9},"end":{"line":315,"column":16}},{"start":{"line":315,"column":20},"end":{"line":315,"column":37}}]},"48":{"line":340,"type":"binary-expr","locations":[{"start":{"line":340,"column":30},"end":{"line":340,"column":43}},{"start":{"line":340,"column":47},"end":{"line":340,"column":49}}]},"49":{"line":352,"type":"binary-expr","locations":[{"start":{"line":352,"column":45},"end":{"line":352,"column":47}},{"start":{"line":352,"column":51},"end":{"line":352,"column":59}},{"start":{"line":352,"column":64},"end":{"line":352,"column":66}},{"start":{"line":352,"column":70},"end":{"line":352,"column":84}}]},"50":{"line":353,"type":"if","locations":[{"start":{"line":353,"column":12},"end":{"line":353,"column":12}},{"start":{"line":353,"column":12},"end":{"line":353,"column":12}}]},"51":{"line":355,"type":"if","locations":[{"start":{"line":355,"column":19},"end":{"line":355,"column":19}},{"start":{"line":355,"column":19},"end":{"line":355,"column":19}}]},"52":{"line":355,"type":"binary-expr","locations":[{"start":{"line":355,"column":23},"end":{"line":355,"column":27}},{"start":{"line":355,"column":31},"end":{"line":355,"column":64}}]},"53":{"line":361,"type":"if","locations":[{"start":{"line":361,"column":8},"end":{"line":361,"column":8}},{"start":{"line":361,"column":8},"end":{"line":361,"column":8}}]},"54":{"line":364,"type":"if","locations":[{"start":{"line":364,"column":8},"end":{"line":364,"column":8}},{"start":{"line":364,"column":8},"end":{"line":364,"column":8}}]},"55":{"line":367,"type":"if","locations":[{"start":{"line":367,"column":8},"end":{"line":367,"column":8}},{"start":{"line":367,"column":8},"end":{"line":367,"column":8}}]},"56":{"line":370,"type":"if","locations":[{"start":{"line":370,"column":8},"end":{"line":370,"column":8}},{"start":{"line":370,"column":8},"end":{"line":370,"column":8}}]},"57":{"line":374,"type":"binary-expr","locations":[{"start":{"line":374,"column":8},"end":{"line":374,"column":17}},{"start":{"line":374,"column":21},"end":{"line":374,"column":47}}]},"58":{"line":378,"type":"if","locations":[{"start":{"line":378,"column":12},"end":{"line":378,"column":12}},{"start":{"line":378,"column":12},"end":{"line":378,"column":12}}]},"59":{"line":379,"type":"if","locations":[{"start":{"line":379,"column":16},"end":{"line":379,"column":16}},{"start":{"line":379,"column":16},"end":{"line":379,"column":16}}]},"60":{"line":386,"type":"if","locations":[{"start":{"line":386,"column":16},"end":{"line":386,"column":16}},{"start":{"line":386,"column":16},"end":{"line":386,"column":16}}]},"61":{"line":387,"type":"binary-expr","locations":[{"start":{"line":387,"column":20},"end":{"line":387,"column":31}},{"start":{"line":387,"column":36},"end":{"line":387,"column":74}}]},"62":{"line":393,"type":"cond-expr","locations":[{"start":{"line":393,"column":62},"end":{"line":393,"column":67}},{"start":{"line":393,"column":70},"end":{"line":393,"column":91}}]},"63":{"line":399,"type":"if","locations":[{"start":{"line":399,"column":19},"end":{"line":399,"column":19}},{"start":{"line":399,"column":19},"end":{"line":399,"column":19}}]},"64":{"line":422,"type":"if","locations":[{"start":{"line":422,"column":8},"end":{"line":422,"column":8}},{"start":{"line":422,"column":8},"end":{"line":422,"column":8}}]},"65":{"line":427,"type":"if","locations":[{"start":{"line":427,"column":16},"end":{"line":427,"column":16}},{"start":{"line":427,"column":16},"end":{"line":427,"column":16}}]},"66":{"line":427,"type":"binary-expr","locations":[{"start":{"line":427,"column":20},"end":{"line":427,"column":22}},{"start":{"line":427,"column":26},"end":{"line":427,"column":35}},{"start":{"line":427,"column":39},"end":{"line":427,"column":48}}]},"67":{"line":428,"type":"if","locations":[{"start":{"line":428,"column":16},"end":{"line":428,"column":16}},{"start":{"line":428,"column":16},"end":{"line":428,"column":16}}]},"68":{"line":428,"type":"binary-expr","locations":[{"start":{"line":428,"column":20},"end":{"line":428,"column":31}},{"start":{"line":428,"column":35},"end":{"line":428,"column":47}}]},"69":{"line":429,"type":"if","locations":[{"start":{"line":429,"column":16},"end":{"line":429,"column":16}},{"start":{"line":429,"column":16},"end":{"line":429,"column":16}}]},"70":{"line":429,"type":"binary-expr","locations":[{"start":{"line":429,"column":20},"end":{"line":429,"column":25}},{"start":{"line":429,"column":29},"end":{"line":429,"column":41}}]},"71":{"line":454,"type":"if","locations":[{"start":{"line":454,"column":12},"end":{"line":454,"column":12}},{"start":{"line":454,"column":12},"end":{"line":454,"column":12}}]},"72":{"line":456,"type":"cond-expr","locations":[{"start":{"line":457,"column":20},"end":{"line":457,"column":45}},{"start":{"line":457,"column":48},"end":{"line":457,"column":59}}]},"73":{"line":456,"type":"binary-expr","locations":[{"start":{"line":456,"column":28},"end":{"line":456,"column":31}},{"start":{"line":456,"column":35},"end":{"line":456,"column":43}}]},"74":{"line":468,"type":"binary-expr","locations":[{"start":{"line":468,"column":48},"end":{"line":468,"column":60}},{"start":{"line":468,"column":64},"end":{"line":468,"column":66}}]},"75":{"line":469,"type":"if","locations":[{"start":{"line":469,"column":8},"end":{"line":469,"column":8}},{"start":{"line":469,"column":8},"end":{"line":469,"column":8}}]},"76":{"line":503,"type":"if","locations":[{"start":{"line":503,"column":8},"end":{"line":503,"column":8}},{"start":{"line":503,"column":8},"end":{"line":503,"column":8}}]},"77":{"line":506,"type":"if","locations":[{"start":{"line":506,"column":8},"end":{"line":506,"column":8}},{"start":{"line":506,"column":8},"end":{"line":506,"column":8}}]},"78":{"line":506,"type":"binary-expr","locations":[{"start":{"line":506,"column":12},"end":{"line":506,"column":16}},{"start":{"line":506,"column":20},"end":{"line":506,"column":32}},{"start":{"line":506,"column":36},"end":{"line":506,"column":47}}]},"79":{"line":507,"type":"binary-expr","locations":[{"start":{"line":507,"column":35},"end":{"line":507,"column":39}},{"start":{"line":507,"column":43},"end":{"line":507,"column":45}}]},"80":{"line":509,"type":"if","locations":[{"start":{"line":509,"column":16},"end":{"line":509,"column":16}},{"start":{"line":509,"column":16},"end":{"line":509,"column":16}}]},"81":{"line":510,"type":"binary-expr","locations":[{"start":{"line":510,"column":28},"end":{"line":510,"column":33}},{"start":{"line":510,"column":37},"end":{"line":510,"column":48}}]},"82":{"line":542,"type":"if","locations":[{"start":{"line":542,"column":8},"end":{"line":542,"column":8}},{"start":{"line":542,"column":8},"end":{"line":542,"column":8}}]},"83":{"line":545,"type":"if","locations":[{"start":{"line":545,"column":8},"end":{"line":545,"column":8}},{"start":{"line":545,"column":8},"end":{"line":545,"column":8}}]},"84":{"line":545,"type":"binary-expr","locations":[{"start":{"line":545,"column":12},"end":{"line":545,"column":22}},{"start":{"line":545,"column":26},"end":{"line":545,"column":46}},{"start":{"line":545,"column":50},"end":{"line":545,"column":92}}]},"85":{"line":555,"type":"if","locations":[{"start":{"line":555,"column":8},"end":{"line":555,"column":8}},{"start":{"line":555,"column":8},"end":{"line":555,"column":8}}]},"86":{"line":556,"type":"if","locations":[{"start":{"line":556,"column":8},"end":{"line":556,"column":8}},{"start":{"line":556,"column":8},"end":{"line":556,"column":8}}]},"87":{"line":558,"type":"if","locations":[{"start":{"line":558,"column":8},"end":{"line":558,"column":8}},{"start":{"line":558,"column":8},"end":{"line":558,"column":8}}]},"88":{"line":559,"type":"if","locations":[{"start":{"line":559,"column":8},"end":{"line":559,"column":8}},{"start":{"line":559,"column":8},"end":{"line":559,"column":8}}]},"89":{"line":575,"type":"if","locations":[{"start":{"line":575,"column":8},"end":{"line":575,"column":8}},{"start":{"line":575,"column":8},"end":{"line":575,"column":8}}]},"90":{"line":579,"type":"if","locations":[{"start":{"line":579,"column":12},"end":{"line":579,"column":12}},{"start":{"line":579,"column":12},"end":{"line":579,"column":12}}]},"91":{"line":579,"type":"binary-expr","locations":[{"start":{"line":579,"column":16},"end":{"line":579,"column":28}},{"start":{"line":579,"column":32},"end":{"line":579,"column":42}}]},"92":{"line":582,"type":"if","locations":[{"start":{"line":582,"column":12},"end":{"line":582,"column":12}},{"start":{"line":582,"column":12},"end":{"line":582,"column":12}}]},"93":{"line":593,"type":"if","locations":[{"start":{"line":593,"column":12},"end":{"line":593,"column":12}},{"start":{"line":593,"column":12},"end":{"line":593,"column":12}}]},"94":{"line":594,"type":"cond-expr","locations":[{"start":{"line":594,"column":41},"end":{"line":594,"column":64}},{"start":{"line":594,"column":67},"end":{"line":594,"column":81}}]},"95":{"line":617,"type":"if","locations":[{"start":{"line":617,"column":12},"end":{"line":617,"column":12}},{"start":{"line":617,"column":12},"end":{"line":617,"column":12}}]},"96":{"line":621,"type":"if","locations":[{"start":{"line":621,"column":12},"end":{"line":621,"column":12}},{"start":{"line":621,"column":12},"end":{"line":621,"column":12}}]},"97":{"line":621,"type":"binary-expr","locations":[{"start":{"line":621,"column":16},"end":{"line":621,"column":30}},{"start":{"line":621,"column":34},"end":{"line":621,"column":40}}]},"98":{"line":634,"type":"if","locations":[{"start":{"line":634,"column":12},"end":{"line":634,"column":12}},{"start":{"line":634,"column":12},"end":{"line":634,"column":12}}]},"99":{"line":644,"type":"if","locations":[{"start":{"line":644,"column":12},"end":{"line":644,"column":12}},{"start":{"line":644,"column":12},"end":{"line":644,"column":12}}]},"100":{"line":649,"type":"if","locations":[{"start":{"line":649,"column":16},"end":{"line":649,"column":16}},{"start":{"line":649,"column":16},"end":{"line":649,"column":16}}]},"101":{"line":650,"type":"cond-expr","locations":[{"start":{"line":650,"column":55},"end":{"line":650,"column":77}},{"start":{"line":650,"column":80},"end":{"line":650,"column":82}}]},"102":{"line":655,"type":"if","locations":[{"start":{"line":655,"column":16},"end":{"line":655,"column":16}},{"start":{"line":655,"column":16},"end":{"line":655,"column":16}}]},"103":{"line":660,"type":"if","locations":[{"start":{"line":660,"column":28},"end":{"line":660,"column":28}},{"start":{"line":660,"column":28},"end":{"line":660,"column":28}}]},"104":{"line":667,"type":"if","locations":[{"start":{"line":667,"column":16},"end":{"line":667,"column":16}},{"start":{"line":667,"column":16},"end":{"line":667,"column":16}}]},"105":{"line":669,"type":"binary-expr","locations":[{"start":{"line":669,"column":20},"end":{"line":669,"column":24}},{"start":{"line":669,"column":28},"end":{"line":669,"column":71}}]},"106":{"line":682,"type":"if","locations":[{"start":{"line":682,"column":12},"end":{"line":682,"column":12}},{"start":{"line":682,"column":12},"end":{"line":682,"column":12}}]},"107":{"line":685,"type":"if","locations":[{"start":{"line":685,"column":16},"end":{"line":685,"column":16}},{"start":{"line":685,"column":16},"end":{"line":685,"column":16}}]},"108":{"line":694,"type":"if","locations":[{"start":{"line":694,"column":12},"end":{"line":694,"column":12}},{"start":{"line":694,"column":12},"end":{"line":694,"column":12}}]},"109":{"line":702,"type":"if","locations":[{"start":{"line":702,"column":12},"end":{"line":702,"column":12}},{"start":{"line":702,"column":12},"end":{"line":702,"column":12}}]},"110":{"line":705,"type":"if","locations":[{"start":{"line":705,"column":12},"end":{"line":705,"column":12}},{"start":{"line":705,"column":12},"end":{"line":705,"column":12}}]},"111":{"line":717,"type":"binary-expr","locations":[{"start":{"line":717,"column":64},"end":{"line":717,"column":68}},{"start":{"line":717,"column":72},"end":{"line":717,"column":80}}]},"112":{"line":744,"type":"if","locations":[{"start":{"line":744,"column":12},"end":{"line":744,"column":12}},{"start":{"line":744,"column":12},"end":{"line":744,"column":12}}]},"113":{"line":746,"type":"if","locations":[{"start":{"line":746,"column":16},"end":{"line":746,"column":16}},{"start":{"line":746,"column":16},"end":{"line":746,"column":16}}]},"114":{"line":752,"type":"binary-expr","locations":[{"start":{"line":752,"column":16},"end":{"line":752,"column":28}},{"start":{"line":752,"column":33},"end":{"line":752,"column":57}}]},"115":{"line":755,"type":"if","locations":[{"start":{"line":755,"column":20},"end":{"line":755,"column":20}},{"start":{"line":755,"column":20},"end":{"line":755,"column":20}}]},"116":{"line":755,"type":"binary-expr","locations":[{"start":{"line":755,"column":24},"end":{"line":755,"column":48}},{"start":{"line":755,"column":52},"end":{"line":755,"column":73}}]},"117":{"line":765,"type":"binary-expr","locations":[{"start":{"line":765,"column":16},"end":{"line":765,"column":28}},{"start":{"line":765,"column":33},"end":{"line":765,"column":59}}]},"118":{"line":766,"type":"binary-expr","locations":[{"start":{"line":766,"column":16},"end":{"line":766,"column":29}},{"start":{"line":766,"column":34},"end":{"line":766,"column":62}}]},"119":{"line":769,"type":"if","locations":[{"start":{"line":769,"column":12},"end":{"line":769,"column":12}},{"start":{"line":769,"column":12},"end":{"line":769,"column":12}}]},"120":{"line":802,"type":"binary-expr","locations":[{"start":{"line":802,"column":24},"end":{"line":802,"column":45}},{"start":{"line":802,"column":49},"end":{"line":802,"column":69}}]},"121":{"line":804,"type":"if","locations":[{"start":{"line":804,"column":12},"end":{"line":804,"column":12}},{"start":{"line":804,"column":12},"end":{"line":804,"column":12}}]},"122":{"line":807,"type":"binary-expr","locations":[{"start":{"line":807,"column":12},"end":{"line":807,"column":19}},{"start":{"line":807,"column":24},"end":{"line":807,"column":36}}]},"123":{"line":809,"type":"if","locations":[{"start":{"line":809,"column":12},"end":{"line":809,"column":12}},{"start":{"line":809,"column":12},"end":{"line":809,"column":12}}]},"124":{"line":818,"type":"if","locations":[{"start":{"line":818,"column":12},"end":{"line":818,"column":12}},{"start":{"line":818,"column":12},"end":{"line":818,"column":12}}]},"125":{"line":826,"type":"if","locations":[{"start":{"line":826,"column":20},"end":{"line":826,"column":20}},{"start":{"line":826,"column":20},"end":{"line":826,"column":20}}]},"126":{"line":846,"type":"if","locations":[{"start":{"line":846,"column":12},"end":{"line":846,"column":12}},{"start":{"line":846,"column":12},"end":{"line":846,"column":12}}]},"127":{"line":847,"type":"if","locations":[{"start":{"line":847,"column":16},"end":{"line":847,"column":16}},{"start":{"line":847,"column":16},"end":{"line":847,"column":16}}]},"128":{"line":847,"type":"binary-expr","locations":[{"start":{"line":847,"column":20},"end":{"line":847,"column":50}},{"start":{"line":847,"column":54},"end":{"line":847,"column":77}}]},"129":{"line":850,"type":"cond-expr","locations":[{"start":{"line":851,"column":20},"end":{"line":851,"column":66}},{"start":{"line":852,"column":29},"end":{"line":852,"column":59}}]},"130":{"line":850,"type":"binary-expr","locations":[{"start":{"line":850,"column":32},"end":{"line":850,"column":35}},{"start":{"line":850,"column":39},"end":{"line":850,"column":47}}]},"131":{"line":851,"type":"binary-expr","locations":[{"start":{"line":851,"column":21},"end":{"line":851,"column":31}},{"start":{"line":851,"column":35},"end":{"line":851,"column":47}},{"start":{"line":851,"column":52},"end":{"line":851,"column":66}}]},"132":{"line":852,"type":"cond-expr","locations":[{"start":{"line":852,"column":46},"end":{"line":852,"column":53}},{"start":{"line":852,"column":56},"end":{"line":852,"column":59}}]},"133":{"line":852,"type":"binary-expr","locations":[{"start":{"line":852,"column":29},"end":{"line":852,"column":32}},{"start":{"line":852,"column":36},"end":{"line":852,"column":43}}]},"134":{"line":856,"type":"if","locations":[{"start":{"line":856,"column":8},"end":{"line":856,"column":8}},{"start":{"line":856,"column":8},"end":{"line":856,"column":8}}]},"135":{"line":859,"type":"binary-expr","locations":[{"start":{"line":859,"column":12},"end":{"line":859,"column":24}},{"start":{"line":859,"column":29},"end":{"line":859,"column":56}}]},"136":{"line":860,"type":"binary-expr","locations":[{"start":{"line":860,"column":12},"end":{"line":860,"column":23}},{"start":{"line":860,"column":28},"end":{"line":860,"column":53}}]},"137":{"line":882,"type":"binary-expr","locations":[{"start":{"line":882,"column":16},"end":{"line":882,"column":34}},{"start":{"line":882,"column":39},"end":{"line":882,"column":53}}]},"138":{"line":897,"type":"if","locations":[{"start":{"line":897,"column":8},"end":{"line":897,"column":8}},{"start":{"line":897,"column":8},"end":{"line":897,"column":8}}]},"139":{"line":897,"type":"binary-expr","locations":[{"start":{"line":897,"column":12},"end":{"line":897,"column":21}},{"start":{"line":897,"column":26},"end":{"line":897,"column":40}},{"start":{"line":897,"column":44},"end":{"line":897,"column":49}}]},"140":{"line":910,"type":"if","locations":[{"start":{"line":910,"column":12},"end":{"line":910,"column":12}},{"start":{"line":910,"column":12},"end":{"line":910,"column":12}}]},"141":{"line":932,"type":"binary-expr","locations":[{"start":{"line":932,"column":29},"end":{"line":932,"column":43}},{"start":{"line":932,"column":45},"end":{"line":932,"column":49}}]},"142":{"line":932,"type":"binary-expr","locations":[{"start":{"line":932,"column":54},"end":{"line":932,"column":67}},{"start":{"line":932,"column":71},"end":{"line":932,"column":73}}]},"143":{"line":933,"type":"if","locations":[{"start":{"line":933,"column":4},"end":{"line":933,"column":4}},{"start":{"line":933,"column":4},"end":{"line":933,"column":4}}]},"144":{"line":938,"type":"if","locations":[{"start":{"line":938,"column":4},"end":{"line":938,"column":4}},{"start":{"line":938,"column":4},"end":{"line":938,"column":4}}]}},"code":["\"use strict\";","","var Spec = require('./Spec');","var env = require('./env');","","/**"," * Syncable: an oplog-synchronized object"," * @constructor"," */","function Syncable() {","    // listeners represented as objects that have deliver() method","    this._lstn = [',']; // we unshift() uplink listeners and push() downlinks","    // ...so _lstn is like [server1, server2, storage, ',', view, listener]","    // The most correct way to specify a version is the version vector,","    // but that one may consume more space than the data itself in some cases.","    // Hence, _version is not a fully specified version vector (see version()","    // instead). _version is essentially is the greatest operation timestamp","    // (Lamport-like, i.e. \"time+source\"), sometimes amended with additional","    // timestamps. Its main features:","    // (1) changes once the object's state changes","    // (2) does it monotonically (in the alphanum order sense)","    this._version = '';","    // make sense of arguments","    var args = Array.prototype.slice.call(arguments);","    this._host = (args.length && args[args.length - 1]._type === 'Host') ?","            args.pop() : env.localhost;","    if (Spec.is(args[0])) {","        this._id = new Spec(args.shift()).id() || this._host.time();","    } else if (typeof(args[0]) === 'string') {","        this._id = args.shift(); // TODO format","    } else {","        this._id = this._host.time();","        this._version = '!0'; // may apply state in the constructor, see Model","    }","    //var state = args.length ? args.pop() : (fresh?{}:undefined);","    // register with the host","    var doubl = this._host.register(this);","    if (doubl !== this) { return doubl; }","    // locally created objects get state immediately","    // (while external-id objects need to query uplinks)","    /*if (fresh && state) {","     state._version = '!'+this._id;","     var pspec = this.spec().add(state._version).add('.init');","     this.deliver(pspec,state,this._host);","     }*/","    this.reset();","    // find uplinks, subscribe","    this.checkUplink();","    // TODO inplement state push","    return this;","}","module.exports = Syncable;","","Syncable.types = {};","Syncable.isOpSink = function (obj) {","    if (!obj) { return false; }","    if (obj.constructor === Function) { return true; }","    if (obj.deliver && obj.deliver.constructor === Function) { return true; }","    return false;","};","Syncable.reMethodName = /^[a-z][a-z0-9]*([A-Z][a-z0-9]*)*$/;","Syncable.memberClasses = {ops:1,neutrals:1,remotes:1,defaults:1,reactions:1,mixins:1};","Syncable._default = {};","","function fnname(fn) {","    if (fn.name) { return fn.name; }","    return fn.toString().match(/^function\\s*([^\\s(]+)/)[1];","}","","","/**"," * All CRDT model classes must extend syncable directly or indirectly. Syncable"," * provides all the necessary oplog- and state-related primitives and methods."," * Every state-mutating method should be explicitly declared to be wrapped"," * by extend() (see 'ops', 'neutrals', 'remotes' sections in class declaration)."," * @param {function|string} fn"," * @param {{ops:object, neutrals:object, remotes:object}} own"," */","Syncable.extend = function (fn, own) {","    var parent = this, fnid;","    if (fn.constructor !== Function) {","        var id = fn.toString();","        fn = function SomeSyncable() {","            return parent.apply(this, arguments);","        };","        fnid = id; // if only it worked","    } else { // please call Syncable.constructor.apply(this,args) in your constructor","        fnid = fnname(fn);","    }","","    // inheritance trick from backbone.js","    var SyncProto = function () {","        this.constructor = fn;","        this._neutrals = {};","        this._ops = {};","        this._reactions = {};","","        var event,","            name;","        if (parent._pt) {","            //copy _neutrals & _ops from parent","            for (event in parent._pt._neutrals) {","                this._neutrals[event] = parent._pt._neutrals[event];","            }","            for (event in parent._pt._ops) {","                this._ops[event] = parent._pt._ops[event];","            }","        }","","        // \"Methods\" are serialized, logged and delivered to replicas","        for (name in own.ops || {}) {","            if (Syncable.reMethodName.test(name)) {","                this._ops[name] = own.ops[name];","                this[name] = wrapCall(name);","            } else {","                console.warn('invalid op name:',name);","            }","        }","","        // \"Neutrals\" don't change the state","        for (name in own.neutrals || {}) {","            if (Syncable.reMethodName.test(name)) {","                this._neutrals[name] = own.neutrals[name];","                this[name] = wrapCall(name);","            } else {","                console.warn('invalid neutral op name:',name);","            }","        }","","        // \"Remotes\" are serialized and sent upstream (like RPC calls)","        for (name in own.remotes || {}) {","            if (Syncable.reMethodName.test(name)) {","                this[name] = wrapCall(name);","            } else {","                console.warn('invalid rpc name:',name);","            }","        }","","        // add mixins","        (own.mixins || []).forEach(function (mixin) {","            for (var name in mixin) {","                this[name] = mixin[name];","            }","        }, this);","","        // add other members","        for (name in own) {","            if (Syncable.reMethodName.test(name)) {","                var memberType = own[name].constructor;","                if (memberType === Function) { // non-op method","                    // these must change state ONLY by invoking ops","                    this[name] = own[name];","                } else if (memberType===String || memberType===Number) {","                    this[name] = own[name]; // some static constant, OK","                } else if (name in Syncable.memberClasses) {","                    // see above","                    continue;","                } else {","                    console.warn('invalid member:',name,memberType);","                }","            } else {","                console.warn('invalid member name:',name);","            }","        }","","        // add reactions","        for (name in own.reactions || {}) {","            var reaction = own.reactions[name];","            if (!reaction) { continue; }","","            switch (typeof reaction) {","            case 'function':","                // handler-function","                this._reactions[name] = [reaction];","                break;","            case 'string':","                // handler-method name","                this._reactions[name] = [this[name]];","                break;","            default:","                if (reaction.constructor === Array) {","                    // array of handlers","                    this._reactions[name] = reaction.map(function (item) {","                        switch (typeof item) {","                        case 'function':","                            return item;","                        case 'string':","                            return this[item];","                        default:","                            throw new Error('unexpected reaction type');","                        }","                    }, this);","                } else {","                    throw new Error('unexpected reaction type');","                }","            }","        }","","        var syncProto = this;","        this.callReactions = function (spec, value, src) {","            var superReactions = syncProto._super.callReactions;","            if ('function' === typeof superReactions) {","                superReactions.call(this, spec, value, src);","            }","            var r = syncProto._reactions[spec.op()];","            if (r) {","                r.constructor !== Array && (r = [r]);","                for (var i = 0; i < r.length; i++) {","                    r[i] && r[i].call(this, spec, value, src);","                }","            }","        };","","        this._super = parent.prototype;","        this._type = fnid;","    };","","    SyncProto.prototype = parent.prototype;","    fn.prototype = new SyncProto();","    fn._pt = fn.prototype; // just a shortcut","","    // default field values","    var key;","    var defs = fn.defaults = {};","    for (key in (parent.defaults || {})) {","        defs[key] = normalizeDefault(parent.defaults[key]);","    }","    for (key in (own.defaults || {})) {","        defs[key] = normalizeDefault(own.defaults[key]);","    }","","    function normalizeDefault(val) {","        if (val && val.type) {","            return val;","        }","        if (val && val.constructor === Function) {","            return {type: val, value: undefined};","        }","        return {type:null, value: val};","    }","","    // signature normalization for logged/remote/local method calls;","    function wrapCall(name) {","        return function wrapper() {","            // assign a Lamport timestamp","            var spec = this.newEventSpec(name);","            var args = Array.prototype.slice.apply(arguments), lstn;","            // find the callback if any","            Syncable.isOpSink(args[args.length - 1]) && (lstn = args.pop());","            // prettify the rest of the arguments","            if (!args.length) {  // FIXME isn't it confusing?","                args = ''; // used as 'empty'","            } else if (args.length === 1) {","                args = args[0]; // {key:val}","            }","            // TODO log 'initiated'","            return this.deliver(spec, args, lstn);","        };","    }","","    // finishing touches","    fn._super = parent;","    fn.extend = this.extend;","    fn.addReaction = this.addReaction;","    fn.removeReaction = this.removeReaction;","    Syncable.types[fnid] = fn;","    return fn;","};","","/**"," * A *reaction* is a hybrid of a listener and a method. It \"reacts\" on a"," * certain event for all objects of that type. The callback gets invoked"," * as a method, i.e. this===syncableObj. In an event-oriented architecture"," * reactions are rather handy, e.g. for creating mixins."," * @param {string} op operation name"," * @param {function} fn callback"," * @returns {{op:string, fn:function}}"," */","Syncable.addReaction = function (op, fn) {","    var reactions = this.prototype._reactions;","    var list = reactions[op];","    list || (list = reactions[op] = []);","    list.push(fn);","    return {op: op, fn: fn};","};","","/**"," *"," * @param handle"," */","Syncable.removeReaction = function (handle) {","    var op = handle.op,","        fn = handle.fn,","        list = this.prototype._reactions[op],","        i = list.indexOf(fn);","    if (i === -1) {","        throw new Error('reaction unknown');","    }","    list[i] = undefined; // such a peculiar pattern not to mess up out-of-callback removal","    while (list.length && !list[list.length - 1]) {","        list.pop();","    }","};","","/**"," * compare two listeners"," * @param {{deliver:function, _src:*, sink:function}} ln listener from syncable._lstn"," * @param {function|{deliver:function}} other some other listener or function"," * @returns {boolean}"," */","Syncable.listenerEquals = function (ln, other) {","    return !!ln && ((ln === other) ||","        (ln._src && ln._src === other) ||","        (ln.fn && ln.fn === other) ||","        (ln.sink && ln.sink === other));","};","","// Syncable includes all the oplog, change propagation and distributed","// garbage collection logix.","Syncable.extend(Syncable, {  // :P","    /**","     * @returns {Spec} specifier \"/Type#objid\"","     */","    spec: function () { return new Spec('/' + this._type + '#' + this._id); },","","    /**","     * Generates new specifier with unique version","     * @param {string} op operation","     * @returns {Spec}","     */","    newEventSpec: function (op) {","        return this.spec().add(this._host.time(), '!').add(op, '.');","    },","","    /**","     * Returns current object state specifier","     * @returns {string} specifier \"/Type#objid!version+source[!version+source2...]\"","     */","    stateSpec: function () {","        return this.spec() + (this._version || ''); //?","    },","","    /**","     * Applies a serialized operation (or a batch thereof) to this replica","     */","    deliver: function (spec, value, lstn) {","        spec = Spec.as(spec);","        var opver = '!' + spec.version();","        var error;","","        function fail(msg, ex) {","            console.error(msg, spec, value, (ex && ex.stack) || ex || new Error(msg));","            if (typeof(lstn) === 'function') {","                lstn(spec.set('.fail'), msg);","            } else if (lstn && typeof(lstn.error) === 'function') {","                lstn.error(spec, msg);","            } // else { } no callback provided","        }","","        // sanity checks","        if (spec.pattern() !== '/#!.') {","            return fail('malformed spec', spec);","        }","        if (!this._id) {","            return fail('undead object invoked');","        }","        if (error = this.validate(spec, value)) {","            return fail('invalid input, ' + error, value);","        }","        if (!this.acl(spec, value, lstn)) {","            return fail('access violation', spec);","        }","","        env.debug && env.log(spec, value, lstn);","","        try {","            var call = spec.op();","            if (this._ops[call]) {  // FIXME name=>impl table","                if (this.isReplay(spec)) { // it happens","                    console.warn('replay', spec);","                    return;","                }","                // invoke the implementation","                this._ops[call].call(this, spec, value, lstn); // NOTE: no return value","                // once applied, may remember in the log...","                if (spec.op() !== 'init') {","                    this._oplog && (this._oplog[spec.filter('!.')] = value);","                    // this._version is practically a label that lets you know whether","                    // the state has changed. Also, it allows to detect some cases of","                    // concurrent change, as it is always set to the maximum version id","                    // received by this object. Still, only the full version vector may","                    // precisely and uniquely specify the current version (see version()).","                    this._version = (opver > this._version) ? opver : this._version + opver;","                } else {","                    value = this.diff('!0');","                }","                // ...and relay further to downstream replicas and various listeners","                this.emit(spec, value, lstn);","            } else if (this._neutrals[call]) {","                // invoke the implementation","                this._neutrals[call].call(this, spec, value, lstn);","                // and relay to listeners","                this.emit(spec, value, lstn);","            } else {","                this.unimplemented(spec, value, lstn);","            }","        } catch (ex) { // log and rethrow; don't relay further; don't log","            return fail(\"method execution failed\", ex);","        }","","        // to force async signatures we eat the returned value silently","        return spec;","    },","","    /**","     * Notify all the listeners of a state change (i.e. the operation applied).","     */","    emit: function (spec, value, src) {","        var ls = this._lstn,","            op = spec.op(),","            is_neutrals = op in this._neutrals;","        if (ls) {","            var notify = [];","            for (var i = 0; i < ls.length; i++) {","                var l = ls[i];","                // skip empties, deferreds and the source","                if (!l || l === ',' || l === src) { continue; }","                if (is_neutrals && l._op !== op) { continue; }","                if (l._op && l._op !== op) { continue; }","                notify.push(l);","            }","            for (i = 0; i < notify.length; i++) { // screw it I want my 'this'","                try {","                    notify[i].deliver(spec, value, this);","                } catch (ex) {","                    console.error(ex.message, ex.stack);","                }","            }","        }","        this.callReactions(spec, value, src);","    },","","    trigger: function (event, params) {","        var spec = this.newEventSpec(event);","        this.deliver(spec, params);","    },","","    /**","     * Blindly applies a JSON changeset to this model.","     * @param {*} values","     */","    apply: function (values) {","        for (var key in values) {","            if (Syncable.reFieldName.test(key)) { // skip special fields","                var def = this.constructor.defaults[key];","                this[key] = def && def.type ?","                    new def.type(values[key]) : values[key];","            }","        }","    },","","    /**","     * @returns {Spec.Map} the version vector for this object","     */","    version: function () {","        // distillLog() may drop some operations; still, those need to be counted","        // in the version vector; so, their Lamport ids must be saved in this._vector","        var map = new Spec.Map(this._version + (this._vector || ''));","        if (this._oplog) {","            for (var op in this._oplog) {","                map.add(op);","            }","        }","        return map; // TODO return the object, let the consumer trim it to taste","    },","","    /**","     * Produce the entire state or probably the necessary difference","     * to synchronize a replica which is at version *base*.","     * The format of a state/patch object is:","     * {","     *   // A version label, see Syncable(). Presence of the label means","     *   // that this object has a snapshot of the state. No version","     *   // means it is a diff (log tail).","     *   _version: Spec,","     *   // Some parts of the version vector that can not be derived from","     *   // _oplog or _version.","     *   _vector: Spec,","     *   // Some ops that were already applied. See distillLog()","     *   _oplog: { spec: value },","     *   // Pending ops that need to be applied.","     *   _tail: { spec: value }","     * }","     *","     * The state object must survive JSON.parse(JSON.stringify(obj))","     *","     * In many cases, the size of a distilled log is small enough to","     * use it for state transfer (i.e. no snapshots needed).","     */","    diff: function (base) {","        //var vid = new Spec(this._version).get('!'); // first !token","        //var spec = vid + '.patch';","        if (!this._version) { return undefined; }","        this.distillLog(); // TODO optimize?","        var patch, spec;","        if (base && base != '!0' && base != '0') { // FIXME ugly","            var map = new Spec.Map(base || '');","            for (spec in this._oplog) {","                if (!map.covers(new Spec(spec).version())) {","                    patch = patch || {_tail: {}}; // NOTE: no _version","                    patch._tail[spec] = this._oplog[spec];","                }","            }","        } else {","            patch = {_version: '!0', _tail: {}}; // zero state plus the tail","            for (spec in this._oplog) {","                patch._tail[spec] = this._oplog[spec];","            }","        }","        return patch;","    },","","    distillLog: function () {","    },","","    /**","     * The method must decide whether the source of the operation has","     * the rights to perform it. The method may check both the nearest","     * source and the original author of the op.","     * If this method ever mentions 'this', that is a really bad sign.","     * @returns {boolean}","     */","    acl: function (spec, val, src) {","        return true;","    },","","    /**","     * Check operation format/validity (recommendation: don't check against the current state)","     * @returns {string} '' if OK, error message otherwise.","     */","    validate: function (spec, val, src) {","        if (spec.pattern() !== '/#!.') {","            return 'incomplete event spec';","        }","        if (this.clock && spec.type()!=='Host' && !this.clock.checkTimestamp(spec.version())) {","            return 'invalid timestamp '+spec;","        }","    },","","    /**","     * whether this op was already applied in the past","     * @returns {boolean}","     */","    isReplay: function (spec) {","        if (!this._version) { return false; }","        if (spec.op() === 'init') { return false; } // these are .on !vids","        var opver = spec.version();","        if (opver > this._version.substr(1)) { return false; }","        if (spec.filter('!.').toString() in this._oplog) { return true; }// TODO log trimming, vvectors?","        return this.version().covers(opver); // heavyweight","    },","","    /**","     * External objects (those you create by supplying an id) need first to query","     * the uplink for their state. Before the state arrives they are stateless.","     * @return {boolean}","     */","    hasState: function () {","        return !!this._version;","    },","","    getListenerIndex: function (search_for, uplinks_only) {","        var i = this._lstn.indexOf(search_for),","            l;","        if (i > -1) { return i; }","","        for (i = 0, l = this._lstn.length; i < l; i++) {","            var ln = this._lstn[i];","            if (uplinks_only && ln === ',') {","                return -1;","            }","            if (Syncable.listenerEquals(ln, search_for)) {","                return i;","            }","        }","        return -1;","    },","","    reset: function () {","        var defs = this.constructor.defaults;","        for (var name in defs) {","            var def = defs[name];","            if (def.type) {","                this[name] = def.value ? new def.type(def.value) : new def.type();","            } else {","                this[name] = def.value;","            }","        }","    },","","","    neutrals: {","        /**","         * Subscribe to the object's operations;","         * the upstream part of the two-way subscription","         *  on() with a full filter:","         *  @param {Spec} spec /Mouse#Mickey!now.on","         *  @param {Spec|string} filter !since.event","         *  @param {{deliver:function}|function} repl callback","         *  @this {Syncable}","         *","         * TODO: prevent second subscription","         */","        on: function (spec, filter, repl) {   // WELL  on() is not an op, right?","            // if no listener is supplied then the object is only","            // guaranteed to exist till the next Host.gc() run","            if (!repl) { return; }","","            var self = this;","            // stateless objects fire no events; essentially, on() is deferred","            if (!this._version && filter) { // TODO solidify","                this._lstn.push({","                    _op: 'reon',","                    _src: repl,","                    deliver: function () {","                        var i = self._lstn.indexOf(this);","                        self._lstn.splice(i, 1);","                        self.deliver(spec, filter, repl);","                    }","                });","                return; // defer this call till uplinks are ready","            }","            // make all listeners uniform objects","            if (repl.constructor === Function) {","                repl = {","                    sink: repl,","                    that: this,","                    deliver: function () { // .deliver is invoked on an event","                        this.sink.apply(this.that, arguments);","                    }","                };","            }","","            if (filter) {","                filter = new Spec(filter, '.');","                var baseVersion = filter.filter('!'),","                    filter_by_op = filter.get('.');","","                if (filter_by_op === 'init') {","                    var diff_if_needed = baseVersion ? this.diff(baseVersion) : '';","                    repl.deliver(spec.set('.init'), diff_if_needed, this); //??","                    // FIXME use once()","                    return;","                }","                if (filter_by_op) {","                    repl = {","                        sink: repl,","                        _op: filter_by_op,","                        deliver: function deliverWithFilter(spec, val, src) {","                            if (spec.op() === filter_by_op) {","                                this.sink.deliver(spec, val, src);","                            }","                        }","                    };","                }","","                if (!baseVersion.isEmpty()) {","                    var diff = this.diff(baseVersion);","                    diff && repl.deliver(spec.set('.init'), diff, this); // 2downlink","                    repl.deliver(spec.set('.reon'), this.version().toString(), this);","                }","            }","","            this._lstn.push(repl);","            // TODO repeated subscriptions: send a diff, otherwise ignore","        },","","        /**","         * downstream reciprocal subscription","         */","        reon: function (spec, filter, repl) {","            if (filter) {  // a diff is requested","                var base = Spec.as(filter).tok('!');","                var diff = this.diff(base);","                if (diff) {","                    repl.deliver(spec.set('.init'), diff, this);","                }","            }","        },","","        /** Unsubscribe */","        off: function (spec, val, repl) {","            var idx = this.getListenerIndex(repl); //TODO ??? uplinks_only?","            if (idx > -1) {","                this._lstn.splice(idx, 1);","            }","        },","","        /** Reciprocal unsubscription */","        reoff: function (spec, val, repl) {","            var idx = this.getListenerIndex(repl); //TODO ??? uplinks_only?","            if (idx > -1) {","                this._lstn.splice(idx, 1);","            }","            if (this._id) {","                this.checkUplink();","            }","        },","","        /**","         * As all the event/operation processing is asynchronous, we","         * cannot simply throw/catch exceptions over the network.","         * This method allows to send errors back asynchronously.","         * Sort of an asynchronous complaint mailbox :)","         */","        error: function (spec, val, repl) {","            console.error('something failed:', spec, val, '@', (repl && repl._id));","        }","","    }, // neutrals","","    ops: {","        /**","         * A state of a Syncable CRDT object is transferred to a replica using","         * some combination of POJO state and oplog. For example, a simple LWW","         * object (Last Writer Wins, see Model.js) uses its distilled oplog","         * as the most concise form. A CT document (Causal Trees) has a highly","         * compressed state, its log being hundred times heavier. Hence, it","         * mainly uses its plain state, but sometimes its log tail as well. The","         * format of the state object is POJO plus (optionally) special fields:","         * _oplog, _tail, _vector, _version (the latter flags POJO presence).","         * In either case, .init is only produced by diff() (+ by storage).","         * Any real-time changes are transferred as individual events.","         * @this {Syncable}","         */","        init: function (spec, state, src) {","","            var tail = {}, // ops to be applied on top of the received state","                typeid = spec.filter('/#'),","                lstn = this._lstn,","                a_spec;","            this._lstn = []; // prevent events from being fired","","            if (state._version/* && state._version !== '!0'*/) {","                // local changes may need to be merged into the received state","                if (this._oplog) {","                    for (a_spec in this._oplog) {","                        tail[a_spec] = this._oplog[a_spec];","                    }","                    this._oplog = {};","                }","                this._vector && (this._vector = undefined);","                // zero everything","                for (var key in this) {","                    if (this.hasOwnProperty(key) && key.charAt(0) !== '_') {","                        this[key] = undefined;","                    }","                }","                // set default values","                this.reset();","","                this.apply(state);","                this._version = state._version;","","                state._oplog && (this._oplog = state._oplog); // FIXME copy","                state._vector && (this._vector = state._vector);","            }","            // add the received tail to the local one","            if (state._tail) {","                for (a_spec in state._tail) {","                    tail[a_spec] = state._tail[a_spec];","                }","            }","            // appply the combined tail to the new state","            var specs = [];","            for (a_spec in tail) {","                specs.push(a_spec);","            }","            specs.sort().reverse();","            // there will be some replays, but those will be ignored","            while (a_spec = specs.pop()) {","                this.deliver(typeid.add(a_spec), tail[a_spec], this);","            }","","            this._lstn = lstn;","","        }","","    }, // ops","","","    /**","     * Uplink connections may be closed or reestablished so we need","     * to adjust every object's subscriptions time to time.","     * @this {Syncable}","     */","    checkUplink: function () {","        var new_uplinks = this._host.getSources(this.spec()).slice(),","            up, self = this;","        // the plan is to eliminate extra subscriptions and to","        // establish missing ones; that only affects outbound subs","        for (var i = 0; i < this._lstn.length && this._lstn[i] != ','; i++) {","            up = this._lstn[i];","            if (!up) {","                continue;","            }","            up._src && (up = up._src); // unready","            var up_idx = new_uplinks.indexOf(up);","            if (up_idx === -1) { // don't need this uplink anymore","                up.deliver(this.newEventSpec('off'), '', this);","            } else {","                new_uplinks[up_idx] = undefined;","            }","        }","        // subscribe to the new","        for (i = 0; i < new_uplinks.length; i++) {","            up = new_uplinks[i];","            if (!up) {","                continue;","            }","            var onspec = this.newEventSpec('on');","            this._lstn.unshift({","                _op: 'reon',","                _src: up,","                deliver: function (spec, base, src) {","                    if (spec.version() !== onspec.version()) {","                        return;","                    } // not mine","","                    var i = self.getListenerIndex(this);","                    self._lstn[i] = up;","                }","            });","            up.deliver(onspec, this.version().toString(), this);","        }","    },","","    /**","     * returns a Plain Javascript Object with the state","     * @this {Syncable}","     */","    pojo: function (addVersionInfo) {","        var pojo = {},","            defs = this.constructor.defaults;","        for (var key in this) {","            if (this.hasOwnProperty(key)) {","                if (Syncable.reFieldName.test(key) && this[key] !== undefined) {","                    var def = defs[key],","                        val = this[key];","                    pojo[key] = def && def.type ?","                    (val.toJSON && val.toJSON()) || val.toString() :","                            (val && val._id ? val._id : val); // TODO prettify","                }","            }","        }","        if (addVersionInfo) {","            pojo._id = this._id; // not necassary","            pojo._version = this._version;","            this._vector && (pojo._vector = this._vector);","            this._oplog && (pojo._oplog = this._oplog); //TODO copy","        }","        return pojo;","    },","","    /**","     * Sometimes we get an operation we don't support; not normally","     * happens for a regular replica, but still needs to be caught","     */","    unimplemented: function (spec, val, repl) {","        console.warn(\"method not implemented:\", spec);","    },","","    /**","     * Deallocate everything, free all resources.","     */","    close: function () {","        var l = this._lstn,","            s = this.spec(),","            uplink;","","        this._id = null; // no id - no object; prevent relinking","        while ((uplink = l.shift()) && uplink !== ',') {","            uplink.off(s, null, this);","        }","        while (l.length) {","            l.pop().deliver(s.set('.reoff'), null, this);","        }","        this._host.unregister(this);","    },","","    /**","     * Once an object is not listened by anyone it is perfectly safe","     * to garbage collect it.","     */","    gc: function () {","        var l = this._lstn;","        if (!l.length || (l.length === 1 && !l[0])) {","            this.close();","        }","    },","","    /**","     * @param {string} filter event filter for subscription","     * @param {function} cb callback (will be called once)","     * @see Syncable#on","     */","    once: function (filter, cb) {","        this.on(filter, function onceWrap(spec, val, src) {","            // \"this\" is the object (Syncable)","            if (cb.constructor === Function) {","                cb.call(this, spec, val, src);","            } else {","                cb.deliver(spec, val, src);","            }","            this.off(filter, onceWrap);","        });","    }","});","","","Syncable.reFieldName = /^[a-z][a-z0-9]*([A-Z][a-z0-9]*)*$/;","","/**"," * Derive version vector from a state of a Syncable object."," * This is not a method as it needs to be applied to a flat JSON object."," * @see Syncable.version"," * @see Spec.Map"," * @returns {string} string representation of Spec.Map"," */","Syncable.stateVersionVector = function stateVersionVector(state) {","    var op,","        map = new Spec.Map( (state._version||'!0') + (state._vector || '') );","    if (state._oplog) {","        for (op in state._oplog) {","            map.add(op);","        }","    }","    if (state._tail) {","        for (op in state._tail) {","            map.add(op);","        }","    }","    return map.toString();","};",""],"l":{"3":1,"4":1,"10":1,"12":0,"22":0,"24":0,"25":0,"27":0,"28":0,"29":0,"30":0,"32":0,"33":0,"37":0,"38":0,"46":0,"48":0,"50":0,"52":1,"54":1,"55":1,"56":0,"57":0,"58":0,"59":0,"61":1,"62":1,"63":1,"65":1,"66":3,"67":0,"79":1,"80":6,"81":6,"82":3,"83":3,"84":0,"86":3,"88":3,"92":6,"93":6,"94":6,"95":6,"96":6,"98":6,"100":6,"102":5,"103":25,"105":5,"106":5,"111":6,"112":7,"113":7,"114":7,"116":0,"121":6,"122":12,"123":12,"124":12,"126":0,"131":6,"132":0,"133":0,"135":0,"140":6,"141":2,"142":6,"147":6,"148":101,"149":101,"150":101,"152":84,"153":17,"154":0,"155":17,"157":17,"159":0,"162":0,"167":6,"168":2,"169":2,"171":2,"174":2,"175":2,"178":0,"179":0,"181":0,"183":0,"184":0,"186":0,"188":0,"190":0,"194":0,"199":6,"200":6,"201":0,"202":0,"203":0,"205":0,"206":0,"207":0,"208":0,"209":0,"214":6,"215":6,"218":6,"219":6,"220":6,"223":6,"224":6,"225":6,"226":0,"228":6,"229":12,"232":1,"233":12,"234":1,"236":11,"237":9,"239":2,"243":1,"244":19,"246":0,"247":0,"249":0,"251":0,"252":0,"253":0,"254":0,"257":0,"262":6,"263":6,"264":6,"265":6,"266":6,"267":6,"279":1,"280":0,"281":0,"282":0,"283":0,"284":0,"291":1,"292":0,"296":0,"297":0,"299":0,"300":0,"301":0,"311":1,"312":0,"320":1,"324":0,"332":0,"340":0,"347":0,"348":0,"349":0,"351":1,"352":0,"353":0,"354":0,"355":0,"356":0,"361":0,"362":0,"364":0,"365":0,"367":0,"368":0,"370":0,"371":0,"374":0,"376":0,"377":0,"378":0,"379":0,"380":0,"381":0,"384":0,"386":0,"387":0,"393":0,"395":0,"398":0,"399":0,"401":0,"403":0,"405":0,"408":0,"412":0,"419":0,"422":0,"423":0,"424":0,"425":0,"427":0,"428":0,"429":0,"430":0,"432":0,"433":0,"434":0,"436":0,"440":0,"444":0,"445":0,"453":0,"454":0,"455":0,"456":0,"468":0,"469":0,"470":0,"471":0,"474":0,"503":0,"504":0,"505":0,"506":0,"507":0,"508":0,"509":0,"510":0,"511":0,"515":0,"516":0,"517":0,"520":0,"534":0,"542":0,"543":0,"545":0,"546":0,"555":0,"556":0,"557":0,"558":0,"559":0,"560":0,"569":0,"573":0,"575":0,"577":0,"578":0,"579":0,"580":0,"582":0,"583":0,"586":0,"590":0,"591":0,"592":0,"593":0,"594":0,"596":0,"617":0,"619":0,"621":0,"622":0,"626":0,"627":0,"628":0,"631":0,"634":0,"635":0,"639":0,"644":0,"645":0,"646":0,"649":0,"650":0,"651":0,"653":0,"655":0,"656":0,"660":0,"661":0,"667":0,"668":0,"669":0,"670":0,"674":0,"682":0,"683":0,"684":0,"685":0,"686":0,"693":0,"694":0,"695":0,"701":0,"702":0,"703":0,"705":0,"706":0,"717":0,"738":0,"742":0,"744":0,"746":0,"747":0,"748":0,"750":0,"752":0,"754":0,"755":0,"756":0,"760":0,"762":0,"763":0,"765":0,"766":0,"769":0,"770":0,"771":0,"775":0,"776":0,"777":0,"779":0,"781":0,"782":0,"785":0,"798":0,"802":0,"803":0,"804":0,"805":0,"807":0,"808":0,"809":0,"810":0,"812":0,"816":0,"817":0,"818":0,"819":0,"821":0,"822":0,"826":0,"827":0,"830":0,"831":0,"834":0,"843":0,"845":0,"846":0,"847":0,"848":0,"850":0,"856":0,"857":0,"858":0,"859":0,"860":0,"862":0,"870":0,"877":0,"881":0,"882":0,"883":0,"885":0,"886":0,"888":0,"896":0,"897":0,"898":0,"908":0,"910":0,"911":0,"913":0,"915":0,"921":1,"930":1,"931":0,"933":0,"934":0,"935":0,"938":0,"939":0,"940":0,"943":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Model.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Model.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":1,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0},"b":{"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"Model","line":11,"loc":{"start":{"line":11,"column":0},"end":{"line":11,"column":26}}},"2":{"name":"(anonymous_2)","line":29,"loc":{"start":{"line":29,"column":12},"end":{"line":29,"column":40}}},"3":{"name":"(anonymous_3)","line":39,"loc":{"start":{"line":39,"column":29},"end":{"line":39,"column":55}}},"4":{"name":"(anonymous_4)","line":52,"loc":{"start":{"line":52,"column":13},"end":{"line":52,"column":41}}},"5":{"name":"(anonymous_5)","line":68,"loc":{"start":{"line":68,"column":15},"end":{"line":68,"column":32}}},"6":{"name":"(anonymous_6)","line":70,"loc":{"start":{"line":70,"column":17},"end":{"line":70,"column":34}}},"7":{"name":"(anonymous_7)","line":81,"loc":{"start":{"line":81,"column":16},"end":{"line":81,"column":28}}},"8":{"name":"(anonymous_8)","line":120,"loc":{"start":{"line":120,"column":13},"end":{"line":120,"column":42}}},"9":{"name":"(anonymous_9)","line":132,"loc":{"start":{"line":132,"column":10},"end":{"line":132,"column":25}}},"10":{"name":"(anonymous_10)","line":156,"loc":{"start":{"line":156,"column":10},"end":{"line":156,"column":22}}},"11":{"name":"(anonymous_11)","line":174,"loc":{"start":{"line":174,"column":14},"end":{"line":174,"column":35}}},"12":{"name":"(anonymous_12)","line":190,"loc":{"start":{"line":190,"column":29},"end":{"line":190,"column":58}}},"13":{"name":"(anonymous_13)","line":195,"loc":{"start":{"line":195,"column":22},"end":{"line":195,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"3":{"start":{"line":11,"column":0},"end":{"line":17,"column":1}},"4":{"start":{"line":12,"column":4},"end":{"line":12,"column":50}},"5":{"start":{"line":14,"column":4},"end":{"line":16,"column":5}},"6":{"start":{"line":15,"column":8},"end":{"line":15,"column":76}},"7":{"start":{"line":19,"column":0},"end":{"line":186,"column":3}},"8":{"start":{"line":31,"column":12},"end":{"line":47,"column":13}},"9":{"start":{"line":34,"column":16},"end":{"line":44,"column":18}},"10":{"start":{"line":40,"column":24},"end":{"line":42,"column":25}},"11":{"start":{"line":41,"column":28},"end":{"line":41,"column":68}},"12":{"start":{"line":45,"column":16},"end":{"line":45,"column":28}},"13":{"start":{"line":46,"column":16},"end":{"line":46,"column":26}},"14":{"start":{"line":49,"column":12},"end":{"line":49,"column":67}},"15":{"start":{"line":53,"column":12},"end":{"line":53,"column":32}},"16":{"start":{"line":54,"column":12},"end":{"line":61,"column":13}},"17":{"start":{"line":55,"column":16},"end":{"line":60,"column":17}},"18":{"start":{"line":56,"column":20},"end":{"line":59,"column":21}},"19":{"start":{"line":57,"column":24},"end":{"line":57,"column":37}},"20":{"start":{"line":58,"column":24},"end":{"line":58,"column":30}},"21":{"start":{"line":62,"column":12},"end":{"line":62,"column":62}},"22":{"start":{"line":83,"column":8},"end":{"line":86,"column":17}},"23":{"start":{"line":87,"column":8},"end":{"line":92,"column":9}},"24":{"start":{"line":88,"column":12},"end":{"line":88,"column":31}},"25":{"start":{"line":90,"column":12},"end":{"line":90,"column":28}},"26":{"start":{"line":93,"column":8},"end":{"line":93,"column":20}},"27":{"start":{"line":94,"column":8},"end":{"line":108,"column":9}},"28":{"start":{"line":95,"column":12},"end":{"line":95,"column":27}},"29":{"start":{"line":96,"column":12},"end":{"line":97,"column":33}},"30":{"start":{"line":98,"column":12},"end":{"line":104,"column":13}},"31":{"start":{"line":99,"column":16},"end":{"line":103,"column":17}},"32":{"start":{"line":100,"column":20},"end":{"line":100,"column":38}},"33":{"start":{"line":102,"column":20},"end":{"line":102,"column":57}},"34":{"start":{"line":105,"column":12},"end":{"line":105,"column":39}},"35":{"start":{"line":106,"column":12},"end":{"line":106,"column":68}},"36":{"start":{"line":107,"column":12},"end":{"line":107,"column":33}},"37":{"start":{"line":109,"column":8},"end":{"line":109,"column":21}},"38":{"start":{"line":121,"column":12},"end":{"line":122,"column":54}},"39":{"start":{"line":123,"column":12},"end":{"line":127,"column":13}},"40":{"start":{"line":124,"column":16},"end":{"line":124,"column":44}},"41":{"start":{"line":125,"column":16},"end":{"line":125,"column":34}},"42":{"start":{"line":126,"column":16},"end":{"line":126,"column":44}},"43":{"start":{"line":128,"column":12},"end":{"line":128,"column":39}},"44":{"start":{"line":133,"column":8},"end":{"line":135,"column":9}},"45":{"start":{"line":134,"column":12},"end":{"line":134,"column":45}},"46":{"start":{"line":139,"column":8},"end":{"line":139,"column":52}},"47":{"start":{"line":140,"column":8},"end":{"line":142,"column":9}},"48":{"start":{"line":141,"column":12},"end":{"line":141,"column":47}},"49":{"start":{"line":144,"column":8},"end":{"line":144,"column":41}},"50":{"start":{"line":157,"column":8},"end":{"line":160,"column":18}},"51":{"start":{"line":161,"column":8},"end":{"line":165,"column":9}},"52":{"start":{"line":162,"column":12},"end":{"line":164,"column":13}},"53":{"start":{"line":163,"column":16},"end":{"line":163,"column":45}},"54":{"start":{"line":166,"column":8},"end":{"line":170,"column":9}},"55":{"start":{"line":167,"column":12},"end":{"line":169,"column":13}},"56":{"start":{"line":168,"column":16},"end":{"line":168,"column":38}},"57":{"start":{"line":171,"column":8},"end":{"line":171,"column":26}},"58":{"start":{"line":175,"column":8},"end":{"line":177,"column":9}},"59":{"start":{"line":176,"column":12},"end":{"line":176,"column":22}},"60":{"start":{"line":178,"column":8},"end":{"line":182,"column":9}},"61":{"start":{"line":179,"column":12},"end":{"line":181,"column":13}},"62":{"start":{"line":180,"column":16},"end":{"line":180,"column":40}},"63":{"start":{"line":183,"column":8},"end":{"line":183,"column":18}},"64":{"start":{"line":190,"column":0},"end":{"line":203,"column":2}},"65":{"start":{"line":191,"column":4},"end":{"line":191,"column":31}},"66":{"start":{"line":192,"column":4},"end":{"line":202,"column":5}},"67":{"start":{"line":193,"column":8},"end":{"line":193,"column":66}},"68":{"start":{"line":195,"column":8},"end":{"line":199,"column":10}},"69":{"start":{"line":196,"column":12},"end":{"line":198,"column":13}},"70":{"start":{"line":197,"column":16},"end":{"line":197,"column":42}},"71":{"start":{"line":200,"column":8},"end":{"line":200,"column":30}},"72":{"start":{"line":201,"column":8},"end":{"line":201,"column":63}}},"branchMap":{"1":{"line":14,"type":"if","locations":[{"start":{"line":14,"column":4},"end":{"line":14,"column":4}},{"start":{"line":14,"column":4},"end":{"line":14,"column":4}}]},"2":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":8},"end":{"line":14,"column":20}},{"start":{"line":14,"column":24},"end":{"line":14,"column":33}},{"start":{"line":14,"column":37},"end":{"line":14,"column":69}},{"start":{"line":14,"column":73},"end":{"line":14,"column":92}}]},"3":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":12}},{"start":{"line":31,"column":12},"end":{"line":31,"column":12}}]},"4":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":16},"end":{"line":31,"column":43}},{"start":{"line":32,"column":20},"end":{"line":32,"column":45}},{"start":{"line":33,"column":21},"end":{"line":33,"column":54}}]},"5":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":24},"end":{"line":40,"column":24}},{"start":{"line":40,"column":24},"end":{"line":40,"column":24}}]},"6":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":12},"end":{"line":54,"column":12}},{"start":{"line":54,"column":12},"end":{"line":54,"column":12}}]},"7":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":20},"end":{"line":56,"column":20}},{"start":{"line":56,"column":20},"end":{"line":56,"column":20}}]},"8":{"line":56,"type":"binary-expr","locations":[{"start":{"line":56,"column":24},"end":{"line":56,"column":29}},{"start":{"line":56,"column":33},"end":{"line":56,"column":50}},{"start":{"line":56,"column":54},"end":{"line":56,"column":72}}]},"9":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":16},"end":{"line":99,"column":16}},{"start":{"line":99,"column":16},"end":{"line":99,"column":16}}]},"10":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":12},"end":{"line":106,"column":20}},{"start":{"line":106,"column":25},"end":{"line":106,"column":38}},{"start":{"line":106,"column":42},"end":{"line":106,"column":66}}]},"11":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":12},"end":{"line":123,"column":12}},{"start":{"line":123,"column":12},"end":{"line":123,"column":12}}]},"12":{"line":128,"type":"binary-expr","locations":[{"start":{"line":128,"column":12},"end":{"line":128,"column":17}},{"start":{"line":128,"column":21},"end":{"line":128,"column":38}}]},"13":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":8},"end":{"line":133,"column":8}},{"start":{"line":133,"column":8},"end":{"line":133,"column":8}}]},"14":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":8},"end":{"line":140,"column":8}},{"start":{"line":140,"column":8},"end":{"line":140,"column":8}}]},"15":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":12},"end":{"line":162,"column":12}},{"start":{"line":162,"column":12},"end":{"line":162,"column":12}}]},"16":{"line":167,"type":"if","locations":[{"start":{"line":167,"column":12},"end":{"line":167,"column":12}},{"start":{"line":167,"column":12},"end":{"line":167,"column":12}}]},"17":{"line":175,"type":"if","locations":[{"start":{"line":175,"column":8},"end":{"line":175,"column":8}},{"start":{"line":175,"column":8},"end":{"line":175,"column":8}}]},"18":{"line":179,"type":"if","locations":[{"start":{"line":179,"column":12},"end":{"line":179,"column":12}},{"start":{"line":179,"column":12},"end":{"line":179,"column":12}}]},"19":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":4},"end":{"line":192,"column":4}},{"start":{"line":192,"column":4},"end":{"line":192,"column":4}}]},"20":{"line":196,"type":"if","locations":[{"start":{"line":196,"column":12},"end":{"line":196,"column":12}},{"start":{"line":196,"column":12},"end":{"line":196,"column":12}}]}},"code":["\"use strict\";","","var Spec = require('./Spec');","var Syncable = require('./Syncable');","","/**"," * Model (LWW key-value object)"," * @param idOrState"," * @constructor"," */","function Model(idOrState) {","    var ret = Model._super.apply(this, arguments);","    /// TODO: combine with state push, make clean","    if (ret === this && idOrState && idOrState.constructor !== String && !Spec.is(idOrState)) {","        this.deliver(this.spec().add(this._id, '!').add('.set'), idOrState);","    }","}","","module.exports = Syncable.extend(Model, {","    defaults: {","        _oplog: Object","    },","    /**  init modes:","     *    1  fresh id, fresh object","     *    2  known id, stateless object","     *    3  known id, state boot","     */","    neutrals: {","        on: function (spec, base, repl) {","            //  support the model.on('field',callback_fn) pattern","            if (typeof(repl) === 'function' &&","                    typeof(base) === 'string' &&","                    (base in this.constructor.defaults)) {","                var stub = {","                    fn: repl,","                    key: base,","                    self: this,","                    _op: 'set',","                    deliver: function (spec, val, src) {","                        if (this.key in val) {","                            this.fn.call(this.self, spec, val, src);","                        }","                    }","                };","                repl = stub;","                base = '';","            }","            // this will delay response if we have no state yet","            Syncable._pt._neutrals.on.call(this, spec, base, repl);","        },","","        off: function (spec, base, repl) {","            var ls = this._lstn;","            if (typeof(repl) === 'function') { // TODO ugly","                for (var i = 0; i < ls.length; i++) {","                    if (ls[i] && ls[i].fn === repl && ls[i].key === base) {","                        repl = ls[i];","                        break;","                    }","                }","            }","            Syncable._pt._neutrals.off.apply(this, arguments);","        }","","    },","","    // TODO remove unnecessary value duplication","    packState: function (state) {","    },","    unpackState: function (state) {","    },","    /**","     * Removes redundant information from the log; as we carry a copy","     * of the log in every replica we do everythin to obtain the minimal","     * necessary subset of it.","     * As a side effect, distillLog allows up to handle some partial","     * order issues (see _ops.set).","     * @see Model.ops.set","     * @returns {*} distilled log {spec:true}","     */","    distillLog: function () {","        // explain","        var sets = [],","            cumul = {},","            heads = {},","            spec;","        for (var s in this._oplog) {","            spec = new Spec(s);","            //if (spec.op() === 'set') {","            sets.push(spec);","            //}","        }","        sets.sort();","        for (var i = sets.length - 1; i >= 0; i--) {","            spec = sets[i];","            var val = this._oplog[spec],","                notempty = false;","            for (var field in val) {","                if (field in cumul) {","                    delete val[field];","                } else {","                    notempty = cumul[field] = val[field]; //store last value of the field","                }","            }","            var source = spec.source();","            notempty || (heads[source] && delete this._oplog[spec]);","            heads[source] = true;","        }","        return cumul;","    },","","    ops: {","        /**","         * This barebones Model class implements just one kind of an op:","         * set({key:value}). To implment your own ops you need to understand","         * implications of partial order as ops may be applied in slightly","         * different orders at different replicas. This implementation","         * may resort to distillLog() to linearize ops.","         */","        set: function (spec, value, repl) {","            var version = spec.version(),","                vermet = spec.filter('!.').toString();","            if (version < this._version.substr(1)) {","                this._oplog[vermet] = value;","                this.distillLog(); // may amend the value","                value = this._oplog[vermet];","            }","            value && this.apply(value);","        }","    },","","    fill: function (key) { // TODO goes to Model to support references","        if (!this.hasOwnProperty(key)) {","            throw new Error('no such entry');","        }","","        //if (!Spec.is(this[key]))","        //    throw new Error('not a specifier');","        var spec = new Spec(this[key]).filter('/#');","        if (spec.pattern() !== '/#') {","            throw new Error('incomplete spec');","        }","","        this[key] = this._host.get(spec);","        /* TODO new this.refType(id) || new Swarm.types[type](id);","         on('init', function(){","         self.emit('fill',key,this)","         self.emit('full',key,this)","         });*/","    },","","    /**","     * Generate .set operation after some of the model fields were changed","     * TODO write test for Model.save()","     */","    save: function () {","        var cumul = this.distillLog(),","            changes = {},","            pojo = this.pojo(),","            field;","        for (field in pojo) {","            if (this[field] !== cumul[field]) {// TODO nesteds","                changes[field] = this[field];","            }","        }","        for (field in cumul) {","            if (!(field in pojo)) {","                changes[field] = null; // JSON has no undefined","            }","        }","        this.set(changes);","    },","","    validate: function (spec, val) {","        if (spec.op() !== 'set') {","            return '';","        } // no idea","        for (var key in val) {","            if (!Syncable.reFieldName.test(key)) {","                return 'bad field name';","            }","        }","        return '';","    }","","});","","// Model may have reactions for field changes as well as for 'real' ops/events","// (a field change is a .set operation accepting a {field:newValue} map)","module.exports.addReaction = function (methodOrField, fn) {","    var proto = this.prototype;","    if (typeof (proto[methodOrField]) === 'function') { // it is a field name","        return Syncable.addReaction.call(this, methodOrField, fn);","    } else {","        var wrapper = function (spec, val) {","            if (methodOrField in val) {","                fn.apply(this, arguments);","            }","        };","        wrapper._rwrap = true;","        return Syncable.addReaction.call(this, 'set', wrapper);","    }","};",""],"l":{"3":1,"4":1,"11":1,"12":0,"14":0,"15":0,"19":1,"31":0,"34":0,"40":0,"41":0,"45":0,"46":0,"49":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"62":0,"83":0,"87":0,"88":0,"90":0,"93":0,"94":0,"95":0,"96":0,"98":0,"99":0,"100":0,"102":0,"105":0,"106":0,"107":0,"109":0,"121":0,"123":0,"124":0,"125":0,"126":0,"128":0,"133":0,"134":0,"139":0,"140":0,"141":0,"144":0,"157":0,"161":0,"162":0,"163":0,"166":0,"167":0,"168":0,"171":0,"175":0,"176":0,"178":0,"179":0,"180":0,"183":0,"190":1,"191":0,"192":0,"193":0,"195":0,"196":0,"197":0,"200":0,"201":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Set.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Set.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0},"fnMap":{"1":{"name":"(anonymous_1)","line":31,"loc":{"start":{"line":31,"column":14},"end":{"line":31,"column":38}}},"2":{"name":"(anonymous_2)","line":32,"loc":{"start":{"line":32,"column":25},"end":{"line":32,"column":40}}},"3":{"name":"(anonymous_3)","line":44,"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":45}}},"4":{"name":"(anonymous_4)","line":65,"loc":{"start":{"line":65,"column":14},"end":{"line":65,"column":40}}},"5":{"name":"(anonymous_5)","line":79,"loc":{"start":{"line":79,"column":15},"end":{"line":79,"column":36}}},"6":{"name":"(anonymous_6)","line":91,"loc":{"start":{"line":91,"column":10},"end":{"line":91,"column":22}}},"7":{"name":"(anonymous_7)","line":102,"loc":{"start":{"line":102,"column":15},"end":{"line":102,"column":30}}},"8":{"name":"(anonymous_8)","line":109,"loc":{"start":{"line":109,"column":18},"end":{"line":109,"column":33}}},"9":{"name":"(anonymous_9)","line":123,"loc":{"start":{"line":123,"column":9},"end":{"line":123,"column":29}}},"10":{"name":"(anonymous_10)","line":135,"loc":{"start":{"line":135,"column":10},"end":{"line":135,"column":27}}},"11":{"name":"(anonymous_11)","line":144,"loc":{"start":{"line":144,"column":13},"end":{"line":144,"column":36}}},"12":{"name":"(anonymous_12)","line":151,"loc":{"start":{"line":151,"column":11},"end":{"line":151,"column":34}}},"13":{"name":"(anonymous_13)","line":161,"loc":{"start":{"line":161,"column":12},"end":{"line":161,"column":35}}},"14":{"name":"(anonymous_14)","line":163,"loc":{"start":{"line":163,"column":21},"end":{"line":163,"column":43}}},"15":{"name":"(anonymous_15)","line":171,"loc":{"start":{"line":171,"column":9},"end":{"line":171,"column":32}}},"16":{"name":"(anonymous_16)","line":173,"loc":{"start":{"line":173,"column":21},"end":{"line":173,"column":43}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":47}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":65}},"7":{"start":{"line":18,"column":0},"end":{"line":178,"column":3}},"8":{"start":{"line":32,"column":12},"end":{"line":34,"column":21}},"9":{"start":{"line":33,"column":16},"end":{"line":33,"column":36}},"10":{"start":{"line":45,"column":12},"end":{"line":45,"column":48}},"11":{"start":{"line":46,"column":12},"end":{"line":46,"column":25}},"12":{"start":{"line":47,"column":12},"end":{"line":61,"column":13}},"13":{"start":{"line":48,"column":16},"end":{"line":60,"column":17}},"14":{"start":{"line":49,"column":20},"end":{"line":52,"column":21}},"15":{"start":{"line":50,"column":24},"end":{"line":50,"column":75}},"16":{"start":{"line":51,"column":24},"end":{"line":51,"column":64}},"17":{"start":{"line":53,"column":23},"end":{"line":60,"column":17}},"18":{"start":{"line":54,"column":20},"end":{"line":57,"column":21}},"19":{"start":{"line":55,"column":24},"end":{"line":55,"column":65}},"20":{"start":{"line":56,"column":24},"end":{"line":56,"column":55}},"21":{"start":{"line":59,"column":20},"end":{"line":59,"column":82}},"22":{"start":{"line":66,"column":8},"end":{"line":68,"column":9}},"23":{"start":{"line":67,"column":12},"end":{"line":67,"column":22}},"24":{"start":{"line":70,"column":8},"end":{"line":75,"column":9}},"25":{"start":{"line":72,"column":12},"end":{"line":74,"column":13}},"26":{"start":{"line":73,"column":16},"end":{"line":73,"column":51}},"27":{"start":{"line":76,"column":8},"end":{"line":76,"column":18}},"28":{"start":{"line":80,"column":8},"end":{"line":82,"column":9}},"29":{"start":{"line":81,"column":12},"end":{"line":81,"column":23}},"30":{"start":{"line":83,"column":8},"end":{"line":83,"column":38}},"31":{"start":{"line":84,"column":8},"end":{"line":84,"column":33}},"32":{"start":{"line":85,"column":8},"end":{"line":85,"column":26}},"33":{"start":{"line":86,"column":8},"end":{"line":86,"column":40}},"34":{"start":{"line":93,"column":8},"end":{"line":93,"column":62}},"35":{"start":{"line":94,"column":8},"end":{"line":94,"column":52}},"36":{"start":{"line":95,"column":8},"end":{"line":95,"column":22}},"37":{"start":{"line":103,"column":8},"end":{"line":103,"column":23}},"38":{"start":{"line":104,"column":8},"end":{"line":104,"column":30}},"39":{"start":{"line":105,"column":8},"end":{"line":105,"column":27}},"40":{"start":{"line":110,"column":8},"end":{"line":110,"column":69}},"41":{"start":{"line":111,"column":8},"end":{"line":113,"column":9}},"42":{"start":{"line":112,"column":12},"end":{"line":112,"column":53}},"43":{"start":{"line":114,"column":8},"end":{"line":114,"column":23}},"44":{"start":{"line":115,"column":8},"end":{"line":115,"column":24}},"45":{"start":{"line":116,"column":8},"end":{"line":116,"column":27}},"46":{"start":{"line":124,"column":8},"end":{"line":124,"column":51}},"47":{"start":{"line":125,"column":8},"end":{"line":127,"column":9}},"48":{"start":{"line":126,"column":12},"end":{"line":126,"column":44}},"49":{"start":{"line":128,"column":8},"end":{"line":128,"column":39}},"50":{"start":{"line":136,"column":8},"end":{"line":136,"column":21}},"51":{"start":{"line":137,"column":8},"end":{"line":139,"column":9}},"52":{"start":{"line":138,"column":12},"end":{"line":138,"column":41}},"53":{"start":{"line":140,"column":8},"end":{"line":140,"column":24}},"54":{"start":{"line":141,"column":8},"end":{"line":141,"column":19}},"55":{"start":{"line":145,"column":8},"end":{"line":145,"column":22}},"56":{"start":{"line":146,"column":8},"end":{"line":148,"column":9}},"57":{"start":{"line":147,"column":12},"end":{"line":147,"column":59}},"58":{"start":{"line":152,"column":8},"end":{"line":152,"column":22}},"59":{"start":{"line":153,"column":8},"end":{"line":157,"column":9}},"60":{"start":{"line":154,"column":12},"end":{"line":156,"column":13}},"61":{"start":{"line":155,"column":16},"end":{"line":155,"column":29}},"62":{"start":{"line":158,"column":8},"end":{"line":158,"column":20}},"63":{"start":{"line":162,"column":8},"end":{"line":162,"column":21}},"64":{"start":{"line":163,"column":8},"end":{"line":167,"column":11}},"65":{"start":{"line":164,"column":12},"end":{"line":166,"column":13}},"66":{"start":{"line":165,"column":16},"end":{"line":165,"column":32}},"67":{"start":{"line":168,"column":8},"end":{"line":168,"column":19}},"68":{"start":{"line":172,"column":8},"end":{"line":172,"column":21}},"69":{"start":{"line":173,"column":8},"end":{"line":175,"column":11}},"70":{"start":{"line":174,"column":12},"end":{"line":174,"column":51}},"71":{"start":{"line":176,"column":8},"end":{"line":176,"column":19}}},"branchMap":{"1":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":16},"end":{"line":48,"column":16}},{"start":{"line":48,"column":16},"end":{"line":48,"column":16}}]},"2":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":20},"end":{"line":49,"column":20}},{"start":{"line":49,"column":20},"end":{"line":49,"column":20}}]},"3":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":23},"end":{"line":53,"column":23}},{"start":{"line":53,"column":23},"end":{"line":53,"column":23}}]},"4":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":20},"end":{"line":54,"column":20}},{"start":{"line":54,"column":20},"end":{"line":54,"column":20}}]},"5":{"line":66,"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":66,"column":8}},{"start":{"line":66,"column":8},"end":{"line":66,"column":8}}]},"6":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":12},"end":{"line":72,"column":12}},{"start":{"line":72,"column":12},"end":{"line":72,"column":12}}]},"7":{"line":80,"type":"if","locations":[{"start":{"line":80,"column":8},"end":{"line":80,"column":8}},{"start":{"line":80,"column":8},"end":{"line":80,"column":8}}]},"8":{"line":86,"type":"binary-expr","locations":[{"start":{"line":86,"column":15},"end":{"line":86,"column":33}},{"start":{"line":86,"column":37},"end":{"line":86,"column":39}}]},"9":{"line":110,"type":"cond-expr","locations":[{"start":{"line":110,"column":29},"end":{"line":110,"column":39}},{"start":{"line":110,"column":42},"end":{"line":110,"column":68}}]},"10":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":8},"end":{"line":111,"column":8}},{"start":{"line":111,"column":8},"end":{"line":111,"column":8}}]},"11":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":8},"end":{"line":125,"column":8}},{"start":{"line":125,"column":8},"end":{"line":125,"column":8}}]},"12":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":12},"end":{"line":154,"column":12}},{"start":{"line":154,"column":12},"end":{"line":154,"column":12}}]},"13":{"line":164,"type":"if","locations":[{"start":{"line":164,"column":12},"end":{"line":164,"column":12}},{"start":{"line":164,"column":12},"end":{"line":164,"column":12}}]}},"code":["\"use strict\";","","var env = require('./env');","var Spec = require('./Spec');","var Syncable = require('./Syncable');","var Model = require('./Model'); // TODO","var ProxyListener = require('./ProxyListener');","var CollectionMethodsMixin = require('./CollectionMethodsMixin');","","/**"," * Backbone's Collection is essentially an array and arrays behave poorly"," * under concurrent writes (see OT). Hence, our primary collection type"," * is a {id:Model} Set. One may obtain a linearized version by sorting"," * them by keys or otherwise."," * This basic Set implementation can only store objects of the same type."," * @constructor"," */","module.exports = Syncable.extend('Set', {","","    defaults: {","        _objects: Object,","        _oplog: Object,","        _proxy: ProxyListener","    },","","    mixins: [","        CollectionMethodsMixin","    ],","","    reactions: {","        init: function (spec,val,src) {","            this.forEach(function (obj) {","                obj.on(this._proxy);","            }, this);","        }","    },","","    ops: {","        /**","         * Both Model and Set are oplog-only; they never pass the state on the wire,","         * only the oplog; new replicas are booted with distilled oplog as well.","         * So, this is the only point in the code that mutates the state of a Set.","         */","        change: function (spec, value, repl) {","            value = this.distillOp(spec, value);","            var key_spec;","            for (key_spec in value) {","                if (value[key_spec] === 1) {","                    if (!this._objects[key_spec]) { // only if object not in the set","                        this._objects[key_spec] = this._host.get(key_spec);","                        this._objects[key_spec].on(this._proxy);","                    }","                } else if (value[key_spec] === 0) {","                    if (this._objects[key_spec]) {","                        this._objects[key_spec].off(this._proxy);","                        delete this._objects[key_spec];","                    }","                } else {","                    env.log(this.spec(), 'unexpected val', JSON.stringify(value));","                }","            }","        }","    },","","    validate: function (spec, val, src) {","        if (spec.op() !== 'change') {","            return '';","        }","","        for (var key_spec in val) {","            // member spec validity","            if (Spec.pattern(key_spec) !== '/#') {","                return 'invalid spec: ' + key_spec;","            }","        }","        return '';","    },","","    distillOp: function (spec, val) {","        if (spec.version() > this._version) {","            return val; // no concurrent op","        }","        var opkey = spec.filter('!.');","        this._oplog[opkey] = val;","        this.distillLog(); // may amend the value","        return this._oplog[opkey] || {};","    },","","    distillLog: Model.prototype.distillLog,","","    pojo: function () {","        // invoke super.pojo()","        var result = Syncable._pt.pojo.apply(this, arguments);","        result.entries = Object.keys(this._objects);","        return result;","    },","","    /**","     * Adds an object to the set.","     * @param {Syncable} obj the object  //TODO , its id or its specifier.","     */","    addObject: function (obj) {","        var specs = {};","        specs[obj.spec()] = 1;","        this.change(specs);","    },","    // FIXME reactions to emit .add, .remove","","    removeObject: function (obj) {","        var spec = obj._id ? obj.spec() : new Spec(obj).filter('/#');","        if (spec.pattern() !== '/#') {","            throw new Error('invalid spec: ' + spec);","        }","        var specs = {};","        specs[spec] = 0;","        this.change(specs);","    },","","    /**","     * @param {Spec|string} key_spec key (specifier)","     * @returns {Syncable} object by key","     */","    get: function (key_spec) {","        key_spec = new Spec(key_spec).filter('/#');","        if (key_spec.pattern() !== '/#') {","            throw new Error(\"invalid spec\");","        }","        return this._objects[key_spec];","    },","","    /**","     * @param {function?} order","     * @returns {Array} sorted list of objects currently in set","     */","    list: function (order) {","        var ret = [];","        for (var key in this._objects) {","            ret.push(this._objects[key]);","        }","        ret.sort(order);","        return ret;","    },","","    forEach: function (cb, thisArg) {","        var index = 0;","        for (var spec in this._objects) {","            cb.call(thisArg, this._objects[spec], index++);","        }","    },","","    every: function (cb, thisArg) {","        var index = 0;","        for (var spec in this._objects) {","            if (!cb.call(thisArg, this._objects[spec], index++)) {","                return false;","            }","        }","        return true;","    },","","    filter: function (cb, thisArg) {","        var res = [];","        this.forEach(function (entry, idx) {","            if (cb.call(thisArg, entry, idx)) {","                res.push(entry);","            }","        });","        return res;","    },","","    map: function (cb, thisArg) {","        var res = [];","        this.forEach(function (entry, idx) {","            res.push(cb.call(thisArg, entry, idx));","        });","        return res;","    }","});",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"18":1,"32":0,"33":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"53":0,"54":0,"55":0,"56":0,"59":0,"66":0,"67":0,"70":0,"72":0,"73":0,"76":0,"80":0,"81":0,"83":0,"84":0,"85":0,"86":0,"93":0,"94":0,"95":0,"103":0,"104":0,"105":0,"110":0,"111":0,"112":0,"114":0,"115":0,"116":0,"124":0,"125":0,"126":0,"128":0,"136":0,"137":0,"138":0,"140":0,"141":0,"145":0,"146":0,"147":0,"152":0,"153":0,"154":0,"155":0,"158":0,"162":0,"163":0,"164":0,"165":0,"168":0,"172":0,"173":0,"174":0,"176":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/ProxyListener.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/ProxyListener.js","s":{"1":1,"2":0,"3":0,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":1,"14":0,"15":0,"16":0,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"ProxyListener","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":25}}},"2":{"name":"(anonymous_2)","line":8,"loc":{"start":{"line":8,"column":34},"end":{"line":8,"column":60}}},"3":{"name":"(anonymous_3)","line":21,"loc":{"start":{"line":21,"column":29},"end":{"line":21,"column":49}}},"4":{"name":"(anonymous_4)","line":26,"loc":{"start":{"line":26,"column":30},"end":{"line":26,"column":50}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":6,"column":1}},"2":{"start":{"line":4,"column":4},"end":{"line":4,"column":26}},"3":{"start":{"line":5,"column":4},"end":{"line":5,"column":22}},"4":{"start":{"line":8,"column":0},"end":{"line":19,"column":2}},"5":{"start":{"line":9,"column":4},"end":{"line":9,"column":42}},"6":{"start":{"line":9,"column":33},"end":{"line":9,"column":40}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":33}},"8":{"start":{"line":11,"column":4},"end":{"line":18,"column":5}},"9":{"start":{"line":12,"column":8},"end":{"line":12,"column":35}},"10":{"start":{"line":13,"column":8},"end":{"line":17,"column":9}},"11":{"start":{"line":14,"column":12},"end":{"line":14,"column":41}},"12":{"start":{"line":16,"column":12},"end":{"line":16,"column":39}},"13":{"start":{"line":21,"column":0},"end":{"line":24,"column":2}},"14":{"start":{"line":22,"column":4},"end":{"line":22,"column":55}},"15":{"start":{"line":22,"column":33},"end":{"line":22,"column":53}},"16":{"start":{"line":23,"column":4},"end":{"line":23,"column":34}},"17":{"start":{"line":26,"column":0},"end":{"line":34,"column":2}},"18":{"start":{"line":27,"column":4},"end":{"line":27,"column":42}},"19":{"start":{"line":27,"column":33},"end":{"line":27,"column":40}},"20":{"start":{"line":28,"column":4},"end":{"line":28,"column":45}},"21":{"start":{"line":29,"column":4},"end":{"line":33,"column":5}},"22":{"start":{"line":30,"column":8},"end":{"line":30,"column":35}},"23":{"start":{"line":32,"column":8},"end":{"line":32,"column":51}},"24":{"start":{"line":36,"column":0},"end":{"line":36,"column":31}}},"branchMap":{"1":{"line":9,"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":4}},{"start":{"line":9,"column":4},"end":{"line":9,"column":4}}]},"2":{"line":10,"type":"binary-expr","locations":[{"start":{"line":10,"column":15},"end":{"line":10,"column":25}},{"start":{"line":10,"column":29},"end":{"line":10,"column":32}}]},"3":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":13,"column":8}},{"start":{"line":13,"column":8},"end":{"line":13,"column":8}}]},"4":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":4},"end":{"line":22,"column":4}},{"start":{"line":22,"column":4},"end":{"line":22,"column":4}}]},"5":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"6":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":4},"end":{"line":29,"column":4}},{"start":{"line":29,"column":4},"end":{"line":29,"column":4}}]}},"code":["\"use strict\";","","function ProxyListener() {","    this.callbacks = null;","    this.owner = null;","}","","ProxyListener.prototype.deliver = function (spec,value,src) {","    if (this.callbacks===null) { return; }","    var that = this.owner || src;","    for(var i=0; i<this.callbacks.length; i++) {","        var cb = this.callbacks[i];","        if (cb.constructor===Function) {","            cb.call(that,spec,value,src);","        } else {","            cb.deliver(spec,value,src);","        }","    }","};","","ProxyListener.prototype.on = function (callback) {","    if (this.callbacks===null) { this.callbacks = []; }","    this.callbacks.push(callback);","};","","ProxyListener.prototype.off = function (callback) {","    if (this.callbacks===null) { return; }","    var i = this.callbacks.indexOf(callback);","    if (i!==-1) {","        this.callbacks.splice(i,1);","    } else {","        console.warn('listener unknown', callback);","    }","};","","module.exports = ProxyListener;",""],"l":{"3":1,"4":0,"5":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"16":0,"21":1,"22":0,"23":0,"26":1,"27":0,"28":0,"29":0,"30":0,"32":0,"36":1}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/CollectionMethodsMixin.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/CollectionMethodsMixin.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"b":{"1":[0,0],"2":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"(anonymous_1)","line":11,"loc":{"start":{"line":11,"column":19},"end":{"line":11,"column":39}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":20},"end":{"line":21,"column":40}}},"3":{"name":"(anonymous_3)","line":31,"loc":{"start":{"line":31,"column":24},"end":{"line":31,"column":44}}},"4":{"name":"checker","line":33,"loc":{"start":{"line":33,"column":8},"end":{"line":33,"column":27}}},"5":{"name":"(anonymous_5)","line":34,"loc":{"start":{"line":34,"column":43},"end":{"line":34,"column":60}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":52,"column":2}},"2":{"start":{"line":12,"column":8},"end":{"line":12,"column":33}},"3":{"start":{"line":13,"column":8},"end":{"line":13,"column":33}},"4":{"start":{"line":22,"column":8},"end":{"line":22,"column":34}},"5":{"start":{"line":32,"column":8},"end":{"line":32,"column":24}},"6":{"start":{"line":33,"column":8},"end":{"line":45,"column":9}},"7":{"start":{"line":34,"column":12},"end":{"line":36,"column":15}},"8":{"start":{"line":35,"column":16},"end":{"line":35,"column":39}},"9":{"start":{"line":37,"column":12},"end":{"line":44,"column":13}},"10":{"start":{"line":39,"column":16},"end":{"line":39,"column":27}},"11":{"start":{"line":42,"column":16},"end":{"line":42,"column":80}},"12":{"start":{"line":43,"column":16},"end":{"line":43,"column":62}},"13":{"start":{"line":46,"column":8},"end":{"line":50,"column":9}},"14":{"start":{"line":47,"column":12},"end":{"line":47,"column":22}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":39}}},"branchMap":{"1":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":12},"end":{"line":37,"column":12}},{"start":{"line":37,"column":12},"end":{"line":37,"column":12}}]},"2":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":8}},{"start":{"line":46,"column":8},"end":{"line":46,"column":8}}]}},"code":["\"use strict\";","","","module.exports = {","","    /**","     * Subscribe on collections entries' events","     * @param {function(Spec|string, Object, {deliver: function()})} callback","     * @this Set|Vector","     */","    onObjectEvent: function (callback) {","        this._proxy.owner = this;","        this._proxy.on(callback);","    },","","    /**","     * Unsubscribe from collections entries' events","     * @param {function(*)} callback","     * @this Set|Vector","     */","    offObjectEvent: function (callback) {","        this._proxy.off(callback);","    },","","    /**","     * Waits for collection to receive state from cache or uplink and then invokes passed callback","     *","     * @param {function()} callback","     * @this Set|Vector","     */","    onObjectStateReady: function (callback) { // TODO timeout ?","        var self = this;","        function checker() {","            var notInitedYet = self.filter(function (entry) {","                return !entry._version;","            });","            if (!notInitedYet.length) {","                // all entries are inited","                callback();","            } else {","                // wait for some entry not ready yet","                var randomIdx = (Math.random() * (notInitedYet.length - 1)) | 0;","                notInitedYet[randomIdx].once('init', checker);","            }","        }","        if (this._version) {","            checker();","        } else {","            this.once('init', checker);","        }","    }","};"],"l":{"4":1,"12":0,"13":0,"22":0,"32":0,"33":1,"34":0,"35":0,"37":0,"39":0,"42":0,"43":0,"46":0,"47":0,"49":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Vector.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Vector.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0,0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0},"fnMap":{"1":{"name":"(anonymous_1)","line":38,"loc":{"start":{"line":38,"column":12},"end":{"line":38,"column":40}}},"2":{"name":"(anonymous_2)","line":68,"loc":{"start":{"line":68,"column":12},"end":{"line":68,"column":40}}},"3":{"name":"(anonymous_3)","line":95,"loc":{"start":{"line":95,"column":16},"end":{"line":95,"column":28}}},"4":{"name":"fillAll","line":101,"loc":{"start":{"line":101,"column":16},"end":{"line":101,"column":48}}},"5":{"name":"(anonymous_5)","line":113,"loc":{"start":{"line":113,"column":10},"end":{"line":113,"column":22}}},"6":{"name":"(anonymous_6)","line":120,"loc":{"start":{"line":120,"column":15},"end":{"line":120,"column":31}}},"7":{"name":"(anonymous_7)","line":133,"loc":{"start":{"line":133,"column":12},"end":{"line":133,"column":24}}},"8":{"name":"(anonymous_8)","line":139,"loc":{"start":{"line":139,"column":21},"end":{"line":139,"column":45}}},"9":{"name":"(anonymous_9)","line":168,"loc":{"start":{"line":168,"column":17},"end":{"line":168,"column":31}}},"10":{"name":"(anonymous_10)","line":179,"loc":{"start":{"line":179,"column":17},"end":{"line":179,"column":43}}},"11":{"name":"(anonymous_11)","line":188,"loc":{"start":{"line":188,"column":20},"end":{"line":188,"column":46}}},"12":{"name":"(anonymous_12)","line":196,"loc":{"start":{"line":196,"column":17},"end":{"line":196,"column":39}}},"13":{"name":"(anonymous_13)","line":204,"loc":{"start":{"line":204,"column":14},"end":{"line":204,"column":43}}},"14":{"name":"(anonymous_14)","line":211,"loc":{"start":{"line":211,"column":13},"end":{"line":211,"column":37}}},"15":{"name":"(anonymous_15)","line":239,"loc":{"start":{"line":239,"column":18},"end":{"line":239,"column":33}}},"16":{"name":"(anonymous_16)","line":258,"loc":{"start":{"line":258,"column":12},"end":{"line":258,"column":33}}},"17":{"name":"(anonymous_17)","line":277,"loc":{"start":{"line":277,"column":17},"end":{"line":277,"column":37}}},"18":{"name":"(anonymous_18)","line":281,"loc":{"start":{"line":281,"column":18},"end":{"line":281,"column":39}}},"19":{"name":"append","line":291,"loc":{"start":{"line":291,"column":12},"end":{"line":291,"column":35}}},"20":{"name":"remove","line":295,"loc":{"start":{"line":295,"column":12},"end":{"line":295,"column":34}}},"21":{"name":"(anonymous_21)","line":305,"loc":{"start":{"line":305,"column":15},"end":{"line":305,"column":30}}},"22":{"name":"(anonymous_22)","line":309,"loc":{"start":{"line":309,"column":18},"end":{"line":309,"column":33}}},"23":{"name":"(anonymous_23)","line":313,"loc":{"start":{"line":313,"column":14},"end":{"line":313,"column":27}}},"24":{"name":"(anonymous_24)","line":317,"loc":{"start":{"line":317,"column":18},"end":{"line":317,"column":38}}},"25":{"name":"(anonymous_25)","line":320,"loc":{"start":{"line":320,"column":14},"end":{"line":320,"column":28}}},"26":{"name":"(anonymous_26)","line":323,"loc":{"start":{"line":323,"column":13},"end":{"line":323,"column":36}}},"27":{"name":"(anonymous_27)","line":327,"loc":{"start":{"line":327,"column":11},"end":{"line":327,"column":34}}},"28":{"name":"(anonymous_28)","line":331,"loc":{"start":{"line":331,"column":12},"end":{"line":331,"column":35}}},"29":{"name":"(anonymous_29)","line":335,"loc":{"start":{"line":335,"column":9},"end":{"line":335,"column":32}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":47}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":65}},"6":{"start":{"line":22,"column":0},"end":{"line":339,"column":3}},"7":{"start":{"line":41,"column":12},"end":{"line":41,"column":36}},"8":{"start":{"line":42,"column":12},"end":{"line":42,"column":37}},"9":{"start":{"line":43,"column":12},"end":{"line":43,"column":36}},"10":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"11":{"start":{"line":45,"column":16},"end":{"line":45,"column":60}},"12":{"start":{"line":47,"column":12},"end":{"line":47,"column":38}},"13":{"start":{"line":48,"column":12},"end":{"line":48,"column":71}},"14":{"start":{"line":48,"column":25},"end":{"line":48,"column":69}},"15":{"start":{"line":49,"column":12},"end":{"line":49,"column":38}},"16":{"start":{"line":50,"column":12},"end":{"line":52,"column":13}},"17":{"start":{"line":51,"column":16},"end":{"line":51,"column":55}},"18":{"start":{"line":53,"column":12},"end":{"line":55,"column":13}},"19":{"start":{"line":54,"column":16},"end":{"line":54,"column":62}},"20":{"start":{"line":56,"column":12},"end":{"line":56,"column":30}},"21":{"start":{"line":58,"column":12},"end":{"line":58,"column":61}},"22":{"start":{"line":59,"column":12},"end":{"line":59,"column":48}},"23":{"start":{"line":61,"column":12},"end":{"line":61,"column":50}},"24":{"start":{"line":62,"column":12},"end":{"line":62,"column":41}},"25":{"start":{"line":64,"column":12},"end":{"line":64,"column":32}},"26":{"start":{"line":69,"column":12},"end":{"line":69,"column":35}},"27":{"start":{"line":70,"column":12},"end":{"line":70,"column":40}},"28":{"start":{"line":71,"column":12},"end":{"line":71,"column":74}},"29":{"start":{"line":72,"column":12},"end":{"line":72,"column":66}},"30":{"start":{"line":73,"column":12},"end":{"line":75,"column":13}},"31":{"start":{"line":74,"column":16},"end":{"line":74,"column":49}},"32":{"start":{"line":76,"column":12},"end":{"line":80,"column":13}},"33":{"start":{"line":79,"column":16},"end":{"line":79,"column":23}},"34":{"start":{"line":81,"column":12},"end":{"line":81,"column":46}},"35":{"start":{"line":82,"column":12},"end":{"line":82,"column":45}},"36":{"start":{"line":83,"column":12},"end":{"line":83,"column":24}},"37":{"start":{"line":85,"column":12},"end":{"line":85,"column":33}},"38":{"start":{"line":102,"column":12},"end":{"line":108,"column":13}},"39":{"start":{"line":103,"column":16},"end":{"line":103,"column":43}},"40":{"start":{"line":104,"column":16},"end":{"line":104,"column":44}},"41":{"start":{"line":105,"column":16},"end":{"line":105,"column":48}},"42":{"start":{"line":106,"column":16},"end":{"line":106,"column":45}},"43":{"start":{"line":107,"column":16},"end":{"line":107,"column":36}},"44":{"start":{"line":115,"column":8},"end":{"line":115,"column":62}},"45":{"start":{"line":116,"column":8},"end":{"line":116,"column":52}},"46":{"start":{"line":117,"column":8},"end":{"line":117,"column":22}},"47":{"start":{"line":121,"column":8},"end":{"line":121,"column":34}},"48":{"start":{"line":122,"column":8},"end":{"line":128,"column":9}},"49":{"start":{"line":123,"column":12},"end":{"line":127,"column":13}},"50":{"start":{"line":124,"column":16},"end":{"line":124,"column":76}},"51":{"start":{"line":126,"column":16},"end":{"line":126,"column":54}},"52":{"start":{"line":129,"column":8},"end":{"line":129,"column":39}},"53":{"start":{"line":130,"column":8},"end":{"line":130,"column":19}},"54":{"start":{"line":134,"column":8},"end":{"line":134,"column":36}},"55":{"start":{"line":140,"column":8},"end":{"line":142,"column":9}},"56":{"start":{"line":141,"column":12},"end":{"line":141,"column":44}},"57":{"start":{"line":143,"column":8},"end":{"line":143,"column":17}},"58":{"start":{"line":144,"column":8},"end":{"line":152,"column":9}},"59":{"start":{"line":145,"column":12},"end":{"line":145,"column":46}},"60":{"start":{"line":146,"column":12},"end":{"line":148,"column":13}},"61":{"start":{"line":147,"column":16},"end":{"line":147,"column":54}},"62":{"start":{"line":149,"column":12},"end":{"line":149,"column":24}},"63":{"start":{"line":151,"column":12},"end":{"line":151,"column":42}},"64":{"start":{"line":154,"column":8},"end":{"line":164,"column":9}},"65":{"start":{"line":155,"column":12},"end":{"line":155,"column":38}},"66":{"start":{"line":156,"column":12},"end":{"line":158,"column":13}},"67":{"start":{"line":157,"column":16},"end":{"line":157,"column":22}},"68":{"start":{"line":159,"column":12},"end":{"line":159,"column":62}},"69":{"start":{"line":160,"column":12},"end":{"line":162,"column":13}},"70":{"start":{"line":161,"column":16},"end":{"line":161,"column":22}},"71":{"start":{"line":163,"column":12},"end":{"line":163,"column":45}},"72":{"start":{"line":165,"column":8},"end":{"line":165,"column":20}},"73":{"start":{"line":169,"column":8},"end":{"line":169,"column":41}},"74":{"start":{"line":170,"column":8},"end":{"line":172,"column":9}},"75":{"start":{"line":171,"column":12},"end":{"line":171,"column":54}},"76":{"start":{"line":173,"column":8},"end":{"line":173,"column":54}},"77":{"start":{"line":174,"column":8},"end":{"line":174,"column":24}},"78":{"start":{"line":180,"column":8},"end":{"line":180,"column":28}},"79":{"start":{"line":181,"column":8},"end":{"line":184,"column":9}},"80":{"start":{"line":182,"column":12},"end":{"line":182,"column":17}},"81":{"start":{"line":183,"column":12},"end":{"line":183,"column":36}},"82":{"start":{"line":185,"column":8},"end":{"line":185,"column":32}},"83":{"start":{"line":189,"column":8},"end":{"line":189,"column":21}},"84":{"start":{"line":190,"column":8},"end":{"line":192,"column":9}},"85":{"start":{"line":191,"column":12},"end":{"line":191,"column":34}},"86":{"start":{"line":193,"column":8},"end":{"line":193,"column":26}},"87":{"start":{"line":197,"column":8},"end":{"line":197,"column":36}},"88":{"start":{"line":198,"column":8},"end":{"line":200,"column":72}},"89":{"start":{"line":199,"column":12},"end":{"line":199,"column":24}},"90":{"start":{"line":201,"column":8},"end":{"line":201,"column":20}},"91":{"start":{"line":212,"column":8},"end":{"line":214,"column":9}},"92":{"start":{"line":213,"column":12},"end":{"line":213,"column":38}},"93":{"start":{"line":215,"column":8},"end":{"line":215,"column":50}},"94":{"start":{"line":240,"column":8},"end":{"line":242,"column":9}},"95":{"start":{"line":241,"column":12},"end":{"line":241,"column":24}},"96":{"start":{"line":243,"column":8},"end":{"line":243,"column":37}},"97":{"start":{"line":244,"column":8},"end":{"line":244,"column":31}},"98":{"start":{"line":245,"column":8},"end":{"line":245,"column":27}},"99":{"start":{"line":246,"column":8},"end":{"line":251,"column":9}},"100":{"start":{"line":247,"column":12},"end":{"line":247,"column":39}},"101":{"start":{"line":248,"column":12},"end":{"line":250,"column":13}},"102":{"start":{"line":249,"column":16},"end":{"line":249,"column":22}},"103":{"start":{"line":252,"column":8},"end":{"line":252,"column":17}},"104":{"start":{"line":260,"column":8},"end":{"line":262,"column":9}},"105":{"start":{"line":261,"column":12},"end":{"line":261,"column":21}},"106":{"start":{"line":263,"column":8},"end":{"line":265,"column":9}},"107":{"start":{"line":264,"column":12},"end":{"line":264,"column":41}},"108":{"start":{"line":266,"column":8},"end":{"line":270,"column":9}},"109":{"start":{"line":267,"column":12},"end":{"line":267,"column":31}},"110":{"start":{"line":269,"column":12},"end":{"line":269,"column":38}},"111":{"start":{"line":272,"column":8},"end":{"line":272,"column":62}},"112":{"start":{"line":274,"column":8},"end":{"line":274,"column":34}},"113":{"start":{"line":278,"column":8},"end":{"line":278,"column":30}},"114":{"start":{"line":282,"column":8},"end":{"line":284,"column":9}},"115":{"start":{"line":283,"column":12},"end":{"line":283,"column":39}},"116":{"start":{"line":285,"column":8},"end":{"line":287,"column":9}},"117":{"start":{"line":286,"column":12},"end":{"line":286,"column":41}},"118":{"start":{"line":288,"column":8},"end":{"line":288,"column":32}},"119":{"start":{"line":292,"column":8},"end":{"line":292,"column":49}},"120":{"start":{"line":296,"column":8},"end":{"line":298,"column":9}},"121":{"start":{"line":297,"column":12},"end":{"line":297,"column":41}},"122":{"start":{"line":299,"column":8},"end":{"line":299,"column":40}},"123":{"start":{"line":300,"column":8},"end":{"line":300,"column":42}},"124":{"start":{"line":301,"column":8},"end":{"line":301,"column":29}},"125":{"start":{"line":306,"column":8},"end":{"line":306,"column":25}},"126":{"start":{"line":310,"column":8},"end":{"line":310,"column":25}},"127":{"start":{"line":314,"column":8},"end":{"line":314,"column":32}},"128":{"start":{"line":324,"column":8},"end":{"line":324,"column":43}},"129":{"start":{"line":328,"column":8},"end":{"line":328,"column":48}},"130":{"start":{"line":332,"column":8},"end":{"line":332,"column":49}},"131":{"start":{"line":336,"column":8},"end":{"line":336,"column":46}}},"branchMap":{"1":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":44,"column":12}},{"start":{"line":44,"column":12},"end":{"line":44,"column":12}}]},"2":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":12},"end":{"line":48,"column":12}},{"start":{"line":48,"column":12},"end":{"line":48,"column":12}}]},"3":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":12},"end":{"line":50,"column":12}},{"start":{"line":50,"column":12},"end":{"line":50,"column":12}}]},"4":{"line":50,"type":"binary-expr","locations":[{"start":{"line":50,"column":16},"end":{"line":50,"column":21}},{"start":{"line":50,"column":25},"end":{"line":50,"column":40}}]},"5":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":12},"end":{"line":53,"column":12}},{"start":{"line":53,"column":12},"end":{"line":53,"column":12}}]},"6":{"line":58,"type":"cond-expr","locations":[{"start":{"line":58,"column":52},"end":{"line":58,"column":54}},{"start":{"line":58,"column":55},"end":{"line":58,"column":59}}]},"7":{"line":71,"type":"cond-expr","locations":[{"start":{"line":71,"column":40},"end":{"line":71,"column":69}},{"start":{"line":71,"column":72},"end":{"line":71,"column":73}}]},"8":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":12},"end":{"line":73,"column":12}},{"start":{"line":73,"column":12},"end":{"line":73,"column":12}}]},"9":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":12},"end":{"line":76,"column":12}},{"start":{"line":76,"column":12},"end":{"line":76,"column":12}}]},"10":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"11":{"line":123,"type":"if","locations":[{"start":{"line":123,"column":12},"end":{"line":123,"column":12}},{"start":{"line":123,"column":12},"end":{"line":123,"column":12}}]},"12":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":8},"end":{"line":140,"column":8}},{"start":{"line":140,"column":8},"end":{"line":140,"column":8}}]},"13":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":8},"end":{"line":144,"column":8}},{"start":{"line":144,"column":8},"end":{"line":144,"column":8}}]},"14":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":12},"end":{"line":146,"column":12}},{"start":{"line":146,"column":12},"end":{"line":146,"column":12}}]},"15":{"line":156,"type":"if","locations":[{"start":{"line":156,"column":12},"end":{"line":156,"column":12}},{"start":{"line":156,"column":12},"end":{"line":156,"column":12}}]},"16":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":12},"end":{"line":160,"column":12}},{"start":{"line":160,"column":12},"end":{"line":160,"column":12}}]},"17":{"line":160,"type":"binary-expr","locations":[{"start":{"line":160,"column":16},"end":{"line":160,"column":26}},{"start":{"line":160,"column":30},"end":{"line":160,"column":42}}]},"18":{"line":170,"type":"if","locations":[{"start":{"line":170,"column":8},"end":{"line":170,"column":8}},{"start":{"line":170,"column":8},"end":{"line":170,"column":8}}]},"19":{"line":173,"type":"binary-expr","locations":[{"start":{"line":173,"column":23},"end":{"line":173,"column":45}},{"start":{"line":173,"column":49},"end":{"line":173,"column":53}}]},"20":{"line":185,"type":"binary-expr","locations":[{"start":{"line":185,"column":15},"end":{"line":185,"column":26}},{"start":{"line":185,"column":30},"end":{"line":185,"column":31}}]},"21":{"line":197,"type":"binary-expr","locations":[{"start":{"line":197,"column":15},"end":{"line":197,"column":19}},{"start":{"line":197,"column":23},"end":{"line":197,"column":35}}]},"22":{"line":200,"type":"binary-expr","locations":[{"start":{"line":200,"column":17},"end":{"line":200,"column":28}},{"start":{"line":200,"column":32},"end":{"line":200,"column":70}}]},"23":{"line":212,"type":"if","locations":[{"start":{"line":212,"column":8},"end":{"line":212,"column":8}},{"start":{"line":212,"column":8},"end":{"line":212,"column":8}}]},"24":{"line":240,"type":"if","locations":[{"start":{"line":240,"column":8},"end":{"line":240,"column":8}},{"start":{"line":240,"column":8},"end":{"line":240,"column":8}}]},"25":{"line":240,"type":"binary-expr","locations":[{"start":{"line":240,"column":12},"end":{"line":240,"column":15}},{"start":{"line":240,"column":19},"end":{"line":240,"column":26}}]},"26":{"line":248,"type":"if","locations":[{"start":{"line":248,"column":12},"end":{"line":248,"column":12}},{"start":{"line":248,"column":12},"end":{"line":248,"column":12}}]},"27":{"line":248,"type":"binary-expr","locations":[{"start":{"line":248,"column":16},"end":{"line":248,"column":19}},{"start":{"line":248,"column":23},"end":{"line":248,"column":35}},{"start":{"line":248,"column":40},"end":{"line":248,"column":45}},{"start":{"line":248,"column":49},"end":{"line":248,"column":65}}]},"28":{"line":260,"type":"if","locations":[{"start":{"line":260,"column":8},"end":{"line":260,"column":8}},{"start":{"line":260,"column":8},"end":{"line":260,"column":8}}]},"29":{"line":263,"type":"if","locations":[{"start":{"line":263,"column":8},"end":{"line":263,"column":8}},{"start":{"line":263,"column":8},"end":{"line":263,"column":8}}]},"30":{"line":266,"type":"if","locations":[{"start":{"line":266,"column":8},"end":{"line":266,"column":8}},{"start":{"line":266,"column":8},"end":{"line":266,"column":8}}]},"31":{"line":266,"type":"binary-expr","locations":[{"start":{"line":266,"column":12},"end":{"line":266,"column":16}},{"start":{"line":266,"column":20},"end":{"line":266,"column":28}}]},"32":{"line":272,"type":"cond-expr","locations":[{"start":{"line":272,"column":30},"end":{"line":272,"column":34}},{"start":{"line":272,"column":37},"end":{"line":272,"column":61}}]},"33":{"line":282,"type":"if","locations":[{"start":{"line":282,"column":8},"end":{"line":282,"column":8}},{"start":{"line":282,"column":8},"end":{"line":282,"column":8}}]},"34":{"line":285,"type":"if","locations":[{"start":{"line":285,"column":8},"end":{"line":285,"column":8}},{"start":{"line":285,"column":8},"end":{"line":285,"column":8}}]},"35":{"line":296,"type":"if","locations":[{"start":{"line":296,"column":8},"end":{"line":296,"column":8}},{"start":{"line":296,"column":8},"end":{"line":296,"column":8}}]}},"code":["\"use strict\";","","var Spec = require('./Spec');","var LongSpec = require('./LongSpec');","var Syncable = require('./Syncable');","var ProxyListener = require('./ProxyListener');","var CollectionMethodsMixin = require('./CollectionMethodsMixin');","","/** In distributed environments, linear structures are tricky. It is always"," *  recommended to use (sorted) Set as your default collection type. Still, in"," *  some cases we need precisely a Vector, so here it is. Note that a vector can"," *  not prune its mutation history for quite a while, so it is better not to"," *  sort (reorder) it repeatedly. The perfect usage pattern is a growing vector+"," *  insert sort or no sort at all. If you need to re-shuffle a vector"," *  differently or replace its contents, you'd better create a new vector."," *  So, you've been warned."," *  Vector is implemented on top of a LongSpec, so the API is very much alike."," *  The replication/convergence/correctness algorithm is Causal Trees."," *"," *  TODO support JSON types (as a part of ref-gen-refac)"," */","module.exports = Syncable.extend('Vector', {","","    defaults: {","        _oplog: Object,","        _objects: Array,","        _order: LongSpec,","        _proxy: ProxyListener","    },","","    mixins: [","        CollectionMethodsMixin","    ],","","    ops: {  // operations is our assembly language","","        // insert an object","        in: function (spec, value, src) {","            // we misuse specifiers to express the operation in","            // a compact non-ambiguous way","            value = new Spec(value);","            var opid = spec.tok('!');","            var at = value.tok('!');","            if (opid<=at) {","                throw new Error('timestamps are messed up');","            }","            var what = value.tok('#');","            if (!what) { throw new Error('object #id not specified'); }","            var type = value.get('/');","            if (!type && this.objectType) {","                type = this.objectType.prototype._type;","            }","            if (!type) {","                throw new Error('object /type not specified');","            }","            type = '/' + type;","","            var pos = this.findPositionFor(opid, at?at:'!0');","            var obj = this._host.get(type+what);","","            this._objects.splice(pos.index,0,obj);","            this._order.insert(opid,pos);","","            obj.on(this._proxy);","        },","","        // remove an object","        rm: function (spec, value, src) {","            value = Spec.as(value);","            var target = value.tok('!');","            var hint = value.has('.') ? Spec.base2int(value.get('.')) : 0;","            var at = this._order.find(target, Math.max(0,hint-5));","            if (at.end()) {","                at = this._order.find(target, 0);","            }","            if (at.end()) {","                // this can only be explained by concurrent deletion","                // partial order can't break cause-and-effect ordering","                return;","            }","            var obj = this._objects[at.index];","            this._objects.splice(at.index,1);","            at.erase(1);","","            obj.off(this._proxy);","        }","","        /** Either thombstones or log  before HORIZON","        patch: function (spec, value, src) {","","        }*/","","    },","","    distillLog: function () {","        // TODO HORIZON","    },","","    reactions: {","","        'init': function fillAll (spec,val,src) { // TODO: reactions, state init tests","            for(var i=this._order.iterator(); !i.end(); i.next()) {","                var op = i.token() + '.in';","                var value = this._oplog[op];","                var obj = this.getObject(value);","                this._objects[i.index] = obj;","                obj.on(this._proxy);","            }","        }","","    },","","    pojo: function () {","        // invoke super.pojo()","        var result = Syncable._pt.pojo.apply(this, arguments);","        result.entries = Object.keys(this._objects);","        return result;","    },","","    getObject: function (spec) {","        spec = new Spec(spec,'#');","        if (!spec.has('/')) {","            if (this.objectType) {","                spec = spec.add(this.objectType.prototype._type,'/').sort();","            } else {","                throw new Error(\"type not specified\"); // TODO is it necessary at all?","            }","        }","        var obj = this._host.get(spec);","        return obj;","    },","","    length: function () {","        return this._objects.length;","    },","","    //  C A U S A L  T R E E S  M A G I C","","    findPositionFor: function (id, parentId) { // FIXME protected methods && statics (entryType)","        if (!parentId) {","            parentId = this.getParentOf(id);","        }","        var next;","        if (parentId!=='!0') {","            next = this._order.find(parentId);","            if (next.end()) {","                next = this.findPositionFor(parentId);","            }","            next.next();","        } else {","            next = this._order.iterator();","        }","        // skip \"younger\" concurrent siblings","        while (!next.end()) {","            var nextId = next.token();","            if (nextId<id) {","                break;","            }","            var subtreeId = this.inSubtreeOf(nextId,parentId);","            if (!subtreeId || subtreeId<id) {","                break;","            }","            this.skipSubtree(next,subtreeId);","        }","        return next; // insert before","    },","","    getParentOf: function (id) {","        var spec = this._oplog[id+'.in'];","        if (!spec) {","            throw new Error('operation unknown: '+id);","        }","        var parentId = Spec.as(spec).tok('!') || '!0';","        return parentId;","    },","","    /** returns the immediate child of the root node that is an ancestor","      * of the given node. */","    inSubtreeOf: function (nodeId, rootId) {","        var id=nodeId, p=id;","        while (id>rootId) {","            p=id;","            id=this.getParentOf(id);","        }","        return id===rootId && p;","    },","","    isDescendantOf: function (nodeId, rootId) {","        var i=nodeId;","        while (i>rootId) {","            i=this.getParentOf(i);","        }","        return i===rootId;","    },","","    skipSubtree: function (iter, root) {","        root = root || iter.token();","        do {","            iter.next();","        } while (!iter.end() && this.isDescendantOf(iter.token(),root));","        return iter;","    },","","    validate: function (spec, val, source) {","        // ref op is known","    },","","    //  A R R A Y - L I K E  A P I","    //  wrapper methods that convert into op calls above","","    indexOf: function (obj, startAt) {","        if (!obj._id) {","            obj = this.getObject(obj);","        }","        return this._objects.indexOf(obj,startAt);","    },","","    /*splice: function (offset, removeCount, insert) {","        var ref = offset===-1 ? '' : this._objects[offset];","        var del = [];","        var hint;","        for (var rm=1; rm<=removeCount; rm++) {","            del.push(this._order.entryAt(offset+rm));","        }","        for(var a=3; a<this.arguments.length; a++) {","            var arg = this.arguments[a];","            arg = _id in arg ? arg._id : arg;","            if (!Spec.isId(arg)) { throw new Error('malformed id: '+arg); }","            ins.push(arg);","        }","        while (rmid=del.pop()) {","            this.del(rmid+hint);","        }","        while (insid=ins.pop()) {","            this.ins(ref+insid+hint);","        }","    },*/","","    normalizePos: function (pos) {","        if (pos && pos._id) {","            pos=pos._id;","        }","        var spec = new Spec(pos,'#');","        var type = spec.type();","        var id = spec.id();","        for(var i=0; i<this._objects.length; i++) {","            var obj = this._objects[i];","            if (obj && obj._id===id && (!type || obj._type===type)) {","                break;","            }","        }","        return i;","    },","","    /** Assuming position 0 on the \"left\" and left-to-right writing, the","      * logic of causal tree insertion is","      * insert(newEntry, parentWhichIsOnTheLeftSide). */","    insert: function (spec, pos) {","        // TODO bulk insert: make'em siblings","        if (pos===undefined) {","            pos = -1; // TODO ? this._order.length()","        }","        if (pos.constructor!==Number) {","            pos = this.normalizePos(pos);","        }","        if (spec && spec._id) {","            spec = spec.spec();","        } else /*if (spec.constructor===String)*/ {","            spec = new Spec(spec,'#');","        }","        // TODO new object","        var opid = pos===-1 ? '!0' : this._order.tokenAt(pos);","        // TODO hint pos","        return this.in(spec+opid);","    },","","    insertAfter: function (obj, pos) {","        this.insert (obj,pos);","    },","","    insertBefore: function (spec, pos) {","        if (pos===undefined) {","            pos = this._order.length();","        }","        if (pos.constructor!==Number) {","            pos = this.normalizePos(pos);","        }","        this.insert(spec,pos-1);","    },","","    append: function append (spec) {","        this.insert(spec,this._order.length()-1);","    },","","    remove: function remove (pos) {","        if (pos.constructor!==Number) {","            pos = this.normalizePos(pos);","        }","        var hint = Spec.int2base(pos,0);","        var op = this._order.tokenAt(pos);","        this.rm(op+'.'+hint); // TODO generic spec quants","    },","","    // Set-compatible, in a sense","    addObject: function (obj) {","        this.append(obj);","    },","","    removeObject: function (pos) {","        this.remove(pos);","    },","","    objectAt: function (i) {","        return this._objects[i];","    },","","    insertSorted: function (obj, cmp) {","    },","","    setOrder: function (fn) {","    },","","    forEach: function (cb, thisArg) {","        this._objects.forEach(cb, thisArg);","    },","","    every: function (cb, thisArg) {","        return this._objects.every(cb, thisArg);","    },","","    filter: function (cb, thisArg) {","        return this._objects.filter(cb, thisArg);","    },","","    map: function (cb, thisArg) {","        return this._objects.map(cb, thisArg);","    }","","});",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"22":1,"41":0,"42":0,"43":0,"44":0,"45":0,"47":0,"48":0,"49":0,"50":0,"51":0,"53":0,"54":0,"56":0,"58":0,"59":0,"61":0,"62":0,"64":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"76":0,"79":0,"81":0,"82":0,"83":0,"85":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"115":0,"116":0,"117":0,"121":0,"122":0,"123":0,"124":0,"126":0,"129":0,"130":0,"134":0,"140":0,"141":0,"143":0,"144":0,"145":0,"146":0,"147":0,"149":0,"151":0,"154":0,"155":0,"156":0,"157":0,"159":0,"160":0,"161":0,"163":0,"165":0,"169":0,"170":0,"171":0,"173":0,"174":0,"180":0,"181":0,"182":0,"183":0,"185":0,"189":0,"190":0,"191":0,"193":0,"197":0,"198":0,"199":0,"201":0,"212":0,"213":0,"215":0,"240":0,"241":0,"243":0,"244":0,"245":0,"246":0,"247":0,"248":0,"249":0,"252":0,"260":0,"261":0,"263":0,"264":0,"266":0,"267":0,"269":0,"272":0,"274":0,"278":0,"282":0,"283":0,"285":0,"286":0,"288":0,"292":0,"296":0,"297":0,"299":0,"300":0,"301":0,"306":0,"310":0,"314":0,"324":0,"328":0,"332":0,"336":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Host.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Host.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":1,"27":1,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},"fnMap":{"1":{"name":"Host","line":17,"loc":{"start":{"line":17,"column":0},"end":{"line":17,"column":31}}},"2":{"name":"hashDistance","line":46,"loc":{"start":{"line":46,"column":20},"end":{"line":46,"column":53}}},"3":{"name":"(anonymous_3)","line":66,"loc":{"start":{"line":66,"column":13},"end":{"line":66,"column":40}}},"4":{"name":"(anonymous_4)","line":79,"loc":{"start":{"line":79,"column":10},"end":{"line":79,"column":37}}},"5":{"name":"(anonymous_5)","line":83,"loc":{"start":{"line":83,"column":9},"end":{"line":83,"column":35}}},"6":{"name":"hostAddPeer","line":106,"loc":{"start":{"line":106,"column":15},"end":{"line":106,"column":48}}},"7":{"name":"hostOn","line":137,"loc":{"start":{"line":137,"column":12},"end":{"line":137,"column":48}}},"8":{"name":"hostReOn","line":161,"loc":{"start":{"line":161,"column":14},"end":{"line":161,"column":48}}},"9":{"name":"(anonymous_9)","line":169,"loc":{"start":{"line":169,"column":13},"end":{"line":169,"column":44}}},"10":{"name":"hostReOff","line":174,"loc":{"start":{"line":174,"column":15},"end":{"line":174,"column":55}}},"11":{"name":"(anonymous_11)","line":180,"loc":{"start":{"line":180,"column":18},"end":{"line":180,"column":40}}},"12":{"name":"(anonymous_12)","line":208,"loc":{"start":{"line":208,"column":10},"end":{"line":208,"column":22}}},"13":{"name":"(anonymous_13)","line":223,"loc":{"start":{"line":223,"column":16},"end":{"line":223,"column":32}}},"14":{"name":"(anonymous_14)","line":254,"loc":{"start":{"line":254,"column":16},"end":{"line":254,"column":28}}},"15":{"name":"(anonymous_15)","line":263,"loc":{"start":{"line":263,"column":14},"end":{"line":263,"column":26}}},"16":{"name":"(anonymous_16)","line":267,"loc":{"start":{"line":267,"column":14},"end":{"line":267,"column":29}}},"17":{"name":"(anonymous_17)","line":276,"loc":{"start":{"line":276,"column":16},"end":{"line":276,"column":31}}},"18":{"name":"(anonymous_18)","line":285,"loc":{"start":{"line":285,"column":12},"end":{"line":285,"column":47}}},"19":{"name":"(anonymous_19)","line":290,"loc":{"start":{"line":290,"column":13},"end":{"line":290,"column":48}}},"20":{"name":"(anonymous_20)","line":296,"loc":{"start":{"line":296,"column":16},"end":{"line":296,"column":30}}},"21":{"name":"(anonymous_21)","line":311,"loc":{"start":{"line":311,"column":11},"end":{"line":311,"column":25}}},"22":{"name":"(anonymous_22)","line":323,"loc":{"start":{"line":323,"column":17},"end":{"line":323,"column":33}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":37}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":29}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":57}},"6":{"start":{"line":17,"column":0},"end":{"line":40,"column":1}},"7":{"start":{"line":18,"column":4},"end":{"line":18,"column":22}},"8":{"start":{"line":19,"column":4},"end":{"line":19,"column":22}},"9":{"start":{"line":20,"column":4},"end":{"line":20,"column":27}},"10":{"start":{"line":21,"column":4},"end":{"line":21,"column":22}},"11":{"start":{"line":22,"column":4},"end":{"line":22,"column":23}},"12":{"start":{"line":23,"column":4},"end":{"line":23,"column":18}},"13":{"start":{"line":24,"column":4},"end":{"line":24,"column":40}},"14":{"start":{"line":25,"column":4},"end":{"line":25,"column":55}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":47}},"16":{"start":{"line":28,"column":4},"end":{"line":31,"column":5}},"17":{"start":{"line":29,"column":8},"end":{"line":29,"column":46}},"18":{"start":{"line":30,"column":8},"end":{"line":30,"column":34}},"19":{"start":{"line":32,"column":4},"end":{"line":32,"column":37}},"20":{"start":{"line":34,"column":4},"end":{"line":39,"column":5}},"21":{"start":{"line":35,"column":8},"end":{"line":37,"column":9}},"22":{"start":{"line":36,"column":12},"end":{"line":36,"column":50}},"23":{"start":{"line":38,"column":8},"end":{"line":38,"column":29}},"24":{"start":{"line":42,"column":0},"end":{"line":42,"column":32}},"25":{"start":{"line":43,"column":0},"end":{"line":43,"column":32}},"26":{"start":{"line":44,"column":0},"end":{"line":44,"column":21}},"27":{"start":{"line":46,"column":0},"end":{"line":62,"column":2}},"28":{"start":{"line":47,"column":4},"end":{"line":52,"column":5}},"29":{"start":{"line":48,"column":8},"end":{"line":50,"column":9}},"30":{"start":{"line":49,"column":12},"end":{"line":49,"column":26}},"31":{"start":{"line":51,"column":8},"end":{"line":51,"column":30}},"32":{"start":{"line":53,"column":4},"end":{"line":55,"column":5}},"33":{"start":{"line":54,"column":8},"end":{"line":54,"column":24}},"34":{"start":{"line":56,"column":4},"end":{"line":56,"column":26}},"35":{"start":{"line":57,"column":4},"end":{"line":60,"column":5}},"36":{"start":{"line":58,"column":8},"end":{"line":58,"column":50}},"37":{"start":{"line":59,"column":8},"end":{"line":59,"column":42}},"38":{"start":{"line":61,"column":4},"end":{"line":61,"column":16}},"39":{"start":{"line":64,"column":0},"end":{"line":327,"column":3}},"40":{"start":{"line":67,"column":8},"end":{"line":76,"column":9}},"41":{"start":{"line":68,"column":12},"end":{"line":68,"column":43}},"42":{"start":{"line":69,"column":12},"end":{"line":69,"column":39}},"43":{"start":{"line":70,"column":12},"end":{"line":73,"column":13}},"44":{"start":{"line":72,"column":16},"end":{"line":72,"column":45}},"45":{"start":{"line":75,"column":12},"end":{"line":75,"column":55}},"46":{"start":{"line":84,"column":8},"end":{"line":86,"column":9}},"47":{"start":{"line":85,"column":12},"end":{"line":85,"column":46}},"48":{"start":{"line":87,"column":8},"end":{"line":87,"column":30}},"49":{"start":{"line":88,"column":8},"end":{"line":88,"column":39}},"50":{"start":{"line":89,"column":8},"end":{"line":91,"column":9}},"51":{"start":{"line":90,"column":12},"end":{"line":90,"column":44}},"52":{"start":{"line":92,"column":8},"end":{"line":92,"column":56}},"53":{"start":{"line":93,"column":8},"end":{"line":102,"column":9}},"54":{"start":{"line":94,"column":12},"end":{"line":94,"column":48}},"55":{"start":{"line":95,"column":12},"end":{"line":97,"column":13}},"56":{"start":{"line":96,"column":16},"end":{"line":96,"column":57}},"57":{"start":{"line":98,"column":12},"end":{"line":98,"column":47}},"58":{"start":{"line":99,"column":12},"end":{"line":101,"column":13}},"59":{"start":{"line":100,"column":16},"end":{"line":100,"column":40}},"60":{"start":{"line":103,"column":8},"end":{"line":103,"column":17}},"61":{"start":{"line":109,"column":8},"end":{"line":109,"column":41}},"62":{"start":{"line":110,"column":8},"end":{"line":112,"column":9}},"63":{"start":{"line":111,"column":12},"end":{"line":111,"column":60}},"64":{"start":{"line":114,"column":8},"end":{"line":114,"column":38}},"65":{"start":{"line":115,"column":8},"end":{"line":117,"column":9}},"66":{"start":{"line":116,"column":12},"end":{"line":116,"column":75}},"67":{"start":{"line":118,"column":8},"end":{"line":120,"column":9}},"68":{"start":{"line":119,"column":12},"end":{"line":119,"column":43}},"69":{"start":{"line":138,"column":12},"end":{"line":141,"column":13}},"70":{"start":{"line":140,"column":16},"end":{"line":140,"column":50}},"71":{"start":{"line":143,"column":12},"end":{"line":147,"column":13}},"72":{"start":{"line":144,"column":16},"end":{"line":144,"column":50}},"73":{"start":{"line":145,"column":19},"end":{"line":147,"column":13}},"74":{"start":{"line":146,"column":16},"end":{"line":146,"column":47}},"75":{"start":{"line":149,"column":12},"end":{"line":158,"column":13}},"76":{"start":{"line":150,"column":16},"end":{"line":150,"column":72}},"77":{"start":{"line":152,"column":16},"end":{"line":152,"column":47}},"78":{"start":{"line":153,"column":16},"end":{"line":155,"column":17}},"79":{"start":{"line":154,"column":20},"end":{"line":154,"column":55}},"80":{"start":{"line":156,"column":16},"end":{"line":156,"column":70}},"81":{"start":{"line":157,"column":16},"end":{"line":157,"column":52}},"82":{"start":{"line":162,"column":12},"end":{"line":164,"column":13}},"83":{"start":{"line":163,"column":16},"end":{"line":163,"column":60}},"84":{"start":{"line":165,"column":12},"end":{"line":165,"column":38}},"85":{"start":{"line":166,"column":12},"end":{"line":166,"column":39}},"86":{"start":{"line":170,"column":12},"end":{"line":170,"column":84}},"87":{"start":{"line":171,"column":12},"end":{"line":171,"column":42}},"88":{"start":{"line":175,"column":12},"end":{"line":175,"column":42}},"89":{"start":{"line":181,"column":8},"end":{"line":183,"column":9}},"90":{"start":{"line":182,"column":12},"end":{"line":182,"column":58}},"91":{"start":{"line":185,"column":8},"end":{"line":188,"column":9}},"92":{"start":{"line":186,"column":12},"end":{"line":186,"column":52}},"93":{"start":{"line":187,"column":12},"end":{"line":187,"column":19}},"94":{"start":{"line":189,"column":8},"end":{"line":189,"column":38}},"95":{"start":{"line":190,"column":8},"end":{"line":196,"column":9}},"96":{"start":{"line":191,"column":12},"end":{"line":191,"column":39}},"97":{"start":{"line":192,"column":12},"end":{"line":195,"column":13}},"98":{"start":{"line":193,"column":16},"end":{"line":193,"column":38}},"99":{"start":{"line":194,"column":16},"end":{"line":194,"column":36}},"100":{"start":{"line":209,"column":8},"end":{"line":209,"column":45}},"101":{"start":{"line":210,"column":8},"end":{"line":210,"column":27}},"102":{"start":{"line":211,"column":8},"end":{"line":211,"column":18}},"103":{"start":{"line":224,"column":8},"end":{"line":229,"column":31}},"104":{"start":{"line":231,"column":8},"end":{"line":236,"column":9}},"105":{"start":{"line":232,"column":12},"end":{"line":232,"column":58}},"106":{"start":{"line":233,"column":12},"end":{"line":233,"column":39}},"107":{"start":{"line":235,"column":12},"end":{"line":235,"column":39}},"108":{"start":{"line":238,"column":8},"end":{"line":247,"column":9}},"109":{"start":{"line":239,"column":12},"end":{"line":241,"column":13}},"110":{"start":{"line":240,"column":16},"end":{"line":240,"column":25}},"111":{"start":{"line":242,"column":12},"end":{"line":242,"column":53}},"112":{"start":{"line":243,"column":12},"end":{"line":246,"column":13}},"113":{"start":{"line":244,"column":16},"end":{"line":244,"column":47}},"114":{"start":{"line":245,"column":16},"end":{"line":245,"column":31}},"115":{"start":{"line":248,"column":8},"end":{"line":250,"column":9}},"116":{"start":{"line":249,"column":12},"end":{"line":249,"column":38}},"117":{"start":{"line":251,"column":8},"end":{"line":251,"column":23}},"118":{"start":{"line":255,"column":8},"end":{"line":259,"column":9}},"119":{"start":{"line":256,"column":12},"end":{"line":258,"column":13}},"120":{"start":{"line":257,"column":16},"end":{"line":257,"column":28}},"121":{"start":{"line":260,"column":8},"end":{"line":260,"column":21}},"122":{"start":{"line":264,"column":8},"end":{"line":264,"column":28}},"123":{"start":{"line":268,"column":8},"end":{"line":268,"column":30}},"124":{"start":{"line":269,"column":8},"end":{"line":271,"column":9}},"125":{"start":{"line":270,"column":12},"end":{"line":270,"column":38}},"126":{"start":{"line":272,"column":8},"end":{"line":272,"column":33}},"127":{"start":{"line":273,"column":8},"end":{"line":273,"column":19}},"128":{"start":{"line":277,"column":8},"end":{"line":277,"column":30}},"129":{"start":{"line":279,"column":8},"end":{"line":281,"column":9}},"130":{"start":{"line":280,"column":12},"end":{"line":280,"column":38}},"131":{"start":{"line":286,"column":8},"end":{"line":286,"column":48}},"132":{"start":{"line":291,"column":8},"end":{"line":291,"column":59}},"133":{"start":{"line":292,"column":8},"end":{"line":292,"column":68}},"134":{"start":{"line":293,"column":8},"end":{"line":293,"column":20}},"135":{"start":{"line":297,"column":8},"end":{"line":308,"column":9}},"136":{"start":{"line":298,"column":12},"end":{"line":300,"column":13}},"137":{"start":{"line":299,"column":16},"end":{"line":299,"column":25}},"138":{"start":{"line":301,"column":12},"end":{"line":304,"column":13}},"139":{"start":{"line":303,"column":16},"end":{"line":303,"column":25}},"140":{"start":{"line":305,"column":12},"end":{"line":305,"column":45}},"141":{"start":{"line":307,"column":12},"end":{"line":307,"column":72}},"142":{"start":{"line":312,"column":8},"end":{"line":315,"column":9}},"143":{"start":{"line":313,"column":12},"end":{"line":313,"column":42}},"144":{"start":{"line":313,"column":32},"end":{"line":313,"column":41}},"145":{"start":{"line":314,"column":12},"end":{"line":314,"column":32}},"146":{"start":{"line":316,"column":8},"end":{"line":320,"column":9}},"147":{"start":{"line":317,"column":12},"end":{"line":317,"column":35}},"148":{"start":{"line":318,"column":15},"end":{"line":320,"column":9}},"149":{"start":{"line":319,"column":12},"end":{"line":319,"column":17}}},"branchMap":{"1":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":19},"end":{"line":25,"column":32}},{"start":{"line":25,"column":36},"end":{"line":25,"column":54}}]},"2":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":40},"end":{"line":26,"column":42}},{"start":{"line":26,"column":44},"end":{"line":26,"column":45}}]},"3":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"5":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":8},"end":{"line":35,"column":8}},{"start":{"line":35,"column":8},"end":{"line":35,"column":8}}]},"6":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]},"7":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":8},"end":{"line":48,"column":8}},{"start":{"line":48,"column":8},"end":{"line":48,"column":8}}]},"8":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"9":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":8},"end":{"line":67,"column":8}},{"start":{"line":67,"column":8},"end":{"line":67,"column":8}}]},"10":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":12},"end":{"line":70,"column":12}},{"start":{"line":70,"column":12},"end":{"line":70,"column":12}}]},"11":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":8},"end":{"line":84,"column":8}},{"start":{"line":84,"column":8},"end":{"line":84,"column":8}}]},"12":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":12},"end":{"line":84,"column":16}},{"start":{"line":84,"column":20},"end":{"line":84,"column":49}},{"start":{"line":84,"column":53},"end":{"line":84,"column":73}}]},"13":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":8}},{"start":{"line":89,"column":8},"end":{"line":89,"column":8}}]},"14":{"line":92,"type":"binary-expr","locations":[{"start":{"line":92,"column":16},"end":{"line":92,"column":31}},{"start":{"line":92,"column":35},"end":{"line":92,"column":55}}]},"15":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":93,"column":8}},{"start":{"line":93,"column":8},"end":{"line":93,"column":8}}]},"16":{"line":95,"type":"if","locations":[{"start":{"line":95,"column":12},"end":{"line":95,"column":12}},{"start":{"line":95,"column":12},"end":{"line":95,"column":12}}]},"17":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":12},"end":{"line":99,"column":12}},{"start":{"line":99,"column":12},"end":{"line":99,"column":12}}]},"18":{"line":110,"type":"if","locations":[{"start":{"line":110,"column":8},"end":{"line":110,"column":8}},{"start":{"line":110,"column":8},"end":{"line":110,"column":8}}]},"19":{"line":115,"type":"if","locations":[{"start":{"line":115,"column":8},"end":{"line":115,"column":8}},{"start":{"line":115,"column":8},"end":{"line":115,"column":8}}]},"20":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":12},"end":{"line":138,"column":12}},{"start":{"line":138,"column":12},"end":{"line":138,"column":12}}]},"21":{"line":143,"type":"if","locations":[{"start":{"line":143,"column":12},"end":{"line":143,"column":12}},{"start":{"line":143,"column":12},"end":{"line":143,"column":12}}]},"22":{"line":143,"type":"binary-expr","locations":[{"start":{"line":143,"column":16},"end":{"line":143,"column":47}},{"start":{"line":143,"column":51},"end":{"line":143,"column":60}}]},"23":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":19},"end":{"line":145,"column":19}},{"start":{"line":145,"column":19},"end":{"line":145,"column":19}}]},"24":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":12},"end":{"line":149,"column":12}},{"start":{"line":149,"column":12},"end":{"line":149,"column":12}}]},"25":{"line":149,"type":"binary-expr","locations":[{"start":{"line":149,"column":16},"end":{"line":149,"column":32}},{"start":{"line":149,"column":36},"end":{"line":149,"column":60}}]},"26":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":16},"end":{"line":153,"column":16}},{"start":{"line":153,"column":16},"end":{"line":153,"column":16}}]},"27":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":12},"end":{"line":162,"column":12}},{"start":{"line":162,"column":12},"end":{"line":162,"column":12}}]},"28":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":8},"end":{"line":181,"column":8}},{"start":{"line":181,"column":8},"end":{"line":181,"column":8}}]},"29":{"line":185,"type":"if","locations":[{"start":{"line":185,"column":8},"end":{"line":185,"column":8}},{"start":{"line":185,"column":8},"end":{"line":185,"column":8}}]},"30":{"line":192,"type":"if","locations":[{"start":{"line":192,"column":12},"end":{"line":192,"column":12}},{"start":{"line":192,"column":12},"end":{"line":192,"column":12}}]},"31":{"line":231,"type":"if","locations":[{"start":{"line":231,"column":8},"end":{"line":231,"column":8}},{"start":{"line":231,"column":8},"end":{"line":231,"column":8}}]},"32":{"line":239,"type":"if","locations":[{"start":{"line":239,"column":12},"end":{"line":239,"column":12}},{"start":{"line":239,"column":12},"end":{"line":239,"column":12}}]},"33":{"line":243,"type":"if","locations":[{"start":{"line":243,"column":12},"end":{"line":243,"column":12}},{"start":{"line":243,"column":12},"end":{"line":243,"column":12}}]},"34":{"line":248,"type":"if","locations":[{"start":{"line":248,"column":8},"end":{"line":248,"column":8}},{"start":{"line":248,"column":8},"end":{"line":248,"column":8}}]},"35":{"line":256,"type":"if","locations":[{"start":{"line":256,"column":12},"end":{"line":256,"column":12}},{"start":{"line":256,"column":12},"end":{"line":256,"column":12}}]},"36":{"line":269,"type":"if","locations":[{"start":{"line":269,"column":8},"end":{"line":269,"column":8}},{"start":{"line":269,"column":8},"end":{"line":269,"column":8}}]},"37":{"line":279,"type":"if","locations":[{"start":{"line":279,"column":8},"end":{"line":279,"column":8}},{"start":{"line":279,"column":8},"end":{"line":279,"column":8}}]},"38":{"line":298,"type":"if","locations":[{"start":{"line":298,"column":12},"end":{"line":298,"column":12}},{"start":{"line":298,"column":12},"end":{"line":298,"column":12}}]},"39":{"line":298,"type":"binary-expr","locations":[{"start":{"line":298,"column":16},"end":{"line":298,"column":18}},{"start":{"line":298,"column":22},"end":{"line":298,"column":35}}]},"40":{"line":301,"type":"if","locations":[{"start":{"line":301,"column":12},"end":{"line":301,"column":12}},{"start":{"line":301,"column":12},"end":{"line":301,"column":12}}]},"41":{"line":313,"type":"if","locations":[{"start":{"line":313,"column":12},"end":{"line":313,"column":12}},{"start":{"line":313,"column":12},"end":{"line":313,"column":12}}]},"42":{"line":316,"type":"if","locations":[{"start":{"line":316,"column":8},"end":{"line":316,"column":8}},{"start":{"line":316,"column":8},"end":{"line":316,"column":8}}]},"43":{"line":318,"type":"if","locations":[{"start":{"line":318,"column":15},"end":{"line":318,"column":15}},{"start":{"line":318,"column":15},"end":{"line":318,"column":15}}]}},"code":["\"use strict\";","","var env = require('./env');","var Spec = require('./Spec');","var Syncable = require('./Syncable');","var Pipe = require('./Pipe');","var SecondPreciseClock = require('./SecondPreciseClock');","","/**"," * Host is (normally) a singleton object registering/coordinating"," * all the local Swarm objects, connecting them to appropriate"," * external uplinks, maintaining clocks, etc."," * Host itself is not fully synchronized like a Model but still"," * does some event gossiping with peer Hosts."," * @constructor"," */","function Host(id, ms, storage) {","    this.objects = {};","    this.sources = {};","    this.storage = storage;","    this._host = this; // :)","    this._lstn = [','];","    this._id = id;","    this._server = /^swarm~.*/.test(id);","    var clock_fn = env.clockType || SecondPreciseClock;","    this.clock = new clock_fn(this._id, ms||0);","","    if (this.storage) {","        this.sources[this._id] = this.storage;","        this.storage._host = this;","    }","    delete this.objects[this.spec()];","","    if (!env.multihost) {","        if (env.localhost) {","            throw new Error('use multihost mode');","        }","        env.localhost = this;","    }","}","","Host.MAX_INT = 9007199254740992;","Host.MAX_SYNC_TIME = 60 * 60000; // 1 hour (milliseconds)","Host.HASH_POINTS = 3;","","Host.hashDistance = function hashDistance(peer, obj) {","    if ((obj).constructor !== Number) {","        if (obj._id) {","            obj = obj._id;","        }","        obj = env.hashfn(obj);","    }","    if (peer._id) {","        peer = peer._id;","    }","    var dist = 4294967295;","    for (var i = 0; i < Host.HASH_POINTS; i++) {","        var hash = env.hashfn(peer._id + ':' + i);","        dist = Math.min(dist, hash ^ obj);","    }","    return dist;","};","","module.exports = Syncable.extend(Host, {","","    deliver: function (spec, val, repl) {","        if (spec.type() !== 'Host') {","            var typeid = spec.filter('/#');","            var obj = this.get(typeid);","            if (obj) {","                // TODO seeTimestamp()","                obj.deliver(spec, val, repl);","            }","        } else {","            this._super.deliver.apply(this, arguments);","        }","    },","","    init: function (spec, val, repl) {","","    },","","    get: function (spec, callback) {","        if (spec && spec.constructor === Function && spec.prototype._type) {","            spec = '/' + spec.prototype._type;","        }","        spec = new Spec(spec);","        var typeid = spec.filter('/#');","        if (!typeid.has('/')) {","            throw new Error('invalid spec');","        }","        var o = typeid.has('#') && this.objects[typeid];","        if (!o) {","            var t = Syncable.types[spec.type()];","            if (!t) {","                throw new Error('type unknown: ' + spec);","            }","            o = new t(typeid, undefined, this);","            if (typeof(callback) === 'function') {","                o.on('.init', callback);","            }","        }","        return o;","    },","","    addSource: function hostAddPeer(spec, peer) {","        //FIXME when their time is off so tell them so","        // if (false) { this.clockOffset; }","        var old = this.sources[peer._id];","        if (old) {","            old.deliver(this.newEventSpec('off'), '', this);","        }","","        this.sources[peer._id] = peer;","        if (spec.op() === 'on') {","            peer.deliver(this.newEventSpec('reon'), this.clock.ms(), this);","        }","        for (var sp in this.objects) {","            this.objects[sp].checkUplink();","        }","    },","","    neutrals: {","        /**","         * Host forwards on() calls to local objects to support some","         * shortcut notations, like","         *          host.on('/Mouse',callback)","         *          host.on('/Mouse.init',callback)","         *          host.on('/Mouse#Mickey',callback)","         *          host.on('/Mouse#Mickey.init',callback)","         *          host.on('/Mouse#Mickey!baseVersion',repl)","         *          host.on('/Mouse#Mickey!base.x',trackfn)","         * The target object may not exist beforehand.","         * Note that the specifier is actually the second 3sig parameter","         * (value). The 1st (spec) reflects this /Host.on invocation only.","         */","        on: function hostOn(spec, filter, lstn) {","            if (!filter) {","                // the subscriber needs \"all the events\"","                return this.addSource(spec, lstn);","            }","","            if (filter.constructor === Function && filter.id) {","                filter = new Spec(filter.id, '/');","            } else if (filter.constructor === String) {","                filter = new Spec(filter, '.');","            }","            // either suscribe to this Host or to some other object","            if (!filter.has('/') || filter.type() === 'Host') {","                this._super._neutrals.on.call(this, spec, filter, lstn);","            } else {","                var objSpec = new Spec(filter);","                if (!objSpec.has('#')) {","                    throw new Error('no id to listen');","                }","                objSpec = objSpec.set('.on').set(spec.version(), '!');","                this.deliver(objSpec, filter, lstn);","            }","        },","","        reon: function hostReOn(spec, ms, host) {","            if (spec.type() !== 'Host') {","                throw new Error('Host.reon(/NotHost.reon)');","            }","            this.clock.adjustTime(ms);","            this.addSource(spec, host);","        },","","        off: function (spec, nothing, peer) {","            peer.deliver(peer.spec().add(this.time(), '!').add('.reoff'), '', this);","            this.removeSource(spec, peer);","        },","","        reoff: function hostReOff(spec, nothing, peer) {","            this.removeSource(spec, peer);","        }","","    }, // neutrals","","    removeSource: function (spec, peer) {","        if (spec.type() !== 'Host') {","            throw new Error('Host.removeSource(/NoHost)');","        }","","        if (this.sources[peer._id] !== peer) {","            console.error('peer unknown', peer._id); //throw new Error","            return;","        }","        delete this.sources[peer._id];","        for (var sp in this.objects) {","            var obj = this.objects[sp];","            if (obj.getListenerIndex(peer, true) > -1) {","                obj.off(sp, '', peer);","                obj.checkUplink(sp);","            }","        }","    },","","","    /**","     * Returns an unique Lamport timestamp on every invocation.","     * Swarm employs 30bit integer Unix-like timestamps starting epoch at","     * 1 Jan 2010. Timestamps are encoded as 5-char base64 tokens; in case","     * several events are generated by the same process at the same second","     * then sequence number is added so a timestamp may be more than 5","     * chars. The id of the Host (+user~session) is appended to the ts.","     */","    time: function () {","        var ts = this.clock.issueTimestamp();","        this._version = ts;","        return ts;","    },","","    /**","     * Returns an array of sources (caches,storages,uplinks,peers)","     * a given replica should be subscribed to. This default","     * implementation uses a simple consistent hashing scheme.","     * Note that a client may be connected to many servers","     * (peers), so the uplink selection logic is shared.","     * @param {Spec} spec some object specifier","     * @returns {Array} array of currently available uplinks for specified object","     */","    getSources: function (spec) {","        var self = this,","            uplinks = [],","            mindist = 4294967295,","            rePeer = /^swarm~/, // peers, not clients","            target = env.hashfn(spec),","            closestPeer = null;","","        if (rePeer.test(this._id)) {","            mindist = Host.hashDistance(this._id, target);","            closestPeer = this.storage;","        } else {","            uplinks.push(self.storage); // client-side cache","        }","","        for (var id in this.sources) {","            if (!rePeer.test(id)) {","                continue;","            }","            var dist = Host.hashDistance(id, target);","            if (dist < mindist) {","                closestPeer = this.sources[id];","                mindist = dist;","            }","        }","        if (closestPeer) {","            uplinks.push(closestPeer);","        }","        return uplinks;","    },","","    isUplinked: function () {","        for (var id in this.sources) {","            if (/^swarm~.*/.test(id)) {","                return true;","            }","        }","        return false;","    },","","    isServer: function () {","        return this._server;","    },","","    register: function (obj) {","        var spec = obj.spec();","        if (spec in this.objects) {","            return this.objects[spec];","        }","        this.objects[spec] = obj;","        return obj;","    },","","    unregister: function (obj) {","        var spec = obj.spec();","        // TODO unsubscribe from the uplink - swarm-scale gc","        if (spec in this.objects) {","            delete this.objects[spec];","        }","    },","","    // waits for handshake from stream","    accept: function (stream_or_url, pipe_env) {","        new Pipe(this, stream_or_url, pipe_env);","    },","","    // initiate handshake with peer","    connect: function (stream_or_url, pipe_env) {","        var pipe = new Pipe(this, stream_or_url, pipe_env);","        pipe.deliver(new Spec('/Host#'+this._id+'!0.on'), '', this); //this.newEventSpec","        return pipe;","    },","","    disconnect: function (id) {","        for (var peer_id in this.sources) {","            if (id && peer_id != id) {","                continue;","            }","            if (peer_id === this._id) {","                // storage","                continue;","            }","            var peer = this.sources[peer_id];","            // normally, .off is sent by a downlink","            peer.deliver(peer.spec().add(this.time(), '!').add('.off'));","        }","    },","","    close: function (cb) {","        for(var id in this.sources) {","            if (id===this._id) {continue;}","            this.disconnect(id);","        }","        if (this.storage) {","            this.storage.close(cb);","        } else if (cb) {","            cb();","        }","    },","","    checkUplink: function (spec) {","        //  TBD Host event relay + PEX","    }","","});",""],"l":{"3":1,"4":1,"5":1,"6":1,"7":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"28":0,"29":0,"30":0,"32":0,"34":0,"35":0,"36":0,"38":0,"42":1,"43":1,"44":1,"46":1,"47":0,"48":0,"49":0,"51":0,"53":0,"54":0,"56":0,"57":0,"58":0,"59":0,"61":0,"64":1,"67":0,"68":0,"69":0,"70":0,"72":0,"75":0,"84":0,"85":0,"87":0,"88":0,"89":0,"90":0,"92":0,"93":0,"94":0,"95":0,"96":0,"98":0,"99":0,"100":0,"103":0,"109":0,"110":0,"111":0,"114":0,"115":0,"116":0,"118":0,"119":0,"138":0,"140":0,"143":0,"144":0,"145":0,"146":0,"149":0,"150":0,"152":0,"153":0,"154":0,"156":0,"157":0,"162":0,"163":0,"165":0,"166":0,"170":0,"171":0,"175":0,"181":0,"182":0,"185":0,"186":0,"187":0,"189":0,"190":0,"191":0,"192":0,"193":0,"194":0,"209":0,"210":0,"211":0,"224":0,"231":0,"232":0,"233":0,"235":0,"238":0,"239":0,"240":0,"242":0,"243":0,"244":0,"245":0,"248":0,"249":0,"251":0,"255":0,"256":0,"257":0,"260":0,"264":0,"268":0,"269":0,"270":0,"272":0,"273":0,"277":0,"279":0,"280":0,"286":0,"291":0,"292":0,"293":0,"297":0,"298":0,"299":0,"301":0,"303":0,"305":0,"307":0,"312":0,"313":0,"314":0,"316":0,"317":0,"318":0,"319":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Pipe.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Pipe.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":1,"31":1,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":1,"52":0,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":1,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":1,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":1,"117":0,"118":1,"119":0,"120":1,"121":0,"122":0,"123":0,"124":0,"125":0,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":1,"133":1,"134":1,"135":1,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"142":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0,0],"29":[0,0],"30":[0,0,0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0},"fnMap":{"1":{"name":"Pipe","line":16,"loc":{"start":{"line":16,"column":0},"end":{"line":16,"column":34}}},"2":{"name":"pc","line":59,"loc":{"start":{"line":59,"column":25},"end":{"line":59,"column":45}}},"3":{"name":"onMsg","line":63,"loc":{"start":{"line":63,"column":27},"end":{"line":63,"column":48}}},"4":{"name":"onConnectionClosed","line":78,"loc":{"start":{"line":78,"column":28},"end":{"line":78,"column":64}}},"5":{"name":"(anonymous_5)","line":83,"loc":{"start":{"line":83,"column":28},"end":{"line":83,"column":43}}},"6":{"name":"(anonymous_6)","line":94,"loc":{"start":{"line":94,"column":29},"end":{"line":94,"column":41}}},"7":{"name":"ph","line":106,"loc":{"start":{"line":106,"column":32},"end":{"line":106,"column":55}}},"8":{"name":"pc","line":139,"loc":{"start":{"line":139,"column":23},"end":{"line":139,"column":42}}},"9":{"name":"(anonymous_9)","line":148,"loc":{"start":{"line":148,"column":19},"end":{"line":148,"column":31}}},"10":{"name":"pd","line":178,"loc":{"start":{"line":178,"column":25},"end":{"line":178,"column":53}}},"11":{"name":"itsOverReally","line":184,"loc":{"start":{"line":184,"column":23},"end":{"line":184,"column":48}}},"12":{"name":"tickingBomb","line":190,"loc":{"start":{"line":190,"column":23},"end":{"line":190,"column":46}}},"13":{"name":"(anonymous_13)","line":212,"loc":{"start":{"line":212,"column":22},"end":{"line":212,"column":34}}},"14":{"name":"(anonymous_14)","line":217,"loc":{"start":{"line":217,"column":22},"end":{"line":217,"column":34}}},"15":{"name":"pb","line":224,"loc":{"start":{"line":224,"column":29},"end":{"line":224,"column":49}}},"16":{"name":"(anonymous_16)","line":233,"loc":{"start":{"line":233,"column":23},"end":{"line":233,"column":35}}},"17":{"name":"pS","line":250,"loc":{"start":{"line":250,"column":28},"end":{"line":250,"column":42}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":16,"column":0},"end":{"line":53,"column":1}},"4":{"start":{"line":17,"column":4},"end":{"line":17,"column":20}},"5":{"start":{"line":18,"column":4},"end":{"line":18,"column":27}},"6":{"start":{"line":19,"column":4},"end":{"line":21,"column":5}},"7":{"start":{"line":20,"column":8},"end":{"line":20,"column":56}},"8":{"start":{"line":22,"column":4},"end":{"line":22,"column":20}},"9":{"start":{"line":23,"column":4},"end":{"line":23,"column":21}},"10":{"start":{"line":28,"column":4},"end":{"line":28,"column":30}},"11":{"start":{"line":29,"column":4},"end":{"line":29,"column":59}},"12":{"start":{"line":30,"column":4},"end":{"line":30,"column":51}},"13":{"start":{"line":31,"column":4},"end":{"line":31,"column":24}},"14":{"start":{"line":32,"column":4},"end":{"line":32,"column":27}},"15":{"start":{"line":33,"column":4},"end":{"line":33,"column":52}},"16":{"start":{"line":34,"column":4},"end":{"line":34,"column":21}},"17":{"start":{"line":36,"column":4},"end":{"line":36,"column":39}},"18":{"start":{"line":38,"column":4},"end":{"line":51,"column":5}},"19":{"start":{"line":39,"column":8},"end":{"line":39,"column":36}},"20":{"start":{"line":40,"column":8},"end":{"line":40,"column":38}},"21":{"start":{"line":41,"column":8},"end":{"line":43,"column":9}},"22":{"start":{"line":42,"column":12},"end":{"line":42,"column":50}},"23":{"start":{"line":44,"column":8},"end":{"line":44,"column":39}},"24":{"start":{"line":45,"column":8},"end":{"line":45,"column":36}},"25":{"start":{"line":46,"column":8},"end":{"line":48,"column":9}},"26":{"start":{"line":47,"column":12},"end":{"line":47,"column":64}},"27":{"start":{"line":49,"column":8},"end":{"line":49,"column":23}},"28":{"start":{"line":50,"column":8},"end":{"line":50,"column":29}},"29":{"start":{"line":52,"column":4},"end":{"line":52,"column":25}},"30":{"start":{"line":55,"column":0},"end":{"line":55,"column":22}},"31":{"start":{"line":57,"column":0},"end":{"line":57,"column":21}},"32":{"start":{"line":59,"column":0},"end":{"line":92,"column":2}},"33":{"start":{"line":60,"column":4},"end":{"line":60,"column":20}},"34":{"start":{"line":61,"column":4},"end":{"line":61,"column":25}},"35":{"start":{"line":63,"column":4},"end":{"line":76,"column":7}},"36":{"start":{"line":64,"column":8},"end":{"line":64,"column":31}},"37":{"start":{"line":65,"column":8},"end":{"line":65,"column":59}},"38":{"start":{"line":66,"column":8},"end":{"line":66,"column":38}},"39":{"start":{"line":67,"column":8},"end":{"line":67,"column":47}},"40":{"start":{"line":68,"column":8},"end":{"line":74,"column":9}},"41":{"start":{"line":69,"column":12},"end":{"line":69,"column":74}},"42":{"start":{"line":71,"column":12},"end":{"line":71,"column":68}},"43":{"start":{"line":73,"column":12},"end":{"line":73,"column":25}},"44":{"start":{"line":75,"column":8},"end":{"line":75,"column":63}},"45":{"start":{"line":78,"column":4},"end":{"line":81,"column":7}},"46":{"start":{"line":79,"column":8},"end":{"line":79,"column":27}},"47":{"start":{"line":80,"column":8},"end":{"line":80,"column":36}},"48":{"start":{"line":83,"column":4},"end":{"line":85,"column":7}},"49":{"start":{"line":84,"column":8},"end":{"line":84,"column":49}},"50":{"start":{"line":87,"column":4},"end":{"line":87,"column":106}},"51":{"start":{"line":94,"column":0},"end":{"line":104,"column":2}},"52":{"start":{"line":95,"column":4},"end":{"line":97,"column":42}},"53":{"start":{"line":98,"column":4},"end":{"line":100,"column":5}},"54":{"start":{"line":99,"column":8},"end":{"line":99,"column":26}},"55":{"start":{"line":101,"column":4},"end":{"line":103,"column":5}},"56":{"start":{"line":102,"column":8},"end":{"line":102,"column":37}},"57":{"start":{"line":106,"column":0},"end":{"line":131,"column":2}},"58":{"start":{"line":107,"column":4},"end":{"line":107,"column":25}},"59":{"start":{"line":108,"column":4},"end":{"line":112,"column":5}},"60":{"start":{"line":109,"column":8},"end":{"line":109,"column":29}},"61":{"start":{"line":110,"column":8},"end":{"line":110,"column":31}},"62":{"start":{"line":111,"column":8},"end":{"line":111,"column":14}},"63":{"start":{"line":113,"column":4},"end":{"line":115,"column":5}},"64":{"start":{"line":114,"column":8},"end":{"line":114,"column":49}},"65":{"start":{"line":116,"column":4},"end":{"line":118,"column":5}},"66":{"start":{"line":117,"column":8},"end":{"line":117,"column":39}},"67":{"start":{"line":119,"column":4},"end":{"line":121,"column":5}},"68":{"start":{"line":120,"column":8},"end":{"line":120,"column":35}},"69":{"start":{"line":122,"column":4},"end":{"line":122,"column":25}},"70":{"start":{"line":123,"column":4},"end":{"line":123,"column":23}},"71":{"start":{"line":124,"column":4},"end":{"line":124,"column":46}},"72":{"start":{"line":126,"column":4},"end":{"line":130,"column":5}},"73":{"start":{"line":127,"column":8},"end":{"line":127,"column":47}},"74":{"start":{"line":129,"column":8},"end":{"line":129,"column":45}},"75":{"start":{"line":139,"column":0},"end":{"line":173,"column":2}},"76":{"start":{"line":140,"column":4},"end":{"line":140,"column":78}},"77":{"start":{"line":141,"column":4},"end":{"line":153,"column":5}},"78":{"start":{"line":142,"column":8},"end":{"line":144,"column":34}},"79":{"start":{"line":146,"column":8},"end":{"line":146,"column":77}},"80":{"start":{"line":148,"column":8},"end":{"line":150,"column":32}},"81":{"start":{"line":149,"column":12},"end":{"line":149,"column":48}},"82":{"start":{"line":152,"column":8},"end":{"line":152,"column":24}},"83":{"start":{"line":154,"column":4},"end":{"line":161,"column":5}},"84":{"start":{"line":155,"column":8},"end":{"line":159,"column":9}},"85":{"start":{"line":157,"column":12},"end":{"line":157,"column":82}},"86":{"start":{"line":158,"column":12},"end":{"line":158,"column":49}},"87":{"start":{"line":160,"column":8},"end":{"line":160,"column":25}},"88":{"start":{"line":162,"column":4},"end":{"line":165,"column":5}},"89":{"start":{"line":163,"column":8},"end":{"line":163,"column":36}},"90":{"start":{"line":164,"column":8},"end":{"line":164,"column":28}},"91":{"start":{"line":166,"column":4},"end":{"line":171,"column":5}},"92":{"start":{"line":167,"column":8},"end":{"line":169,"column":23}},"93":{"start":{"line":168,"column":12},"end":{"line":168,"column":32}},"94":{"start":{"line":170,"column":8},"end":{"line":170,"column":27}},"95":{"start":{"line":172,"column":4},"end":{"line":172,"column":20}},"96":{"start":{"line":178,"column":0},"end":{"line":209,"column":2}},"97":{"start":{"line":179,"column":4},"end":{"line":179,"column":20}},"98":{"start":{"line":180,"column":4},"end":{"line":180,"column":62}},"99":{"start":{"line":181,"column":4},"end":{"line":199,"column":5}},"100":{"start":{"line":182,"column":8},"end":{"line":198,"column":9}},"101":{"start":{"line":184,"column":12},"end":{"line":187,"column":18}},"102":{"start":{"line":185,"column":16},"end":{"line":185,"column":42}},"103":{"start":{"line":186,"column":16},"end":{"line":186,"column":29}},"104":{"start":{"line":188,"column":12},"end":{"line":188,"column":18}},"105":{"start":{"line":190,"column":12},"end":{"line":192,"column":21}},"106":{"start":{"line":191,"column":16},"end":{"line":191,"column":29}},"107":{"start":{"line":193,"column":12},"end":{"line":193,"column":18}},"108":{"start":{"line":195,"column":12},"end":{"line":195,"column":33}},"109":{"start":{"line":197,"column":12},"end":{"line":197,"column":34}},"110":{"start":{"line":200,"column":4},"end":{"line":200,"column":55}},"111":{"start":{"line":201,"column":4},"end":{"line":208,"column":5}},"112":{"start":{"line":202,"column":8},"end":{"line":202,"column":26}},"113":{"start":{"line":203,"column":11},"end":{"line":208,"column":5}},"114":{"start":{"line":204,"column":8},"end":{"line":206,"column":71}},"115":{"start":{"line":207,"column":8},"end":{"line":207,"column":74}},"116":{"start":{"line":212,"column":0},"end":{"line":212,"column":67}},"117":{"start":{"line":212,"column":36},"end":{"line":212,"column":64}},"118":{"start":{"line":217,"column":0},"end":{"line":219,"column":2}},"119":{"start":{"line":218,"column":4},"end":{"line":218,"column":57}},"120":{"start":{"line":224,"column":0},"end":{"line":239,"column":2}},"121":{"start":{"line":225,"column":4},"end":{"line":225,"column":42}},"122":{"start":{"line":227,"column":4},"end":{"line":227,"column":68}},"123":{"start":{"line":227,"column":27},"end":{"line":227,"column":66}},"124":{"start":{"line":228,"column":4},"end":{"line":228,"column":31}},"125":{"start":{"line":229,"column":4},"end":{"line":238,"column":5}},"126":{"start":{"line":230,"column":8},"end":{"line":230,"column":29}},"127":{"start":{"line":231,"column":8},"end":{"line":231,"column":52}},"128":{"start":{"line":232,"column":8},"end":{"line":237,"column":9}},"129":{"start":{"line":233,"column":12},"end":{"line":236,"column":18}},"130":{"start":{"line":234,"column":16},"end":{"line":234,"column":42}},"131":{"start":{"line":235,"column":16},"end":{"line":235,"column":29}},"132":{"start":{"line":241,"column":0},"end":{"line":241,"column":33}},"133":{"start":{"line":242,"column":0},"end":{"line":242,"column":35}},"134":{"start":{"line":243,"column":0},"end":{"line":243,"column":39}},"135":{"start":{"line":250,"column":0},"end":{"line":270,"column":2}},"136":{"start":{"line":251,"column":4},"end":{"line":251,"column":57}},"137":{"start":{"line":252,"column":4},"end":{"line":252,"column":21}},"138":{"start":{"line":253,"column":4},"end":{"line":256,"column":5}},"139":{"start":{"line":254,"column":8},"end":{"line":254,"column":31}},"140":{"start":{"line":255,"column":8},"end":{"line":255,"column":15}},"141":{"start":{"line":258,"column":4},"end":{"line":269,"column":5}},"142":{"start":{"line":259,"column":8},"end":{"line":259,"column":63}},"143":{"start":{"line":260,"column":8},"end":{"line":260,"column":35}},"144":{"start":{"line":261,"column":8},"end":{"line":261,"column":38}},"145":{"start":{"line":263,"column":8},"end":{"line":263,"column":60}},"146":{"start":{"line":264,"column":8},"end":{"line":266,"column":9}},"147":{"start":{"line":265,"column":12},"end":{"line":265,"column":43}},"148":{"start":{"line":268,"column":8},"end":{"line":268,"column":31}}},"branchMap":{"1":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":16},"end":{"line":18,"column":20}},{"start":{"line":18,"column":24},"end":{"line":18,"column":26}}]},"2":{"line":19,"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":19,"column":4}},{"start":{"line":19,"column":4},"end":{"line":19,"column":4}}]},"3":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":8},"end":{"line":19,"column":15}},{"start":{"line":19,"column":19},"end":{"line":19,"column":24}}]},"4":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":26},"end":{"line":29,"column":50}},{"start":{"line":29,"column":54},"end":{"line":29,"column":58}}]},"5":{"line":30,"type":"binary-expr","locations":[{"start":{"line":30,"column":22},"end":{"line":30,"column":42}},{"start":{"line":30,"column":46},"end":{"line":30,"column":50}}]},"6":{"line":36,"type":"binary-expr","locations":[{"start":{"line":36,"column":17},"end":{"line":36,"column":32}},{"start":{"line":36,"column":36},"end":{"line":36,"column":38}}]},"7":{"line":38,"type":"if","locations":[{"start":{"line":38,"column":4},"end":{"line":38,"column":4}},{"start":{"line":38,"column":4},"end":{"line":38,"column":4}}]},"8":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":8},"end":{"line":41,"column":8}},{"start":{"line":41,"column":8},"end":{"line":41,"column":8}}]},"9":{"line":46,"type":"if","locations":[{"start":{"line":46,"column":8},"end":{"line":46,"column":8}},{"start":{"line":46,"column":8},"end":{"line":46,"column":8}}]},"10":{"line":65,"type":"binary-expr","locations":[{"start":{"line":65,"column":8},"end":{"line":65,"column":17}},{"start":{"line":65,"column":21},"end":{"line":65,"column":58}}]},"11":{"line":69,"type":"cond-expr","locations":[{"start":{"line":69,"column":23},"end":{"line":69,"column":45}},{"start":{"line":69,"column":48},"end":{"line":69,"column":73}}]},"12":{"line":75,"type":"binary-expr","locations":[{"start":{"line":75,"column":30},"end":{"line":75,"column":54}},{"start":{"line":75,"column":58},"end":{"line":75,"column":62}}]},"13":{"line":98,"type":"if","locations":[{"start":{"line":98,"column":4},"end":{"line":98,"column":4}},{"start":{"line":98,"column":4},"end":{"line":98,"column":4}}]},"14":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]},"15":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":4},"end":{"line":113,"column":4}},{"start":{"line":113,"column":4},"end":{"line":113,"column":4}}]},"16":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":4},"end":{"line":116,"column":4}},{"start":{"line":116,"column":4},"end":{"line":116,"column":4}}]},"17":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":4},"end":{"line":119,"column":4}},{"start":{"line":119,"column":4},"end":{"line":119,"column":4}}]},"18":{"line":126,"type":"if","locations":[{"start":{"line":126,"column":4},"end":{"line":126,"column":4}},{"start":{"line":126,"column":4},"end":{"line":126,"column":4}}]},"19":{"line":140,"type":"cond-expr","locations":[{"start":{"line":140,"column":30},"end":{"line":140,"column":47}},{"start":{"line":140,"column":50},"end":{"line":140,"column":59}}]},"20":{"line":141,"type":"if","locations":[{"start":{"line":141,"column":4},"end":{"line":141,"column":4}},{"start":{"line":141,"column":4},"end":{"line":141,"column":4}}]},"21":{"line":141,"type":"binary-expr","locations":[{"start":{"line":141,"column":8},"end":{"line":141,"column":13}},{"start":{"line":141,"column":17},"end":{"line":141,"column":26}},{"start":{"line":141,"column":30},"end":{"line":141,"column":38}}]},"22":{"line":154,"type":"if","locations":[{"start":{"line":154,"column":4},"end":{"line":154,"column":4}},{"start":{"line":154,"column":4},"end":{"line":154,"column":4}}]},"23":{"line":155,"type":"if","locations":[{"start":{"line":155,"column":8},"end":{"line":155,"column":8}},{"start":{"line":155,"column":8},"end":{"line":155,"column":8}}]},"24":{"line":155,"type":"binary-expr","locations":[{"start":{"line":155,"column":12},"end":{"line":155,"column":39}},{"start":{"line":155,"column":43},"end":{"line":155,"column":51}}]},"25":{"line":157,"type":"cond-expr","locations":[{"start":{"line":157,"column":65},"end":{"line":157,"column":70}},{"start":{"line":157,"column":73},"end":{"line":157,"column":80}}]},"26":{"line":162,"type":"if","locations":[{"start":{"line":162,"column":4},"end":{"line":162,"column":4}},{"start":{"line":162,"column":4},"end":{"line":162,"column":4}}]},"27":{"line":166,"type":"if","locations":[{"start":{"line":166,"column":4},"end":{"line":166,"column":4}},{"start":{"line":166,"column":4},"end":{"line":166,"column":4}}]},"28":{"line":180,"type":"binary-expr","locations":[{"start":{"line":180,"column":4},"end":{"line":180,"column":7}},{"start":{"line":180,"column":11},"end":{"line":180,"column":35}},{"start":{"line":180,"column":40},"end":{"line":180,"column":60}}]},"29":{"line":181,"type":"if","locations":[{"start":{"line":181,"column":4},"end":{"line":181,"column":4}},{"start":{"line":181,"column":4},"end":{"line":181,"column":4}}]},"30":{"line":182,"type":"switch","locations":[{"start":{"line":183,"column":8},"end":{"line":188,"column":18}},{"start":{"line":189,"column":8},"end":{"line":193,"column":18}},{"start":{"line":194,"column":8},"end":{"line":195,"column":33}},{"start":{"line":196,"column":8},"end":{"line":197,"column":34}}]},"31":{"line":200,"type":"cond-expr","locations":[{"start":{"line":200,"column":44},"end":{"line":200,"column":48}},{"start":{"line":200,"column":51},"end":{"line":200,"column":54}}]},"32":{"line":201,"type":"if","locations":[{"start":{"line":201,"column":4},"end":{"line":201,"column":4}},{"start":{"line":201,"column":4},"end":{"line":201,"column":4}}]},"33":{"line":203,"type":"if","locations":[{"start":{"line":203,"column":11},"end":{"line":203,"column":11}},{"start":{"line":203,"column":11},"end":{"line":203,"column":11}}]},"34":{"line":206,"type":"cond-expr","locations":[{"start":{"line":206,"column":41},"end":{"line":206,"column":51}},{"start":{"line":206,"column":54},"end":{"line":206,"column":70}}]},"35":{"line":218,"type":"cond-expr","locations":[{"start":{"line":218,"column":22},"end":{"line":218,"column":51}},{"start":{"line":218,"column":54},"end":{"line":218,"column":56}}]},"36":{"line":227,"type":"binary-expr","locations":[{"start":{"line":227,"column":27},"end":{"line":227,"column":31}},{"start":{"line":227,"column":35},"end":{"line":227,"column":65}}]},"37":{"line":232,"type":"if","locations":[{"start":{"line":232,"column":8},"end":{"line":232,"column":8}},{"start":{"line":232,"column":8},"end":{"line":232,"column":8}}]},"38":{"line":232,"type":"binary-expr","locations":[{"start":{"line":232,"column":12},"end":{"line":232,"column":34}},{"start":{"line":232,"column":38},"end":{"line":232,"column":59}}]},"39":{"line":253,"type":"if","locations":[{"start":{"line":253,"column":4},"end":{"line":253,"column":4}},{"start":{"line":253,"column":4},"end":{"line":253,"column":4}}]},"40":{"line":259,"type":"binary-expr","locations":[{"start":{"line":259,"column":8},"end":{"line":259,"column":17}},{"start":{"line":259,"column":21},"end":{"line":259,"column":62}}]},"41":{"line":264,"type":"if","locations":[{"start":{"line":264,"column":8},"end":{"line":264,"column":8}},{"start":{"line":264,"column":8},"end":{"line":264,"column":8}}]}},"code":["\"use strict\";","","var env = require('./env');","var Spec = require('./Spec');","","/**"," * A \"pipe\" is a channel to a remote Swarm Host. Pipe's interface"," * mocks a Host except all calls are serialized and sent to the"," * *stream*; any arriving data is parsed and delivered to the"," * local host. The *stream* must support an interface of write(),"," * end() and on('open'|'data'|'close'|'error',fn).  Instead of a"," * *stream*, the caller may supply an *uri*, so the Pipe will"," * create a stream and connect/reconnect as necessary."," */","","function Pipe(host, stream, opts) {","    var self = this;","    self.opts = opts || {};","    if (!stream || !host) {","        throw new Error('new Pipe(host,stream[,opts])');","    }","    self._id = null;","    self.host = host;","    // uplink/downlink state flag;","    //  true: this side initiated handshake >.on <.reon","    //  false: this side received handshake <.on >.reon","    //  undefined: nothing sent/received OR had a .reoff","    this.isOnSent = undefined;","    this.reconnectDelay = self.opts.reconnectDelay || 1000;","    self.serializer = self.opts.serializer || JSON;","    self.katimer = null;","    self.send_timer = null;","    self.lastSendTS = self.lastRecvTS = self.time();","    self.bundle = {};","    // don't send immediately, delay to bundle more messages","    self.delay = self.opts.delay || -1;","    //self.reconnectDelay = self.opts.reconnectDelay || 1000;","    if (typeof(stream.write) !== 'function') { // TODO nicer","        var url = stream.toString();","        var m = url.match(/(\\w+):.*/);","        if (!m) {","            throw new Error('invalid url ' + url);","        }","        var proto = m[1].toLowerCase();","        var fn = env.streams[proto];","        if (!fn) {","            throw new Error('protocol not supported: ' + proto);","        }","        self.url = url;","        stream = new fn(url);","    }","    self.connect(stream);","}","","module.exports = Pipe;","//env.streams = {};","Pipe.TIMEOUT = 60000; //ms","","Pipe.prototype.connect = function pc(stream) {","    var self = this;","    self.stream = stream;","","    self.stream.on('data', function onMsg(data) {","        data = data.toString();","        env.trace && env.log(dotIn, data, this, this.host);","        self.lastRecvTS = self.time();","        var json = self.serializer.parse(data);","        try {","            self._id ? self.parseBundle(json) : self.parseHandshake(json);","        } catch (ex) {","            console.error('error processing message', ex, ex.stack);","            //this.deliver(this.host.newEventSpec('error'), ex.message);","            this.close();","        }","        self.reconnectDelay = self.opts.reconnectDelay || 1000;","    });","","    self.stream.on('close', function onConnectionClosed(reason) {","        self.stream = null; // needs no further attention","        self.close(\"stream closed\");","    });","","    self.stream.on('error', function (err) {","        self.close('stream error event: ' + err);","    });","","    self.katimer = setInterval(self.keepAliveFn.bind(self), (Pipe.TIMEOUT / 4 + Math.random() * 100) | 0);","","    // NOPE client only finally, initiate handshake","    // self.host.connect(self);","","};","","Pipe.prototype.keepAliveFn = function () {","    var now = this.time(),","        sinceRecv = now - this.lastRecvTS,","        sinceSend = now - this.lastSendTS;","    if (sinceSend > Pipe.TIMEOUT / 2) {","        this.sendBundle();","    }","    if (sinceRecv > Pipe.TIMEOUT) {","        this.close(\"stream timeout\");","    }","};","","Pipe.prototype.parseHandshake = function ph(handshake) {","    var spec, value, key;","    for (key in handshake) {","        spec = new Spec(key);","        value = handshake[key];","        break; // 8)-","    }","    if (!spec) {","        throw new Error('handshake has no spec');","    }","    if (spec.type() !== 'Host') {","        env.warn(\"non-Host handshake\");","    }","    if (spec.id() === this.host._id) {","        throw new Error('self hs');","    }","    this._id = spec.id();","    var op = spec.op();","    var evspec = spec.set(this.host._id, '#');","","    if (op in {on: 1, reon: 1, off: 1, reoff: 1}) {// access denied TODO","        this.host.deliver(evspec, value, this);","    } else {","        throw new Error('invalid handshake');","    }","};","","/**"," * Close the underlying stream."," * Schedule new Pipe creation (when error passed)."," * note: may be invoked multiple times"," * @param {Error|string} error"," */","Pipe.prototype.close = function pc(error) {","    env.log(dotClose, error ? 'error: ' + error : 'correct', this, this.host);","    if (error && this.host && this.url) {","        var uplink_uri = this.url,","            host = this.host,","            pipe_opts = this.opts;","        //reconnect delay for next disconnection","        pipe_opts.reconnectDelay = Math.min(30000, this.reconnectDelay << 1);","        // schedule a retry","        setTimeout(function () {","            host.connect(uplink_uri, pipe_opts);","        }, this.reconnectDelay);","","        this.url = null; //to prevent second reconnection timer","    }","    if (this.host) {","        if (this.isOnSent !== undefined && this._id) {","            // emulate normal off","            var offspec = this.host.newEventSpec(this.isOnSent ? 'off' : 'reoff');","            this.host.deliver(offspec, '', this);","        }","        this.host = null; // can't pass any more messages","    }","    if (this.katimer) {","        clearInterval(this.katimer);","        this.katimer = null;","    }","    if (this.stream) {","        try {","            this.stream.close();","        } catch (ex) {}","        this.stream = null;","    }","    this._id = null;","};","","/**"," * Sends operation to remote"," */","Pipe.prototype.deliver = function pd(spec, val, src) {","    var self = this;","    val && val.constructor === Spec && (val = val.toString());","    if (spec.type() === 'Host') {","        switch (spec.op()) {","        case 'reoff':","            setTimeout(function itsOverReally() {","                self.isOnSent = undefined;","                self.close();","            }, 1);","            break;","        case 'off':","            setTimeout(function tickingBomb() {","                self.close();","            }, 5000);","            break;","        case 'on':","            this.isOnSent = true;","        case 'reon':","            this.isOnSent = false;","        }","    }","    this.bundle[spec] = val === undefined ? null : val; // TODO aggregation","    if (this.delay === -1) {","        this.sendBundle();","    } else if (!this.send_timer) {","        var now = this.time(),","            gap = now - this.lastSendTS,","            timeout = gap > this.delay ? this.delay : this.delay - gap;","        this.send_timer = setTimeout(this.sendBundle.bind(this), timeout); // hmmm...","    } // else {} // just wait","};","","/** @returns {number} milliseconds as an int */","Pipe.prototype.time = function () { return new Date().getTime(); };","","/**"," * @returns {Spec|string} remote host spec \"/Host#peer_id\" or empty string (when not handshaken yet)"," */","Pipe.prototype.spec = function () {","    return this._id ? new Spec('/Host#' + this._id) : '';","};","/**"," * @param {*} bundle is a bunch of operations in a form {operation_spec: operation_params_object}"," * @private"," */","Pipe.prototype.parseBundle = function pb(bundle) {","    var spec_list = [], spec, self = this;","    //parse specifiers","    for (spec in bundle) { spec && spec_list.push(new Spec(spec)); }","    spec_list.sort().reverse();","    while (spec = spec_list.pop()) {","        spec = Spec.as(spec);","        this.host.deliver(spec, bundle[spec], this);","        if (spec.type() === 'Host' && spec.op() === 'reoff') { //TODO check #id","            setTimeout(function () {","                self.isOnSent = undefined;","                self.close();","            }, 1);","        }","    }","};","","var dotIn = new Spec('/Pipe.in');","var dotOut = new Spec('/Pipe.out');","var dotClose = new Spec('/Pipe.close');","//var dotOpen = new Spec('/Pipe.open');","","/**"," * Sends operations buffered in this.bundle as a bundle {operation_spec: operation_params_object}"," * @private"," */","Pipe.prototype.sendBundle = function pS() {","    var payload = this.serializer.stringify(this.bundle);","    this.bundle = {};","    if (!this.stream) {","        this.send_timer = null;","        return; // too late","    }","","    try {","        env.trace && env.log(dotOut, payload, this, this.host);","        this.stream.write(payload);","        this.lastSendTS = this.time();","    } catch (ex) {","        env.error('stream error on write: ' + ex, ex.stack);","        if (this._id) {","            this.close('stream error', ex);","        }","    } finally {","        this.send_timer = null;","    }","};",""],"l":{"3":1,"4":1,"16":1,"17":0,"18":0,"19":0,"20":0,"22":0,"23":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"36":0,"38":0,"39":0,"40":0,"41":0,"42":0,"44":0,"45":0,"46":0,"47":0,"49":0,"50":0,"52":0,"55":1,"57":1,"59":1,"60":0,"61":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"71":0,"73":0,"75":0,"78":0,"79":0,"80":0,"83":0,"84":0,"87":0,"94":1,"95":0,"98":0,"99":0,"101":0,"102":0,"106":1,"107":0,"108":0,"109":0,"110":0,"111":0,"113":0,"114":0,"116":0,"117":0,"119":0,"120":0,"122":0,"123":0,"124":0,"126":0,"127":0,"129":0,"139":1,"140":0,"141":0,"142":0,"146":0,"148":0,"149":0,"152":0,"154":0,"155":0,"157":0,"158":0,"160":0,"162":0,"163":0,"164":0,"166":0,"167":0,"168":0,"170":0,"172":0,"178":1,"179":0,"180":0,"181":0,"182":0,"184":0,"185":0,"186":0,"188":0,"190":0,"191":0,"193":0,"195":0,"197":0,"200":0,"201":0,"202":0,"203":0,"204":0,"207":0,"212":1,"217":1,"218":0,"224":1,"225":0,"227":0,"228":0,"229":0,"230":0,"231":0,"232":0,"233":0,"234":0,"235":0,"241":1,"242":1,"243":1,"250":1,"251":0,"252":0,"253":0,"254":0,"255":0,"258":0,"259":0,"260":0,"261":0,"263":0,"264":0,"265":0,"268":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/SecondPreciseClock.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/SecondPreciseClock.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":0,"26":0,"27":0,"28":1,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":1,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":1,"69":0,"70":0,"71":0,"72":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"(anonymous_1)","line":20,"loc":{"start":{"line":20,"column":25},"end":{"line":20,"column":60}}},"2":{"name":"(anonymous_2)","line":42,"loc":{"start":{"line":42,"column":42},"end":{"line":42,"column":60}}},"3":{"name":"(anonymous_3)","line":55,"loc":{"start":{"line":55,"column":34},"end":{"line":55,"column":46}}},"4":{"name":"(anonymous_4)","line":61,"loc":{"start":{"line":61,"column":39},"end":{"line":61,"column":51}}},"5":{"name":"time","line":67,"loc":{"start":{"line":67,"column":46},"end":{"line":67,"column":63}}},"6":{"name":"parse","line":84,"loc":{"start":{"line":84,"column":46},"end":{"line":84,"column":66}}},"7":{"name":"see","line":100,"loc":{"start":{"line":100,"column":46},"end":{"line":100,"column":64}}},"8":{"name":"(anonymous_8)","line":113,"loc":{"start":{"line":113,"column":46},"end":{"line":113,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":20,"column":0},"end":{"line":37,"column":2}},"3":{"start":{"line":21,"column":4},"end":{"line":23,"column":5}},"4":{"start":{"line":22,"column":8},"end":{"line":22,"column":58}},"5":{"start":{"line":24,"column":4},"end":{"line":24,"column":24}},"6":{"start":{"line":26,"column":4},"end":{"line":26,"column":27}},"7":{"start":{"line":27,"column":4},"end":{"line":27,"column":28}},"8":{"start":{"line":32,"column":4},"end":{"line":32,"column":26}},"9":{"start":{"line":33,"column":4},"end":{"line":33,"column":25}},"10":{"start":{"line":34,"column":4},"end":{"line":36,"column":5}},"11":{"start":{"line":35,"column":8},"end":{"line":35,"column":42}},"12":{"start":{"line":39,"column":0},"end":{"line":39,"column":58}},"13":{"start":{"line":40,"column":0},"end":{"line":40,"column":47}},"14":{"start":{"line":42,"column":0},"end":{"line":53,"column":2}},"15":{"start":{"line":43,"column":4},"end":{"line":43,"column":30}},"16":{"start":{"line":44,"column":4},"end":{"line":44,"column":43}},"17":{"start":{"line":45,"column":4},"end":{"line":45,"column":39}},"18":{"start":{"line":46,"column":4},"end":{"line":46,"column":35}},"19":{"start":{"line":47,"column":4},"end":{"line":47,"column":26}},"20":{"start":{"line":48,"column":4},"end":{"line":48,"column":25}},"21":{"start":{"line":49,"column":4},"end":{"line":49,"column":28}},"22":{"start":{"line":50,"column":4},"end":{"line":52,"column":5}},"23":{"start":{"line":51,"column":8},"end":{"line":51,"column":62}},"24":{"start":{"line":55,"column":0},"end":{"line":59,"column":2}},"25":{"start":{"line":56,"column":4},"end":{"line":56,"column":38}},"26":{"start":{"line":57,"column":4},"end":{"line":57,"column":39}},"27":{"start":{"line":58,"column":4},"end":{"line":58,"column":18}},"28":{"start":{"line":61,"column":0},"end":{"line":65,"column":2}},"29":{"start":{"line":62,"column":4},"end":{"line":62,"column":27}},"30":{"start":{"line":63,"column":4},"end":{"line":63,"column":33}},"31":{"start":{"line":64,"column":4},"end":{"line":64,"column":29}},"32":{"start":{"line":67,"column":0},"end":{"line":80,"column":2}},"33":{"start":{"line":68,"column":4},"end":{"line":68,"column":29}},"34":{"start":{"line":69,"column":4},"end":{"line":69,"column":59}},"35":{"start":{"line":69,"column":33},"end":{"line":69,"column":57}},"36":{"start":{"line":70,"column":4},"end":{"line":70,"column":57}},"37":{"start":{"line":70,"column":33},"end":{"line":70,"column":55}},"38":{"start":{"line":71,"column":4},"end":{"line":71,"column":28}},"39":{"start":{"line":72,"column":4},"end":{"line":72,"column":33}},"40":{"start":{"line":73,"column":4},"end":{"line":73,"column":68}},"41":{"start":{"line":73,"column":23},"end":{"line":73,"column":67}},"42":{"start":{"line":75,"column":4},"end":{"line":75,"column":44}},"43":{"start":{"line":76,"column":4},"end":{"line":76,"column":54}},"44":{"start":{"line":76,"column":17},"end":{"line":76,"column":52}},"45":{"start":{"line":78,"column":4},"end":{"line":78,"column":53}},"46":{"start":{"line":79,"column":4},"end":{"line":79,"column":30}},"47":{"start":{"line":84,"column":0},"end":{"line":96,"column":2}},"48":{"start":{"line":85,"column":4},"end":{"line":85,"column":36}},"49":{"start":{"line":86,"column":4},"end":{"line":86,"column":58}},"50":{"start":{"line":86,"column":13},"end":{"line":86,"column":57}},"51":{"start":{"line":87,"column":4},"end":{"line":87,"column":21}},"52":{"start":{"line":88,"column":4},"end":{"line":88,"column":60}},"53":{"start":{"line":89,"column":4},"end":{"line":91,"column":5}},"54":{"start":{"line":90,"column":8},"end":{"line":90,"column":63}},"55":{"start":{"line":92,"column":4},"end":{"line":95,"column":6}},"56":{"start":{"line":100,"column":0},"end":{"line":111,"column":2}},"57":{"start":{"line":101,"column":4},"end":{"line":101,"column":47}},"58":{"start":{"line":101,"column":33},"end":{"line":101,"column":45}},"59":{"start":{"line":102,"column":4},"end":{"line":102,"column":41}},"60":{"start":{"line":103,"column":4},"end":{"line":103,"column":55}},"61":{"start":{"line":103,"column":41},"end":{"line":103,"column":53}},"62":{"start":{"line":104,"column":4},"end":{"line":104,"column":29}},"63":{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},"64":{"start":{"line":106,"column":8},"end":{"line":106,"column":21}},"65":{"start":{"line":108,"column":4},"end":{"line":108,"column":36}},"66":{"start":{"line":109,"column":4},"end":{"line":109,"column":34}},"67":{"start":{"line":110,"column":4},"end":{"line":110,"column":16}},"68":{"start":{"line":113,"column":0},"end":{"line":117,"column":2}},"69":{"start":{"line":114,"column":4},"end":{"line":114,"column":41}},"70":{"start":{"line":115,"column":4},"end":{"line":115,"column":63}},"71":{"start":{"line":116,"column":4},"end":{"line":116,"column":28}},"72":{"start":{"line":120,"column":0},"end":{"line":120,"column":36}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":4},"end":{"line":21,"column":4}},{"start":{"line":21,"column":4},"end":{"line":21,"column":4}}]},"2":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"3":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"4":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":4},"end":{"line":69,"column":4}},{"start":{"line":69,"column":4},"end":{"line":69,"column":4}}]},"5":{"line":70,"type":"if","locations":[{"start":{"line":70,"column":4},"end":{"line":70,"column":4}},{"start":{"line":70,"column":4},"end":{"line":70,"column":4}}]},"6":{"line":73,"type":"if","locations":[{"start":{"line":73,"column":4},"end":{"line":73,"column":4}},{"start":{"line":73,"column":4},"end":{"line":73,"column":4}}]},"7":{"line":76,"type":"if","locations":[{"start":{"line":76,"column":4},"end":{"line":76,"column":4}},{"start":{"line":76,"column":4},"end":{"line":76,"column":4}}]},"8":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"9":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":4},"end":{"line":89,"column":4}},{"start":{"line":89,"column":4},"end":{"line":89,"column":4}}]},"10":{"line":89,"type":"binary-expr","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":11}},{"start":{"line":89,"column":13},"end":{"line":89,"column":27}}]},"11":{"line":94,"type":"cond-expr","locations":[{"start":{"line":94,"column":19},"end":{"line":94,"column":37}},{"start":{"line":94,"column":40},"end":{"line":94,"column":41}}]},"12":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]},"13":{"line":103,"type":"if","locations":[{"start":{"line":103,"column":4},"end":{"line":103,"column":4}},{"start":{"line":103,"column":4},"end":{"line":103,"column":4}}]},"14":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":105,"column":4}},{"start":{"line":105,"column":4},"end":{"line":105,"column":4}}]}},"code":["\"use strict\";","","var Spec = require('./Spec');","","/** Swarm is based on the Lamport model of time and events in a","  * distributed system, so Lamport timestamps are essential to","  * its functioning. In most of the cases, it is useful to","  * use actuall wall clock time to create timestamps. This","  * class creates second-precise Lamport timestamps.","  * Timestamp ordering is alphanumeric, length may vary.","  *","  * @param processId id of the process/clock to add to every","  *        timestamp (like !timeseq+gritzko~ssn, where gritzko","  *        is the user and ssn is a session id, so processId","  *        is \"gritzko~ssn\").","  * @param initTime normally, that is server-supplied timestamp","  *        to init our time offset; there is no guarantee about","  *        clock correctness on the client side","  */","var SecondPreciseClock = function (processId, timeOffsetMs) {","    if (!Spec.reTok.test(processId)) {","        throw new Error('invalid process id: '+processId);","    }","    this.id = processId;","    // sometimes we assume our local clock has some offset","    this.clockOffsetMs = 0;","    this.lastTimestamp = '';","    // although we try hard to use wall clock time, we must","    // obey Lamport logical clock rules, in particular our","    // timestamps must be greater than any other timestamps","    // previously seen","    this.lastTimeSeen = 0;","    this.lastSeqSeen = 0;","    if (timeOffsetMs) {","        this.clockOffsetMs = timeOffsetMs;","    }","};","","var epochDate = new Date(\"Wed, 01 Jan 2014 00:00:00 GMT\");","SecondPreciseClock.EPOCH = epochDate.getTime();","","SecondPreciseClock.prototype.adjustTime = function (trueMs) {","    var localTime = this.ms();","    var clockOffsetMs = trueMs - localTime;","    this.clockOffsetMs = clockOffsetMs;","    var lastTS = this.lastTimeSeen;","    this.lastTimeSeen = 0;","    this.lastSeqSeen = 0;","    this.lastTimestamp = '';","    if ( this.seconds()+1 < lastTS ) {","        console.error(\"risky clock reset\",this.lastTimestamp);","    }","};","","SecondPreciseClock.prototype.ms = function () {","    var millis = new Date().getTime();","    millis -= SecondPreciseClock.EPOCH;","    return millis;","};","","SecondPreciseClock.prototype.seconds = function () {","    var millis = this.ms();","    millis += this.clockOffsetMs;","    return (millis/1000) | 0;","};","","SecondPreciseClock.prototype.issueTimestamp = function time () {","    var res = this.seconds();","    if (this.lastTimeSeen>res) { res = this.lastTimeSeen; }","    if (res>this.lastTimeSeen) { this.lastSeqSeen = -1; }","    this.lastTimeSeen = res;","    var seq = ++this.lastSeqSeen;","    if (seq>=(1<<12)) {throw new Error('max event freq is 4000Hz');}","","    var baseTimeSeq = Spec.int2base(res, 5);","    if (seq>0) { baseTimeSeq+=Spec.int2base(seq, 2); }","","    this.lastTimestamp = baseTimeSeq + '+' + this.id;","    return this.lastTimestamp;","};","","//SecondPreciseClock.reQTokExt = new RegExp(Spec.rsTokExt); // no 'g'","","SecondPreciseClock.prototype.parseTimestamp = function parse (ts) {","    var m = ts.match(Spec.reTokExt);","    if (!m) {throw new Error('malformed timestamp: '+ts);}","    var timeseq=m[1]; //, process=m[2];","    var time = timeseq.substr(0,5), seq = timeseq.substr(5);","    if (seq&&seq.length!==2) {","        throw new Error('malformed timestamp value: '+timeseq);","    }","    return {","        time: Spec.base2int(time),","        seq: seq ? Spec.base2int(seq) : 0","    };","};","","/** Freshly issued Lamport logical tiemstamps must be greater than","    any timestamps previously seen. */","SecondPreciseClock.prototype.checkTimestamp = function see (ts) {","    if (ts<this.lastTimestamp) { return true; }","    var parsed = this.parseTimestamp(ts);","    if (parsed.time<this.lastTimeSeen) { return true; }","    var sec = this.seconds();","    if (parsed.time>sec+1) {","        return false; // back to the future","    }","    this.lastTimeSeen = parsed.time;","    this.lastSeqSeen = parsed.seq;","    return true;","};","","SecondPreciseClock.prototype.timestamp2date = function (ts) {","    var parsed = this.parseTimestamp(ts);","    var millis = parsed.time * 1000 + SecondPreciseClock.EPOCH;","    return new Date(millis);","};","","","module.exports = SecondPreciseClock;",""],"l":{"3":1,"20":1,"21":0,"22":0,"24":0,"26":0,"27":0,"32":0,"33":0,"34":0,"35":0,"39":1,"40":1,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"55":1,"56":0,"57":0,"58":0,"61":1,"62":0,"63":0,"64":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"75":0,"76":0,"78":0,"79":0,"84":1,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"92":0,"100":1,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"108":0,"109":0,"110":0,"113":1,"114":0,"115":0,"116":0,"120":1}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Storage.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Storage.js","s":{"1":1,"2":1,"3":3,"4":3,"5":3,"6":3,"7":3,"8":3,"9":3,"10":1,"11":1,"12":1,"13":1,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":1,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":1,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":1,"102":0,"103":0,"104":0,"105":0,"106":1,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":1,"115":0,"116":1,"117":0,"118":0,"119":1,"120":0,"121":0,"122":1,"123":0,"124":0,"125":1,"126":0,"127":0,"128":0,"129":0,"130":0,"131":0,"132":0,"133":0,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0},"b":{"1":[3,3],"2":[0,0,0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0],"34":[0,0],"35":[0,0],"36":[0,0],"37":[0,0],"38":[0,0],"39":[0,0],"40":[0,0],"41":[0,0],"42":[0,0],"43":[0,0],"44":[0,0],"45":[0,0]},"f":{"1":3,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},"fnMap":{"1":{"name":"Storage","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":24}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":28},"end":{"line":20,"column":56}}},"3":{"name":"storageOn","line":47,"loc":{"start":{"line":47,"column":23},"end":{"line":47,"column":60}}},"4":{"name":"sendResponse","line":67,"loc":{"start":{"line":67,"column":4},"end":{"line":67,"column":28}}},"5":{"name":"(anonymous_5)","line":90,"loc":{"start":{"line":90,"column":23},"end":{"line":90,"column":41}}},"6":{"name":"(anonymous_6)","line":97,"loc":{"start":{"line":97,"column":21},"end":{"line":97,"column":39}}},"7":{"name":"(anonymous_7)","line":106,"loc":{"start":{"line":106,"column":24},"end":{"line":106,"column":52}}},"8":{"name":"(anonymous_8)","line":115,"loc":{"start":{"line":115,"column":32},"end":{"line":115,"column":45}}},"9":{"name":"(anonymous_9)","line":124,"loc":{"start":{"line":124,"column":25},"end":{"line":124,"column":53}}},"10":{"name":"(anonymous_10)","line":127,"loc":{"start":{"line":127,"column":33},"end":{"line":127,"column":48}}},"11":{"name":"(anonymous_11)","line":140,"loc":{"start":{"line":140,"column":26},"end":{"line":140,"column":54}}},"12":{"name":"(anonymous_12)","line":143,"loc":{"start":{"line":143,"column":30},"end":{"line":143,"column":45}}},"13":{"name":"(anonymous_13)","line":171,"loc":{"start":{"line":171,"column":31},"end":{"line":171,"column":58}}},"14":{"name":"(anonymous_14)","line":180,"loc":{"start":{"line":180,"column":28},"end":{"line":180,"column":55}}},"15":{"name":"(anonymous_15)","line":191,"loc":{"start":{"line":191,"column":30},"end":{"line":191,"column":54}}},"16":{"name":"sendResponse","line":194,"loc":{"start":{"line":194,"column":4},"end":{"line":194,"column":28}}},"17":{"name":"(anonymous_17)","line":202,"loc":{"start":{"line":202,"column":28},"end":{"line":202,"column":52}}},"18":{"name":"(anonymous_18)","line":207,"loc":{"start":{"line":207,"column":26},"end":{"line":207,"column":46}}},"19":{"name":"(anonymous_19)","line":211,"loc":{"start":{"line":211,"column":25},"end":{"line":211,"column":47}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":37}},"2":{"start":{"line":5,"column":0},"end":{"line":15,"column":1}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":34}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":21}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":20}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":21}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":22}},"8":{"start":{"line":13,"column":4},"end":{"line":13,"column":21}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":30}},"10":{"start":{"line":16,"column":0},"end":{"line":16,"column":25}},"11":{"start":{"line":17,"column":0},"end":{"line":17,"column":36}},"12":{"start":{"line":18,"column":0},"end":{"line":18,"column":32}},"13":{"start":{"line":20,"column":0},"end":{"line":45,"column":2}},"14":{"start":{"line":21,"column":4},"end":{"line":21,"column":12}},"15":{"start":{"line":22,"column":4},"end":{"line":43,"column":5}},"16":{"start":{"line":25,"column":8},"end":{"line":25,"column":40}},"17":{"start":{"line":25,"column":41},"end":{"line":25,"column":47}},"18":{"start":{"line":27,"column":8},"end":{"line":27,"column":41}},"19":{"start":{"line":27,"column":42},"end":{"line":27,"column":48}},"20":{"start":{"line":29,"column":8},"end":{"line":39,"column":9}},"21":{"start":{"line":30,"column":12},"end":{"line":30,"column":46}},"22":{"start":{"line":32,"column":12},"end":{"line":32,"column":39}},"23":{"start":{"line":33,"column":12},"end":{"line":33,"column":30}},"24":{"start":{"line":34,"column":12},"end":{"line":34,"column":54}},"25":{"start":{"line":34,"column":37},"end":{"line":34,"column":51}},"26":{"start":{"line":35,"column":12},"end":{"line":35,"column":25}},"27":{"start":{"line":36,"column":12},"end":{"line":38,"column":13}},"28":{"start":{"line":37,"column":16},"end":{"line":37,"column":66}},"29":{"start":{"line":40,"column":8},"end":{"line":40,"column":14}},"30":{"start":{"line":42,"column":8},"end":{"line":42,"column":43}},"31":{"start":{"line":44,"column":4},"end":{"line":44,"column":15}},"32":{"start":{"line":47,"column":0},"end":{"line":103,"column":2}},"33":{"start":{"line":48,"column":4},"end":{"line":48,"column":31}},"34":{"start":{"line":50,"column":4},"end":{"line":61,"column":5}},"35":{"start":{"line":51,"column":8},"end":{"line":51,"column":31}},"36":{"start":{"line":52,"column":8},"end":{"line":59,"column":9}},"37":{"start":{"line":53,"column":12},"end":{"line":53,"column":21}},"38":{"start":{"line":54,"column":15},"end":{"line":59,"column":9}},"39":{"start":{"line":55,"column":12},"end":{"line":57,"column":13}},"40":{"start":{"line":56,"column":16},"end":{"line":56,"column":26}},"41":{"start":{"line":58,"column":12},"end":{"line":58,"column":25}},"42":{"start":{"line":60,"column":8},"end":{"line":60,"column":27}},"43":{"start":{"line":63,"column":4},"end":{"line":63,"column":20}},"44":{"start":{"line":64,"column":4},"end":{"line":64,"column":14}},"45":{"start":{"line":65,"column":4},"end":{"line":65,"column":13}},"46":{"start":{"line":67,"column":4},"end":{"line":88,"column":5}},"47":{"start":{"line":68,"column":8},"end":{"line":73,"column":9}},"48":{"start":{"line":69,"column":12},"end":{"line":72,"column":13}},"49":{"start":{"line":71,"column":16},"end":{"line":71,"column":41}},"50":{"start":{"line":74,"column":8},"end":{"line":80,"column":9}},"51":{"start":{"line":75,"column":12},"end":{"line":75,"column":35}},"52":{"start":{"line":75,"column":25},"end":{"line":75,"column":34}},"53":{"start":{"line":76,"column":12},"end":{"line":76,"column":44}},"54":{"start":{"line":77,"column":12},"end":{"line":79,"column":13}},"55":{"start":{"line":78,"column":16},"end":{"line":78,"column":41}},"56":{"start":{"line":81,"column":8},"end":{"line":81,"column":46}},"57":{"start":{"line":82,"column":8},"end":{"line":87,"column":9}},"58":{"start":{"line":83,"column":12},"end":{"line":83,"column":55}},"59":{"start":{"line":84,"column":12},"end":{"line":84,"column":84}},"60":{"start":{"line":86,"column":12},"end":{"line":86,"column":54}},"61":{"start":{"line":90,"column":4},"end":{"line":95,"column":7}},"62":{"start":{"line":91,"column":8},"end":{"line":91,"column":26}},"63":{"start":{"line":92,"column":8},"end":{"line":94,"column":9}},"64":{"start":{"line":93,"column":12},"end":{"line":93,"column":27}},"65":{"start":{"line":97,"column":4},"end":{"line":102,"column":7}},"66":{"start":{"line":98,"column":8},"end":{"line":98,"column":25}},"67":{"start":{"line":99,"column":8},"end":{"line":101,"column":9}},"68":{"start":{"line":100,"column":12},"end":{"line":100,"column":27}},"69":{"start":{"line":106,"column":0},"end":{"line":122,"column":2}},"70":{"start":{"line":107,"column":4},"end":{"line":109,"column":5}},"71":{"start":{"line":108,"column":8},"end":{"line":108,"column":15}},"72":{"start":{"line":110,"column":4},"end":{"line":110,"column":31}},"73":{"start":{"line":111,"column":4},"end":{"line":111,"column":27}},"74":{"start":{"line":112,"column":4},"end":{"line":121,"column":5}},"75":{"start":{"line":113,"column":8},"end":{"line":113,"column":29}},"76":{"start":{"line":114,"column":11},"end":{"line":121,"column":5}},"77":{"start":{"line":115,"column":8},"end":{"line":115,"column":66}},"78":{"start":{"line":115,"column":46},"end":{"line":115,"column":63}},"79":{"start":{"line":116,"column":8},"end":{"line":120,"column":9}},"80":{"start":{"line":117,"column":12},"end":{"line":117,"column":36}},"81":{"start":{"line":119,"column":12},"end":{"line":119,"column":33}},"82":{"start":{"line":124,"column":0},"end":{"line":137,"column":2}},"83":{"start":{"line":125,"column":4},"end":{"line":125,"column":42}},"84":{"start":{"line":126,"column":4},"end":{"line":126,"column":33}},"85":{"start":{"line":127,"column":4},"end":{"line":136,"column":7}},"86":{"start":{"line":128,"column":8},"end":{"line":135,"column":9}},"87":{"start":{"line":129,"column":12},"end":{"line":129,"column":52}},"88":{"start":{"line":131,"column":12},"end":{"line":131,"column":63}},"89":{"start":{"line":132,"column":12},"end":{"line":134,"column":13}},"90":{"start":{"line":133,"column":16},"end":{"line":133,"column":39}},"91":{"start":{"line":140,"column":0},"end":{"line":157,"column":2}},"92":{"start":{"line":141,"column":4},"end":{"line":141,"column":20}},"93":{"start":{"line":142,"column":4},"end":{"line":142,"column":31}},"94":{"start":{"line":143,"column":4},"end":{"line":147,"column":7}},"95":{"start":{"line":144,"column":8},"end":{"line":146,"column":9}},"96":{"start":{"line":145,"column":12},"end":{"line":145,"column":28}},"97":{"start":{"line":148,"column":4},"end":{"line":148,"column":43}},"98":{"start":{"line":149,"column":4},"end":{"line":156,"column":5}},"99":{"start":{"line":154,"column":8},"end":{"line":154,"column":31}},"100":{"start":{"line":155,"column":8},"end":{"line":155,"column":56}},"101":{"start":{"line":171,"column":0},"end":{"line":178,"column":2}},"102":{"start":{"line":172,"column":4},"end":{"line":172,"column":31}},"103":{"start":{"line":173,"column":4},"end":{"line":173,"column":44}},"104":{"start":{"line":175,"column":4},"end":{"line":175,"column":26}},"105":{"start":{"line":177,"column":4},"end":{"line":177,"column":9}},"106":{"start":{"line":180,"column":0},"end":{"line":189,"column":2}},"107":{"start":{"line":181,"column":4},"end":{"line":181,"column":31}},"108":{"start":{"line":182,"column":4},"end":{"line":182,"column":31}},"109":{"start":{"line":183,"column":4},"end":{"line":183,"column":55}},"110":{"start":{"line":184,"column":4},"end":{"line":186,"column":5}},"111":{"start":{"line":185,"column":8},"end":{"line":185,"column":65}},"112":{"start":{"line":187,"column":4},"end":{"line":187,"column":37}},"113":{"start":{"line":188,"column":4},"end":{"line":188,"column":9}},"114":{"start":{"line":191,"column":0},"end":{"line":200,"column":2}},"115":{"start":{"line":192,"column":4},"end":{"line":192,"column":52}},"116":{"start":{"line":194,"column":4},"end":{"line":196,"column":5}},"117":{"start":{"line":195,"column":8},"end":{"line":195,"column":30}},"118":{"start":{"line":199,"column":4},"end":{"line":199,"column":62}},"119":{"start":{"line":202,"column":0},"end":{"line":205,"column":2}},"120":{"start":{"line":203,"column":4},"end":{"line":203,"column":50}},"121":{"start":{"line":204,"column":4},"end":{"line":204,"column":25}},"122":{"start":{"line":207,"column":0},"end":{"line":209,"column":2}},"123":{"start":{"line":208,"column":4},"end":{"line":208,"column":33}},"124":{"start":{"line":208,"column":20},"end":{"line":208,"column":31}},"125":{"start":{"line":211,"column":0},"end":{"line":229,"column":2}},"126":{"start":{"line":212,"column":4},"end":{"line":212,"column":31}},"127":{"start":{"line":213,"column":4},"end":{"line":213,"column":27}},"128":{"start":{"line":214,"column":4},"end":{"line":214,"column":22}},"129":{"start":{"line":214,"column":14},"end":{"line":214,"column":21}},"130":{"start":{"line":215,"column":4},"end":{"line":228,"column":5}},"131":{"start":{"line":216,"column":8},"end":{"line":223,"column":9}},"132":{"start":{"line":217,"column":12},"end":{"line":217,"column":26}},"133":{"start":{"line":218,"column":12},"end":{"line":222,"column":13}},"134":{"start":{"line":219,"column":16},"end":{"line":219,"column":35}},"135":{"start":{"line":220,"column":19},"end":{"line":222,"column":13}},"136":{"start":{"line":221,"column":16},"end":{"line":221,"column":43}},"137":{"start":{"line":224,"column":11},"end":{"line":228,"column":5}},"138":{"start":{"line":225,"column":8},"end":{"line":225,"column":36}},"139":{"start":{"line":226,"column":11},"end":{"line":228,"column":5}},"140":{"start":{"line":227,"column":8},"end":{"line":227,"column":28}}},"branchMap":{"1":{"line":6,"type":"binary-expr","locations":[{"start":{"line":6,"column":17},"end":{"line":6,"column":24}},{"start":{"line":6,"column":28},"end":{"line":6,"column":33}}]},"2":{"line":22,"type":"switch","locations":[{"start":{"line":24,"column":4},"end":{"line":25,"column":47}},{"start":{"line":26,"column":4},"end":{"line":27,"column":48}},{"start":{"line":28,"column":4},"end":{"line":40,"column":14}},{"start":{"line":41,"column":4},"end":{"line":42,"column":43}}]},"3":{"line":29,"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":29,"column":8}},{"start":{"line":29,"column":8},"end":{"line":29,"column":8}}]},"4":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":4},"end":{"line":50,"column":4}},{"start":{"line":50,"column":4},"end":{"line":50,"column":4}}]},"5":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":52,"column":8}},{"start":{"line":52,"column":8},"end":{"line":52,"column":8}}]},"6":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":15},"end":{"line":54,"column":15}},{"start":{"line":54,"column":15},"end":{"line":54,"column":15}}]},"7":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":12},"end":{"line":55,"column":12}},{"start":{"line":55,"column":12},"end":{"line":55,"column":12}}]},"8":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":68,"column":8}},{"start":{"line":68,"column":8},"end":{"line":68,"column":8}}]},"9":{"line":69,"type":"if","locations":[{"start":{"line":69,"column":12},"end":{"line":69,"column":12}},{"start":{"line":69,"column":12},"end":{"line":69,"column":12}}]},"10":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":8},"end":{"line":74,"column":8}},{"start":{"line":74,"column":8},"end":{"line":74,"column":8}}]},"11":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":12},"end":{"line":75,"column":12}},{"start":{"line":75,"column":12},"end":{"line":75,"column":12}}]},"12":{"line":76,"type":"binary-expr","locations":[{"start":{"line":76,"column":26},"end":{"line":76,"column":37}},{"start":{"line":76,"column":41},"end":{"line":76,"column":43}}]},"13":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":82,"column":8}},{"start":{"line":82,"column":8},"end":{"line":82,"column":8}}]},"14":{"line":91,"type":"binary-expr","locations":[{"start":{"line":91,"column":16},"end":{"line":91,"column":17}},{"start":{"line":91,"column":21},"end":{"line":91,"column":25}}]},"15":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":8},"end":{"line":92,"column":8}},{"start":{"line":92,"column":8},"end":{"line":92,"column":8}}]},"16":{"line":98,"type":"binary-expr","locations":[{"start":{"line":98,"column":15},"end":{"line":98,"column":16}},{"start":{"line":98,"column":20},"end":{"line":98,"column":24}}]},"17":{"line":99,"type":"if","locations":[{"start":{"line":99,"column":8},"end":{"line":99,"column":8}},{"start":{"line":99,"column":8},"end":{"line":99,"column":8}}]},"18":{"line":107,"type":"if","locations":[{"start":{"line":107,"column":4},"end":{"line":107,"column":4}},{"start":{"line":107,"column":4},"end":{"line":107,"column":4}}]},"19":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":4},"end":{"line":112,"column":4}},{"start":{"line":112,"column":4},"end":{"line":112,"column":4}}]},"20":{"line":114,"type":"if","locations":[{"start":{"line":114,"column":11},"end":{"line":114,"column":11}},{"start":{"line":114,"column":11},"end":{"line":114,"column":11}}]},"21":{"line":114,"type":"binary-expr","locations":[{"start":{"line":114,"column":15},"end":{"line":114,"column":17}},{"start":{"line":114,"column":21},"end":{"line":114,"column":45}}]},"22":{"line":116,"type":"if","locations":[{"start":{"line":116,"column":8},"end":{"line":116,"column":8}},{"start":{"line":116,"column":8},"end":{"line":116,"column":8}}]},"23":{"line":128,"type":"if","locations":[{"start":{"line":128,"column":8},"end":{"line":128,"column":8}},{"start":{"line":128,"column":8},"end":{"line":128,"column":8}}]},"24":{"line":131,"type":"binary-expr","locations":[{"start":{"line":131,"column":23},"end":{"line":131,"column":37}},{"start":{"line":131,"column":42},"end":{"line":131,"column":61}}]},"25":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":8},"end":{"line":144,"column":8}},{"start":{"line":144,"column":8},"end":{"line":144,"column":8}}]},"26":{"line":148,"type":"binary-expr","locations":[{"start":{"line":148,"column":22},"end":{"line":148,"column":37}},{"start":{"line":148,"column":41},"end":{"line":148,"column":42}}]},"27":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":4},"end":{"line":149,"column":4}},{"start":{"line":149,"column":4},"end":{"line":149,"column":4}}]},"28":{"line":183,"type":"binary-expr","locations":[{"start":{"line":183,"column":15},"end":{"line":183,"column":29}},{"start":{"line":183,"column":34},"end":{"line":183,"column":53}}]},"29":{"line":184,"type":"if","locations":[{"start":{"line":184,"column":4},"end":{"line":184,"column":4}},{"start":{"line":184,"column":4},"end":{"line":184,"column":4}}]},"30":{"line":192,"type":"binary-expr","locations":[{"start":{"line":192,"column":27},"end":{"line":192,"column":42}},{"start":{"line":192,"column":46},"end":{"line":192,"column":50}}]},"31":{"line":199,"type":"cond-expr","locations":[{"start":{"line":199,"column":17},"end":{"line":199,"column":44}},{"start":{"line":199,"column":47},"end":{"line":199,"column":61}}]},"32":{"line":203,"type":"binary-expr","locations":[{"start":{"line":203,"column":26},"end":{"line":203,"column":40}},{"start":{"line":203,"column":44},"end":{"line":203,"column":48}}]},"33":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":4},"end":{"line":208,"column":4}},{"start":{"line":208,"column":4},"end":{"line":208,"column":4}}]},"34":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":4},"end":{"line":214,"column":4}},{"start":{"line":214,"column":4},"end":{"line":214,"column":4}}]},"35":{"line":215,"type":"if","locations":[{"start":{"line":215,"column":4},"end":{"line":215,"column":4}},{"start":{"line":215,"column":4},"end":{"line":215,"column":4}}]},"36":{"line":215,"type":"binary-expr","locations":[{"start":{"line":215,"column":8},"end":{"line":215,"column":10}},{"start":{"line":215,"column":14},"end":{"line":215,"column":36}}]},"37":{"line":216,"type":"binary-expr","locations":[{"start":{"line":216,"column":21},"end":{"line":216,"column":23}},{"start":{"line":216,"column":27},"end":{"line":216,"column":38}}]},"38":{"line":218,"type":"if","locations":[{"start":{"line":218,"column":12},"end":{"line":218,"column":12}},{"start":{"line":218,"column":12},"end":{"line":218,"column":12}}]},"39":{"line":218,"type":"binary-expr","locations":[{"start":{"line":218,"column":16},"end":{"line":218,"column":17}},{"start":{"line":218,"column":21},"end":{"line":218,"column":45}}]},"40":{"line":220,"type":"if","locations":[{"start":{"line":220,"column":19},"end":{"line":220,"column":19}},{"start":{"line":220,"column":19},"end":{"line":220,"column":19}}]},"41":{"line":220,"type":"binary-expr","locations":[{"start":{"line":220,"column":23},"end":{"line":220,"column":24}},{"start":{"line":220,"column":28},"end":{"line":220,"column":37}}]},"42":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":11},"end":{"line":224,"column":11}},{"start":{"line":224,"column":11},"end":{"line":224,"column":11}}]},"43":{"line":224,"type":"binary-expr","locations":[{"start":{"line":224,"column":15},"end":{"line":224,"column":17}},{"start":{"line":224,"column":21},"end":{"line":224,"column":31}}]},"44":{"line":226,"type":"if","locations":[{"start":{"line":226,"column":11},"end":{"line":226,"column":11}},{"start":{"line":226,"column":11},"end":{"line":226,"column":11}}]},"45":{"line":226,"type":"binary-expr","locations":[{"start":{"line":226,"column":15},"end":{"line":226,"column":17}},{"start":{"line":226,"column":21},"end":{"line":226,"column":46}}]}},"code":["\"use strict\";","","var Syncable = require('./Syncable');","","function Storage(async) {","    this.async = !!async || false;","    this.states = {};","    this.tails = {};","    this.counts = {};","    this._host = null;","    // many implementations do not push changes","    // so there are no listeners","    this.lstn = null;","    this._id = 'some_storage';","}","module.exports = Storage;","Storage.prototype.MAX_LOG_SIZE = 10;","Storage.prototype.isRoot = true; // may create global objects","","Storage.prototype.deliver = function (spec, value, src) {","    var ret;","    switch (spec.op()) {","        // A storage is always an \"uplink\" so it never receives reon, reoff.","    case 'on':","        ret = this.on(spec, value, src); break;","    case 'off':","        ret = this.off(spec, value, src); break;","    case 'init':","        if (value._version) { // state","            ret = this.init(spec, value, src);","        } else { // patch","            var ti = spec.filter('/#');","            var specs = [], s;","            for(s in value._tail) {  specs.push(s);  }","            specs.sort();","            while (s=specs.pop()) {","                ret = this.anyOp( ti.add(s), value._tail[s], src);","            }","        }","        break;","    default:","        ret = this.anyOp(spec, value, src);","    }","    return ret;","};","","Storage.prototype.on = function storageOn (spec, base, src) {","    var ti = spec.filter('/#');","","    if (this.lstn) {","        var ls = this.lstn[ti];","        if (ls === undefined) {","            ls = src;","        } else if (ls !== src) {","            if (ls.constructor !== Array) {","                ls = [ls];","            }","            ls.push(src);","        }","        this.lstn[ti] = ls;","    }","","    var self = this;","    var state;","    var tail;","","    function sendResponse() {","        if (!state) {","            if (self.isRoot) {// && !spec.token('#').ext) {","                // make 0 state for a global object TODO move to Host","                state = {_version: '!0'};","            }","        }","        if (tail) {","            if (!state) {state={};}","            state._tail = state._tail || {};","            for (var s in tail) {","                state._tail[s] = tail[s];","            }","        }","        var tiv = ti.add(spec.version(), '!');","        if (state) {","            src.deliver(tiv.add('.init'), state, self);","            src.deliver(tiv.add('.reon'), Syncable.stateVersionVector(state), self); // TODO and the tail","        } else {","            src.deliver(tiv.add('.reon'), '!0', self); // state unknown","        }","    }","","    this.readState(ti, function (err, s) {","        state = s || null;","        if (tail !== undefined) {","            sendResponse();","        }","    });","","    this.readOps(ti, function (err, t) {","        tail = t || null;","        if (state !== undefined) {","            sendResponse();","        }","    });","};","","","Storage.prototype.off = function (spec, value, src) {","    if (!this.lstn) {","        return;","    }","    var ti = spec.filter('/#');","    var ls = this.lstn[ti];","    if (ls === src) {","        delete this.lstn[ti];","    } else if (ls && ls.constructor === Array) {","        var cleared = ls.filter(function (v) {return v !== src;});","        if (cleared.length) {","            this.lstn[ti] = cleared;","        } else {","            delete this.lstn[ti];","        }","    }","};","","Storage.prototype.init = function (spec, state, src) {","    var ti = spec.filter('/#'), self=this;","    var saveops = this.tails[ti];","    this.writeState(spec, state, function (err) {","        if (err) {","            console.error('state dump error:', err);","        } else {","            var tail = self.tails[ti] || (self.tails[ti] = {});","            for(var op in saveops) { // OK, let's keep that in the log","                tail[op] = saveops[op];","            }","        }","    });","};","","","Storage.prototype.anyOp = function (spec, value, src) {","    var self = this;","    var ti = spec.filter('/#');","    this.writeOp(spec, value, function (err) {","        if (err) {","            this.close(err); // the log is sacred","        }","    });","    self.counts[ti] = self.counts[ti] || 0;","    if (++self.counts[ti]>self.MAX_LOG_SIZE) {","        // The storage piggybacks on the object's state/log handling logic","        // First, it adds an op to the log tail unless the log is too long...","        // ...otherwise it sends back a subscription effectively requesting","        // the state, on state arrival zeroes the tail.","        delete self.counts[ti];","        src.deliver(spec.set('.reon'), '!0.init', self);","    }","};","","","// In a real storage implementation, state and log often go into","// different backends, e.g. the state is saved to SQL/NoSQL db,","// while the log may live in a key-value storage.","// As long as the state has sufficient versioning info saved with","// it (like a version vector), we may purge the log lazily, once","// we are sure that the state is reliably saved. So, the log may","// overlap with the state (some ops are already applied). That","// provides some necessary resilience to workaround the lack of","// transactions across backends.","// In case third parties may write to the backend, go figure","// some way to deal with it (e.g. make a retrofit operation).","Storage.prototype.writeState = function (spec, state, cb) {","    var ti = spec.filter('/#');","    this.states[ti] = JSON.stringify(state);","    // tail is zeroed on state flush","    delete this.tails[ti];","    // callback is mandatory","    cb();","};","","Storage.prototype.writeOp = function (spec, value, cb) {","    var ti = spec.filter('/#');","    var vm = spec.filter('!.');","    var tail = this.tails[ti] || (this.tails[ti] = {});","    if (tail[vm]) {","        console.error('op replay @storage'+vm+new Error().stack);","    }","    tail[vm] = JSON.stringify(value);","    cb();","};","","Storage.prototype.readState = function (ti, callback) {","    var state = JSON.parse(this.states[ti] || null);","","    function sendResponse() {","        callback(null, state);","    }","","    // may force async behavior","    this.async ? setTimeout(sendResponse, 1) : sendResponse();","};","","Storage.prototype.readOps = function (ti, callback) {","    var tail = JSON.parse(this.tails[ti] || null);","    callback(null, tail);","};","","Storage.prototype.close = function (callback) {","    if (callback) { callback(); }","};","","Storage.prototype.emit = function (spec,value) {","    var ti = spec.filter('/#');","    var ln = this.lstn[ti];","    if (!ln) {return;}","    if (ln && ln.constructor===Array) {","        for(var i=0; ln && i<ln.length; i++) {","            var l = ln[i];","            if (l && l.constructor===Function) {","                l(spec,value,this);","            } else if (l && l.deliver) {","                l.deliver(spec,value,this);","            }","        }","    } else if (ln && ln.deliver) {","        ln.deliver(spec,value,this);","    } else if (ln && ln.constructor===Function) {","        ln(spec,value,this);","    }","};",""],"l":{"3":1,"5":1,"6":3,"7":3,"8":3,"9":3,"10":3,"13":3,"14":3,"16":1,"17":1,"18":1,"20":1,"21":0,"22":0,"25":0,"27":0,"29":0,"30":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"40":0,"42":0,"44":0,"47":1,"48":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"58":0,"60":0,"63":0,"64":0,"65":0,"67":1,"68":0,"69":0,"71":0,"74":0,"75":0,"76":0,"77":0,"78":0,"81":0,"82":0,"83":0,"84":0,"86":0,"90":0,"91":0,"92":0,"93":0,"97":0,"98":0,"99":0,"100":0,"106":1,"107":0,"108":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"119":0,"124":1,"125":0,"126":0,"127":0,"128":0,"129":0,"131":0,"132":0,"133":0,"140":1,"141":0,"142":0,"143":0,"144":0,"145":0,"148":0,"149":0,"154":0,"155":0,"171":1,"172":0,"173":0,"175":0,"177":0,"180":1,"181":0,"182":0,"183":0,"184":0,"185":0,"187":0,"188":0,"191":1,"192":0,"194":1,"195":0,"199":0,"202":1,"203":0,"204":0,"207":1,"208":0,"211":1,"212":0,"213":0,"214":0,"215":0,"216":0,"217":0,"218":0,"219":0,"220":0,"221":0,"224":0,"225":0,"226":0,"227":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/FileStorage.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/FileStorage.js","s":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":1,"17":1,"18":1,"19":0,"20":0,"21":0,"22":1,"23":0,"24":1,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":1,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":1,"53":0,"54":0,"55":0,"56":0,"57":1,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":1,"66":0,"67":0,"68":0,"69":0,"70":1,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":1,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"FileStorage","line":14,"loc":{"start":{"line":14,"column":0},"end":{"line":14,"column":27}}},"2":{"name":"(anonymous_2)","line":30,"loc":{"start":{"line":30,"column":38},"end":{"line":30,"column":54}}},"3":{"name":"(anonymous_3)","line":36,"loc":{"start":{"line":36,"column":36},"end":{"line":36,"column":48}}},"4":{"name":"(anonymous_4)","line":40,"loc":{"start":{"line":40,"column":35},"end":{"line":40,"column":62}}},"5":{"name":"onSave","line":51,"loc":{"start":{"line":51,"column":33},"end":{"line":51,"column":54}}},"6":{"name":"(anonymous_6)","line":59,"loc":{"start":{"line":59,"column":32},"end":{"line":59,"column":59}}},"7":{"name":"onFail","line":71,"loc":{"start":{"line":71,"column":32},"end":{"line":71,"column":53}}},"8":{"name":"(anonymous_8)","line":78,"loc":{"start":{"line":78,"column":34},"end":{"line":78,"column":58}}},"9":{"name":"onRead","line":81,"loc":{"start":{"line":81,"column":25},"end":{"line":81,"column":52}}},"10":{"name":"(anonymous_10)","line":88,"loc":{"start":{"line":88,"column":32},"end":{"line":88,"column":56}}},"11":{"name":"(anonymous_11)","line":101,"loc":{"start":{"line":101,"column":30},"end":{"line":101,"column":56}}},"12":{"name":"(anonymous_12)","line":111,"loc":{"start":{"line":111,"column":34},"end":{"line":111,"column":62}}},"13":{"name":"(anonymous_13)","line":125,"loc":{"start":{"line":125,"column":33},"end":{"line":125,"column":48}}},"14":{"name":"onFail","line":132,"loc":{"start":{"line":132,"column":34},"end":{"line":132,"column":55}}},"15":{"name":"(anonymous_15)","line":144,"loc":{"start":{"line":144,"column":32},"end":{"line":144,"column":44}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":23}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"4":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"5":{"start":{"line":6,"column":0},"end":{"line":6,"column":35}},"6":{"start":{"line":14,"column":0},"end":{"line":26,"column":1}},"7":{"start":{"line":15,"column":4},"end":{"line":15,"column":23}},"8":{"start":{"line":16,"column":4},"end":{"line":16,"column":22}},"9":{"start":{"line":17,"column":4},"end":{"line":17,"column":33}},"10":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"11":{"start":{"line":19,"column":8},"end":{"line":19,"column":31}},"12":{"start":{"line":21,"column":4},"end":{"line":21,"column":22}},"13":{"start":{"line":22,"column":4},"end":{"line":22,"column":19}},"14":{"start":{"line":24,"column":4},"end":{"line":24,"column":19}},"15":{"start":{"line":25,"column":4},"end":{"line":25,"column":21}},"16":{"start":{"line":27,"column":0},"end":{"line":27,"column":38}},"17":{"start":{"line":28,"column":0},"end":{"line":28,"column":29}},"18":{"start":{"line":30,"column":0},"end":{"line":34,"column":2}},"19":{"start":{"line":31,"column":4},"end":{"line":31,"column":51}},"20":{"start":{"line":32,"column":4},"end":{"line":32,"column":45}},"21":{"start":{"line":33,"column":4},"end":{"line":33,"column":16}},"22":{"start":{"line":36,"column":0},"end":{"line":38,"column":2}},"23":{"start":{"line":37,"column":4},"end":{"line":37,"column":42}},"24":{"start":{"line":40,"column":0},"end":{"line":57,"column":2}},"25":{"start":{"line":41,"column":4},"end":{"line":41,"column":20}},"26":{"start":{"line":42,"column":4},"end":{"line":42,"column":31}},"27":{"start":{"line":43,"column":4},"end":{"line":43,"column":42}},"28":{"start":{"line":44,"column":4},"end":{"line":44,"column":37}},"29":{"start":{"line":45,"column":4},"end":{"line":47,"column":5}},"30":{"start":{"line":46,"column":8},"end":{"line":46,"column":26}},"31":{"start":{"line":48,"column":4},"end":{"line":48,"column":51}},"32":{"start":{"line":50,"column":4},"end":{"line":50,"column":26}},"33":{"start":{"line":51,"column":4},"end":{"line":56,"column":7}},"34":{"start":{"line":52,"column":8},"end":{"line":54,"column":9}},"35":{"start":{"line":53,"column":12},"end":{"line":53,"column":76}},"36":{"start":{"line":55,"column":8},"end":{"line":55,"column":16}},"37":{"start":{"line":59,"column":0},"end":{"line":75,"column":2}},"38":{"start":{"line":60,"column":4},"end":{"line":60,"column":20}},"39":{"start":{"line":61,"column":4},"end":{"line":61,"column":31}},"40":{"start":{"line":62,"column":4},"end":{"line":62,"column":31}},"41":{"start":{"line":63,"column":4},"end":{"line":63,"column":55}},"42":{"start":{"line":64,"column":4},"end":{"line":67,"column":5}},"43":{"start":{"line":65,"column":8},"end":{"line":65,"column":65}},"44":{"start":{"line":66,"column":8},"end":{"line":66,"column":15}},"45":{"start":{"line":68,"column":4},"end":{"line":68,"column":50}},"46":{"start":{"line":69,"column":4},"end":{"line":69,"column":21}},"47":{"start":{"line":70,"column":4},"end":{"line":70,"column":58}},"48":{"start":{"line":71,"column":4},"end":{"line":74,"column":7}},"49":{"start":{"line":72,"column":8},"end":{"line":72,"column":42}},"50":{"start":{"line":72,"column":19},"end":{"line":72,"column":40}},"51":{"start":{"line":73,"column":8},"end":{"line":73,"column":16}},"52":{"start":{"line":78,"column":0},"end":{"line":85,"column":2}},"53":{"start":{"line":79,"column":4},"end":{"line":79,"column":41}},"54":{"start":{"line":81,"column":4},"end":{"line":84,"column":7}},"55":{"start":{"line":82,"column":8},"end":{"line":82,"column":73}},"56":{"start":{"line":83,"column":8},"end":{"line":83,"column":35}},"57":{"start":{"line":88,"column":0},"end":{"line":98,"column":2}},"58":{"start":{"line":89,"column":4},"end":{"line":89,"column":30}},"59":{"start":{"line":90,"column":4},"end":{"line":96,"column":5}},"60":{"start":{"line":91,"column":8},"end":{"line":91,"column":26}},"61":{"start":{"line":92,"column":8},"end":{"line":94,"column":9}},"62":{"start":{"line":93,"column":12},"end":{"line":93,"column":38}},"63":{"start":{"line":95,"column":8},"end":{"line":95,"column":24}},"64":{"start":{"line":97,"column":4},"end":{"line":97,"column":31}},"65":{"start":{"line":101,"column":0},"end":{"line":108,"column":2}},"66":{"start":{"line":102,"column":4},"end":{"line":104,"column":5}},"67":{"start":{"line":103,"column":8},"end":{"line":103,"column":45}},"68":{"start":{"line":105,"column":4},"end":{"line":107,"column":5}},"69":{"start":{"line":106,"column":8},"end":{"line":106,"column":39}},"70":{"start":{"line":111,"column":0},"end":{"line":142,"column":2}},"71":{"start":{"line":112,"column":4},"end":{"line":112,"column":20}},"72":{"start":{"line":113,"column":4},"end":{"line":117,"column":5}},"73":{"start":{"line":114,"column":8},"end":{"line":114,"column":40}},"74":{"start":{"line":115,"column":8},"end":{"line":115,"column":28}},"75":{"start":{"line":116,"column":8},"end":{"line":116,"column":29}},"76":{"start":{"line":119,"column":4},"end":{"line":136,"column":5}},"77":{"start":{"line":121,"column":8},"end":{"line":123,"column":9}},"78":{"start":{"line":122,"column":12},"end":{"line":122,"column":68}},"79":{"start":{"line":124,"column":8},"end":{"line":124,"column":64}},"80":{"start":{"line":125,"column":8},"end":{"line":127,"column":11}},"81":{"start":{"line":126,"column":12},"end":{"line":126,"column":33}},"82":{"start":{"line":129,"column":8},"end":{"line":129,"column":60}},"83":{"start":{"line":130,"column":8},"end":{"line":130,"column":31}},"84":{"start":{"line":132,"column":8},"end":{"line":134,"column":11}},"85":{"start":{"line":133,"column":12},"end":{"line":133,"column":46}},"86":{"start":{"line":133,"column":23},"end":{"line":133,"column":44}},"87":{"start":{"line":138,"column":4},"end":{"line":140,"column":5}},"88":{"start":{"line":139,"column":8},"end":{"line":139,"column":19}},"89":{"start":{"line":144,"column":0},"end":{"line":168,"column":2}},"90":{"start":{"line":145,"column":4},"end":{"line":147,"column":5}},"91":{"start":{"line":146,"column":8},"end":{"line":146,"column":15}},"92":{"start":{"line":148,"column":4},"end":{"line":148,"column":70}},"93":{"start":{"line":149,"column":4},"end":{"line":149,"column":26}},"94":{"start":{"line":149,"column":17},"end":{"line":149,"column":24}},"95":{"start":{"line":150,"column":4},"end":{"line":150,"column":12}},"96":{"start":{"line":151,"column":4},"end":{"line":156,"column":5}},"97":{"start":{"line":152,"column":8},"end":{"line":152,"column":31}},"98":{"start":{"line":155,"column":8},"end":{"line":155,"column":37}},"99":{"start":{"line":157,"column":4},"end":{"line":157,"column":25}},"100":{"start":{"line":158,"column":4},"end":{"line":158,"column":19}},"101":{"start":{"line":159,"column":4},"end":{"line":167,"column":5}},"102":{"start":{"line":160,"column":8},"end":{"line":160,"column":31}},"103":{"start":{"line":161,"column":8},"end":{"line":166,"column":9}},"104":{"start":{"line":162,"column":12},"end":{"line":162,"column":39}},"105":{"start":{"line":163,"column":12},"end":{"line":163,"column":39}},"106":{"start":{"line":164,"column":12},"end":{"line":164,"column":63}},"107":{"start":{"line":165,"column":12},"end":{"line":165,"column":34}}},"branchMap":{"1":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"2":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":4}},{"start":{"line":45,"column":4},"end":{"line":45,"column":4}}]},"3":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":52,"column":8}},{"start":{"line":52,"column":8},"end":{"line":52,"column":8}}]},"4":{"line":63,"type":"binary-expr","locations":[{"start":{"line":63,"column":15},"end":{"line":63,"column":29}},{"start":{"line":63,"column":34},"end":{"line":63,"column":53}}]},"5":{"line":64,"type":"if","locations":[{"start":{"line":64,"column":4},"end":{"line":64,"column":4}},{"start":{"line":64,"column":4},"end":{"line":64,"column":4}}]},"6":{"line":72,"type":"if","locations":[{"start":{"line":72,"column":8},"end":{"line":72,"column":8}},{"start":{"line":72,"column":8},"end":{"line":72,"column":8}}]},"7":{"line":82,"type":"cond-expr","locations":[{"start":{"line":82,"column":26},"end":{"line":82,"column":42}},{"start":{"line":82,"column":45},"end":{"line":82,"column":72}}]},"8":{"line":83,"type":"binary-expr","locations":[{"start":{"line":83,"column":22},"end":{"line":83,"column":27}},{"start":{"line":83,"column":29},"end":{"line":83,"column":33}}]},"9":{"line":90,"type":"if","locations":[{"start":{"line":90,"column":4},"end":{"line":90,"column":4}},{"start":{"line":90,"column":4},"end":{"line":90,"column":4}}]},"10":{"line":97,"type":"binary-expr","locations":[{"start":{"line":97,"column":19},"end":{"line":97,"column":23}},{"start":{"line":97,"column":25},"end":{"line":97,"column":29}}]},"11":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":4},"end":{"line":102,"column":4}},{"start":{"line":102,"column":4},"end":{"line":102,"column":4}}]},"12":{"line":105,"type":"if","locations":[{"start":{"line":105,"column":4},"end":{"line":105,"column":4}},{"start":{"line":105,"column":4},"end":{"line":105,"column":4}}]},"13":{"line":113,"type":"if","locations":[{"start":{"line":113,"column":4},"end":{"line":113,"column":4}},{"start":{"line":113,"column":4},"end":{"line":113,"column":4}}]},"14":{"line":119,"type":"if","locations":[{"start":{"line":119,"column":4},"end":{"line":119,"column":4}},{"start":{"line":119,"column":4},"end":{"line":119,"column":4}}]},"15":{"line":121,"type":"if","locations":[{"start":{"line":121,"column":8},"end":{"line":121,"column":8}},{"start":{"line":121,"column":8},"end":{"line":121,"column":8}}]},"16":{"line":133,"type":"if","locations":[{"start":{"line":133,"column":12},"end":{"line":133,"column":12}},{"start":{"line":133,"column":12},"end":{"line":133,"column":12}}]},"17":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":4},"end":{"line":138,"column":4}},{"start":{"line":138,"column":4},"end":{"line":138,"column":4}}]},"18":{"line":145,"type":"if","locations":[{"start":{"line":145,"column":4},"end":{"line":145,"column":4}},{"start":{"line":145,"column":4},"end":{"line":145,"column":4}}]},"19":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":4},"end":{"line":149,"column":4}},{"start":{"line":149,"column":4},"end":{"line":149,"column":4}}]},"20":{"line":161,"type":"if","locations":[{"start":{"line":161,"column":8},"end":{"line":161,"column":8}},{"start":{"line":161,"column":8},"end":{"line":161,"column":8}}]},"21":{"line":164,"type":"binary-expr","locations":[{"start":{"line":164,"column":23},"end":{"line":164,"column":37}},{"start":{"line":164,"column":42},"end":{"line":164,"column":61}}]}},"code":["\"use strict\";","var fs = require('fs');","var path = require('path');","var env = require('./env');","var Spec = require('./Spec');","var Storage = require('./Storage');","","/**"," * An improvised filesystem-based storage implementation."," * Objects are saved into separate files in a hashed directory"," * tree. Ongoing operations are streamed into a log file."," * One can go surprisingly far with this kind of an approach."," * https://news.ycombinator.com/item?id=7872239 */","function FileStorage (dir) {","    Storage.call(this);","    this._host = null; //will be set during Host creation","    this.dir = path.resolve(dir);","    if (!fs.existsSync(this.dir)) {","        fs.mkdirSync(this.dir);","    }","    this._id = 'file';","    this.tail = {};","","    this.loadLog();","    this.rotateLog();","}","FileStorage.prototype = new Storage();","module.exports = FileStorage;","","FileStorage.prototype.stateFileName = function (spec) {","    var base = path.resolve(this.dir, spec.type());","    var file = path.resolve(base, spec.id());","    return file; // TODO hashing?","};","","FileStorage.prototype.logFileName = function () {","    return path.resolve(this.dir, \"_log\");","};","","FileStorage.prototype.writeState = function (spec, state, cb) {","    var self = this;","    var ti = spec.filter('/#');","    var fileName = this.stateFileName(ti);","    var dir = path.dirname(fileName);","    if (!fs.existsSync(dir)) {","        fs.mkdirSync(dir);","    }","    var save = JSON.stringify(state, undefined, 2);","    // dump JSON to the tmp file","    delete self.tails[ti]; // TODO save 'em in case write fails","    fs.writeFile(fileName, save, function onSave(err) {","        if (err) {","            console.error(\"failed to flush state; can't trim the log\", err);","        }","        cb(err);","    });","};","","FileStorage.prototype.writeOp = function (spec, value, cb) {","    var self = this;","    var ti = spec.filter('/#');","    var vm = spec.filter('!.');","    var tail = this.tails[ti] || (this.tails[ti] = {});","    if (vm in tail) {","        console.error('op replay @storage',vm,new Error().stack);","        return;","    }","    var clone = JSON.parse(JSON.stringify(value)); // FIXME performance please","    tail[vm] = clone;","    var record = ',\\n\"'+spec+'\":\\t'+JSON.stringify(clone);","    this.logFile.write (record, function onFail(err) {","        if (err) { self.close(null,err); }","        cb(err);","    });","};","","","FileStorage.prototype.readState = function (ti, callback) {","    var statefn = this.stateFileName(ti);","    // read in the state","    fs.readFile(statefn, function onRead(err, data) { // FIXME fascism","        var state = err ? {_version: '!0'} : JSON.parse(data.toString());","        callback(null,state||null); // important: no state is \"null\"","    });","};","","","FileStorage.prototype.readOps = function (ti, callback) {","    var tail = this.tails[ti];","    if (tail) {","        var unjsoned = {};","        for(var key in tail) {","            unjsoned[key] = tail[key];","        }","        tail = unjsoned;","    }","    callback(null, tail||null);","};","","","FileStorage.prototype.close = function (callback,error) {","    if (error) {","        console.log(\"fatal IO error\", error);","    }","    if (this.logFile) {","        this.rotateLog(true, callback);","    }","};","","","FileStorage.prototype.rotateLog = function (noOpen, callback) {","    var self = this;","    if (this.logFile) {","        this.logFile.end('}', callback);","        this.logFile = null;","        callback = undefined;","    }","","    if (!noOpen) {","","        if (fs.existsSync(this.logFileName())) {","            fs.rename(this.logFileName(),this.logFileName()+'.bak');","        }","        this.logFile = fs.createWriteStream(this.logFileName()); // TODO file swap","        this.logFile.on('error', function (err) {","            self.close(null,err);","        });","","        var json = JSON.stringify(this.tails, undefined, 2);","        json = '{\"\":\\n' + json; // open-ended JSON","","        this.logFile.write (json, function onFail(err) {","            if (err) { self.close(null,err); }","        });","","    }","","    if (callback) {","        callback();","    }","","};","","FileStorage.prototype.loadLog = function () {","    if ( !fs.existsSync(this.logFileName()) ) {","        return;","    }","    var json = fs.readFileSync(this.logFileName(), {encoding:\"utf8\"});","    if (!json) { return; }","    var log;","    try {","        log = JSON.parse(json);","    } catch (ex) {","        // open-ended JSON","        log = JSON.parse(json + '}');","    }","    this.tails = log[''];","    delete log[''];","    for(var s in log) {","        var spec = new Spec(s);","        if (spec.pattern()==='/#!.') {","            var ti = spec.filter('/#');","            var vm = spec.filter('!.');","            var tail = this.tails[ti] || (this.tails[ti] = {});","            tail[vm]  = log[spec];","        }","    }","};",""],"l":{"2":1,"3":1,"4":1,"5":1,"6":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"21":0,"22":0,"24":0,"25":0,"27":1,"28":1,"30":1,"31":0,"32":0,"33":0,"36":1,"37":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"48":0,"50":0,"51":0,"52":0,"53":0,"55":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"78":1,"79":0,"81":0,"82":0,"83":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"95":0,"97":0,"101":1,"102":0,"103":0,"105":0,"106":0,"111":1,"112":0,"113":0,"114":0,"115":0,"116":0,"119":0,"121":0,"122":0,"124":0,"125":0,"126":0,"129":0,"130":0,"132":0,"133":0,"138":0,"139":0,"144":1,"145":0,"146":0,"148":0,"149":0,"150":0,"151":0,"152":0,"155":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"163":0,"164":0,"165":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/LevelStorage.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/LevelStorage.js","s":{"1":1,"2":1,"3":1,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":1,"15":1,"16":1,"17":1,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":1,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":1,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":1,"83":0,"84":0,"85":0,"86":1,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0},"fnMap":{"1":{"name":"LevelStorage","line":9,"loc":{"start":{"line":9,"column":0},"end":{"line":9,"column":46}}},"2":{"name":"(anonymous_2)","line":25,"loc":{"start":{"line":25,"column":30},"end":{"line":25,"column":50}}},"3":{"name":"(anonymous_3)","line":29,"loc":{"start":{"line":29,"column":36},"end":{"line":29,"column":63}}},"4":{"name":"onSave","line":51,"loc":{"start":{"line":51,"column":26},"end":{"line":51,"column":47}}},"5":{"name":"(anonymous_5)","line":54,"loc":{"start":{"line":54,"column":35},"end":{"line":54,"column":48}}},"6":{"name":"(anonymous_6)","line":64,"loc":{"start":{"line":64,"column":33},"end":{"line":64,"column":60}}},"7":{"name":"(anonymous_7)","line":72,"loc":{"start":{"line":72,"column":39},"end":{"line":72,"column":53}}},"8":{"name":"(anonymous_8)","line":79,"loc":{"start":{"line":79,"column":35},"end":{"line":79,"column":59}}},"9":{"name":"(anonymous_9)","line":82,"loc":{"start":{"line":82,"column":38},"end":{"line":82,"column":57}}},"10":{"name":"(anonymous_10)","line":100,"loc":{"start":{"line":100,"column":33},"end":{"line":100,"column":57}}},"11":{"name":"recv","line":107,"loc":{"start":{"line":107,"column":11},"end":{"line":107,"column":39}}},"12":{"name":"(anonymous_12)","line":110,"loc":{"start":{"line":110,"column":18},"end":{"line":110,"column":31}}},"13":{"name":"(anonymous_13)","line":122,"loc":{"start":{"line":122,"column":18},"end":{"line":122,"column":31}}},"14":{"name":"(anonymous_14)","line":129,"loc":{"start":{"line":129,"column":29},"end":{"line":129,"column":53}}},"15":{"name":"(anonymous_15)","line":135,"loc":{"start":{"line":135,"column":31},"end":{"line":135,"column":57}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":27}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"3":{"start":{"line":4,"column":0},"end":{"line":4,"column":35}},"4":{"start":{"line":9,"column":0},"end":{"line":20,"column":1}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":23}},"6":{"start":{"line":11,"column":4},"end":{"line":11,"column":27}},"7":{"start":{"line":12,"column":4},"end":{"line":12,"column":22}},"8":{"start":{"line":13,"column":4},"end":{"line":13,"column":25}},"9":{"start":{"line":14,"column":4},"end":{"line":14,"column":18}},"10":{"start":{"line":15,"column":4},"end":{"line":15,"column":25}},"11":{"start":{"line":16,"column":4},"end":{"line":18,"column":5}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":44}},"13":{"start":{"line":19,"column":4},"end":{"line":19,"column":23}},"14":{"start":{"line":21,"column":0},"end":{"line":21,"column":39}},"15":{"start":{"line":22,"column":0},"end":{"line":22,"column":30}},"16":{"start":{"line":23,"column":0},"end":{"line":23,"column":45}},"17":{"start":{"line":25,"column":0},"end":{"line":27,"column":2}},"18":{"start":{"line":26,"column":4},"end":{"line":26,"column":55}},"19":{"start":{"line":29,"column":0},"end":{"line":62,"column":2}},"20":{"start":{"line":30,"column":4},"end":{"line":30,"column":32}},"21":{"start":{"line":31,"column":4},"end":{"line":31,"column":20}},"22":{"start":{"line":32,"column":4},"end":{"line":32,"column":31}},"23":{"start":{"line":34,"column":4},"end":{"line":37,"column":5}},"24":{"start":{"line":35,"column":8},"end":{"line":35,"column":76}},"25":{"start":{"line":36,"column":8},"end":{"line":36,"column":15}},"26":{"start":{"line":39,"column":4},"end":{"line":39,"column":37}},"27":{"start":{"line":40,"column":4},"end":{"line":40,"column":26}},"28":{"start":{"line":41,"column":4},"end":{"line":49,"column":5}},"29":{"start":{"line":42,"column":8},"end":{"line":47,"column":9}},"30":{"start":{"line":43,"column":12},"end":{"line":46,"column":15}},"31":{"start":{"line":48,"column":8},"end":{"line":48,"column":33}},"32":{"start":{"line":50,"column":4},"end":{"line":50,"column":46}},"33":{"start":{"line":51,"column":4},"end":{"line":60,"column":7}},"34":{"start":{"line":52,"column":8},"end":{"line":57,"column":9}},"35":{"start":{"line":53,"column":12},"end":{"line":53,"column":42}},"36":{"start":{"line":54,"column":12},"end":{"line":56,"column":15}},"37":{"start":{"line":55,"column":16},"end":{"line":55,"column":64}},"38":{"start":{"line":58,"column":8},"end":{"line":58,"column":55}},"39":{"start":{"line":59,"column":8},"end":{"line":59,"column":16}},"40":{"start":{"line":64,"column":0},"end":{"line":76,"column":2}},"41":{"start":{"line":65,"column":4},"end":{"line":65,"column":37}},"42":{"start":{"line":66,"column":4},"end":{"line":66,"column":31}},"43":{"start":{"line":67,"column":4},"end":{"line":69,"column":5}},"44":{"start":{"line":68,"column":8},"end":{"line":68,"column":31}},"45":{"start":{"line":70,"column":4},"end":{"line":70,"column":33}},"46":{"start":{"line":71,"column":4},"end":{"line":71,"column":44}},"47":{"start":{"line":72,"column":4},"end":{"line":75,"column":7}},"48":{"start":{"line":73,"column":8},"end":{"line":73,"column":51}},"49":{"start":{"line":74,"column":8},"end":{"line":74,"column":16}},"50":{"start":{"line":79,"column":0},"end":{"line":97,"column":2}},"51":{"start":{"line":80,"column":4},"end":{"line":80,"column":20}},"52":{"start":{"line":81,"column":4},"end":{"line":81,"column":23}},"53":{"start":{"line":82,"column":4},"end":{"line":96,"column":7}},"54":{"start":{"line":84,"column":8},"end":{"line":84,"column":60}},"55":{"start":{"line":85,"column":8},"end":{"line":85,"column":55}},"56":{"start":{"line":85,"column":32},"end":{"line":85,"column":53}},"57":{"start":{"line":87,"column":8},"end":{"line":92,"column":9}},"58":{"start":{"line":88,"column":12},"end":{"line":88,"column":23}},"59":{"start":{"line":89,"column":12},"end":{"line":89,"column":37}},"60":{"start":{"line":91,"column":12},"end":{"line":91,"column":38}},"61":{"start":{"line":94,"column":8},"end":{"line":94,"column":65}},"62":{"start":{"line":95,"column":8},"end":{"line":95,"column":29}},"63":{"start":{"line":100,"column":0},"end":{"line":127,"column":2}},"64":{"start":{"line":101,"column":4},"end":{"line":101,"column":20}},"65":{"start":{"line":102,"column":4},"end":{"line":102,"column":28}},"66":{"start":{"line":103,"column":4},"end":{"line":106,"column":7}},"67":{"start":{"line":107,"column":4},"end":{"line":126,"column":7}},"68":{"start":{"line":108,"column":8},"end":{"line":125,"column":9}},"69":{"start":{"line":109,"column":12},"end":{"line":109,"column":26}},"70":{"start":{"line":110,"column":12},"end":{"line":110,"column":35}},"71":{"start":{"line":111,"column":15},"end":{"line":125,"column":9}},"72":{"start":{"line":112,"column":12},"end":{"line":112,"column":37}},"73":{"start":{"line":113,"column":12},"end":{"line":113,"column":39}},"74":{"start":{"line":114,"column":12},"end":{"line":114,"column":52}},"75":{"start":{"line":115,"column":12},"end":{"line":115,"column":25}},"76":{"start":{"line":116,"column":12},"end":{"line":116,"column":25}},"77":{"start":{"line":118,"column":12},"end":{"line":118,"column":67}},"78":{"start":{"line":119,"column":12},"end":{"line":120,"column":52}},"79":{"start":{"line":121,"column":12},"end":{"line":121,"column":33}},"80":{"start":{"line":122,"column":12},"end":{"line":124,"column":15}},"81":{"start":{"line":123,"column":16},"end":{"line":123,"column":64}},"82":{"start":{"line":129,"column":0},"end":{"line":133,"column":2}},"83":{"start":{"line":130,"column":4},"end":{"line":130,"column":31}},"84":{"start":{"line":131,"column":4},"end":{"line":131,"column":29}},"85":{"start":{"line":132,"column":4},"end":{"line":132,"column":50}},"86":{"start":{"line":135,"column":0},"end":{"line":145,"column":2}},"87":{"start":{"line":136,"column":4},"end":{"line":138,"column":5}},"88":{"start":{"line":137,"column":8},"end":{"line":137,"column":45}},"89":{"start":{"line":139,"column":4},"end":{"line":144,"column":5}},"90":{"start":{"line":140,"column":8},"end":{"line":140,"column":32}},"91":{"start":{"line":141,"column":8},"end":{"line":141,"column":23}},"92":{"start":{"line":143,"column":8},"end":{"line":143,"column":19}}},"branchMap":{"1":{"line":16,"type":"if","locations":[{"start":{"line":16,"column":4},"end":{"line":16,"column":4}},{"start":{"line":16,"column":4},"end":{"line":16,"column":4}}]},"2":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":26},"end":{"line":17,"column":38}},{"start":{"line":17,"column":40},"end":{"line":17,"column":42}}]},"3":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":17},"end":{"line":26,"column":39}},{"start":{"line":26,"column":41},"end":{"line":26,"column":43}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"5":{"line":35,"type":"binary-expr","locations":[{"start":{"line":35,"column":48},"end":{"line":35,"column":58}},{"start":{"line":35,"column":60},"end":{"line":35,"column":74}}]},"6":{"line":41,"type":"if","locations":[{"start":{"line":41,"column":4},"end":{"line":41,"column":4}},{"start":{"line":41,"column":4},"end":{"line":41,"column":4}}]},"7":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":8},"end":{"line":52,"column":8}},{"start":{"line":52,"column":8},"end":{"line":52,"column":8}}]},"8":{"line":52,"type":"binary-expr","locations":[{"start":{"line":52,"column":12},"end":{"line":52,"column":16}},{"start":{"line":52,"column":20},"end":{"line":52,"column":34}},{"start":{"line":52,"column":38},"end":{"line":52,"column":45}}]},"9":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":16},"end":{"line":55,"column":19}},{"start":{"line":55,"column":23},"end":{"line":55,"column":63}}]},"10":{"line":58,"type":"binary-expr","locations":[{"start":{"line":58,"column":8},"end":{"line":58,"column":11}},{"start":{"line":58,"column":15},"end":{"line":58,"column":54}}]},"11":{"line":67,"type":"if","locations":[{"start":{"line":67,"column":4},"end":{"line":67,"column":4}},{"start":{"line":67,"column":4},"end":{"line":67,"column":4}}]},"12":{"line":73,"type":"binary-expr","locations":[{"start":{"line":73,"column":8},"end":{"line":73,"column":11}},{"start":{"line":73,"column":15},"end":{"line":73,"column":50}}]},"13":{"line":84,"type":"binary-expr","locations":[{"start":{"line":84,"column":23},"end":{"line":84,"column":26}},{"start":{"line":84,"column":30},"end":{"line":84,"column":59}}]},"14":{"line":85,"type":"if","locations":[{"start":{"line":85,"column":8},"end":{"line":85,"column":8}},{"start":{"line":85,"column":8},"end":{"line":85,"column":8}}]},"15":{"line":85,"type":"binary-expr","locations":[{"start":{"line":85,"column":12},"end":{"line":85,"column":15}},{"start":{"line":85,"column":19},"end":{"line":85,"column":28}}]},"16":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":8},"end":{"line":87,"column":8}},{"start":{"line":87,"column":8},"end":{"line":87,"column":8}}]},"17":{"line":87,"type":"binary-expr","locations":[{"start":{"line":87,"column":13},"end":{"line":87,"column":16}},{"start":{"line":87,"column":20},"end":{"line":87,"column":28}},{"start":{"line":87,"column":33},"end":{"line":87,"column":39}}]},"18":{"line":94,"type":"binary-expr","locations":[{"start":{"line":94,"column":29},"end":{"line":94,"column":39}},{"start":{"line":94,"column":43},"end":{"line":94,"column":57}}]},"19":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":108,"column":8}},{"start":{"line":108,"column":8},"end":{"line":108,"column":8}}]},"20":{"line":111,"type":"if","locations":[{"start":{"line":111,"column":15},"end":{"line":111,"column":15}},{"start":{"line":111,"column":15},"end":{"line":111,"column":15}}]},"21":{"line":118,"type":"binary-expr","locations":[{"start":{"line":118,"column":32},"end":{"line":118,"column":42}},{"start":{"line":118,"column":46},"end":{"line":118,"column":60}}]},"22":{"line":119,"type":"cond-expr","locations":[{"start":{"line":120,"column":16},"end":{"line":120,"column":45}},{"start":{"line":120,"column":48},"end":{"line":120,"column":51}}]},"23":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":16},"end":{"line":123,"column":19}},{"start":{"line":123,"column":23},"end":{"line":123,"column":63}}]},"24":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":4},"end":{"line":136,"column":4}},{"start":{"line":136,"column":4},"end":{"line":136,"column":4}}]},"25":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":4},"end":{"line":139,"column":4}},{"start":{"line":139,"column":4},"end":{"line":139,"column":4}}]}},"code":["\"use strict\";","var env = require('./env');","var Spec = require('./Spec');","var Storage = require('./Storage');","","/** LevelDB is a perfect local storage: string-indexed, alphanumerically","  * sorted, stores JSON with minimal overhead. Last but not least, has","  * the same interface as IndexedDB. */","function LevelStorage (id, options, callback) {","    Storage.call(this);","    this.options = options;","    this._host = null; // will be set by the Host","    this.db = options.db;","    this._id = id;","    this.filename = null;","    if (this.db.constructor===Function) {","        this.db = this.db(options.path||id);","    }","    this.logtails = {};","}","LevelStorage.prototype = new Storage();","module.exports = LevelStorage;","LevelStorage.prototype.isRoot = env.isServer;","","LevelStorage.prototype.open = function (callback) {","    this.db.open(this.options.dbOptions||{}, callback);","};","","LevelStorage.prototype.writeState = function (spec, state, cb) {","    console.log('>STATE',state);","    var self = this;","    var ti = spec.filter('/#');","    //var save = JSON.stringify(state, undefined, 2);","    if (!self.db) {","        console.warn('the storage is not open', this._host&&this._host._id);","        return;","    }","","    var json = JSON.stringify(state);","    var cleanup = [], key;","    if (ti in this.logtails) {","        while (key = this.logtails[ti].pop()) {","            cleanup.push({","                key: key,","                type: 'del'","            });","        }","        delete this.logtails[ti];","    }","    console.log('>FLUSH',json,cleanup.length);","    self.db.put(ti, json, function onSave(err) {","        if (!err && cleanup.length && self.db) {","            console.log('>CLEAN',cleanup);","            self.db.batch(cleanup, function(err){","                err && console.error('log trimming failed',err);","            });","        }","        err && console.error(\"state write error\", err);","        cb(err);","    });","","};","","LevelStorage.prototype.writeOp = function (spec, value, cb) {","    var json = JSON.stringify(value);","    var ti = spec.filter('/#');","    if (!this.logtails[ti]) {","        this.logtails[ti] = [];","    }","    this.logtails[ti].push(spec);","    console.log('>OP',spec.toString(),json);","    this.db.put(spec.toString(), json, function (err){","        err && console.error('op write error',err);","        cb(err);","    });","};","","","LevelStorage.prototype.readState = function (ti, callback) {","    var self = this;","    ti = ti.toString();","    this.db.get(ti, {asBuffer:false}, function(err,value){","","        var notFound = err && /^NotFound/.test(err.message);","        if (err && !notFound) { return callback(err); }","","        if ((err && notFound) || !value) {","            err = null;","            value = {_version: '!0'};","        } else {","            value = JSON.parse(value);","        }","","        console.log('<STATE',self._host && self._host._id,value);","        callback(err, value);","    });","};","","","LevelStorage.prototype.readOps = function (ti, callback) {","    var self = this;","    var tail = {}, log = [];","    var i = this.db.iterator({","        gt: ti+' ',","        lt: ti+'0'","    });","    i.next(function recv(err,key,value){","        if (err) {","            callback(err);","            i.end(function(err){});","        } else if (key) {","            var spec = new Spec(key);","            var vo = spec.filter('!.');","            tail[vo] = JSON.parse(value.toString());","            log.push(vo);","            i.next(recv);","        } else {","            console.log('<TAIL',self._host && self._host._id,tail);","            self.logtails[ti] = ti in self.logtails ?","                self.logtails[ti].concat(log) : log;","            callback(null, tail);","            i.end(function(err){","                err && console.error(\"can't close an iter\",err);","            });","        }","    });","};","","LevelStorage.prototype.off = function (spec,val,src) {","    var ti = spec.filter('/#');","    delete this.logtails[ti];","    Storage.prototype.off.call(this,spec,val,src);","};","","LevelStorage.prototype.close = function (callback,error) { // FIXME","    if (error) {","        console.log(\"fatal IO error\", error);","    }","    if (this.db) {","        this.db.close(callback);","        this.db = null;","    } else {","        callback(); // closed already","    }","};","","/*","process.on('uncaughtException', function(err) {","    CLOSE ALL DATABASES","});","*/",""],"l":{"2":1,"3":1,"4":1,"9":1,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"19":0,"21":1,"22":1,"23":1,"25":1,"26":0,"29":1,"30":0,"31":0,"32":0,"34":0,"35":0,"36":0,"39":0,"40":0,"41":0,"42":0,"43":0,"48":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"58":0,"59":0,"64":1,"65":0,"66":0,"67":0,"68":0,"70":0,"71":0,"72":0,"73":0,"74":0,"79":1,"80":0,"81":0,"82":0,"84":0,"85":0,"87":0,"88":0,"89":0,"91":0,"94":0,"95":0,"100":1,"101":0,"102":0,"103":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"118":0,"119":0,"121":0,"122":0,"123":0,"129":1,"130":0,"131":0,"132":0,"135":1,"136":0,"137":0,"139":0,"140":0,"141":0,"143":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/EinarosWSStream.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/EinarosWSStream.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":1,"25":1,"26":0,"27":0,"28":0,"29":1,"30":0,"31":0,"32":0,"33":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"EinarosWSStream","line":6,"loc":{"start":{"line":6,"column":0},"end":{"line":6,"column":29}}},"2":{"name":"(anonymous_2)","line":18,"loc":{"start":{"line":18,"column":18},"end":{"line":18,"column":30}}},"3":{"name":"(anonymous_3)","line":25,"loc":{"start":{"line":25,"column":19},"end":{"line":25,"column":31}}},"4":{"name":"(anonymous_4)","line":26,"loc":{"start":{"line":26,"column":21},"end":{"line":26,"column":36}}},"5":{"name":"(anonymous_5)","line":34,"loc":{"start":{"line":34,"column":19},"end":{"line":34,"column":34}}},"6":{"name":"(anonymous_6)","line":39,"loc":{"start":{"line":39,"column":31},"end":{"line":39,"column":53}}},"7":{"name":"(anonymous_7)","line":46,"loc":{"start":{"line":46,"column":34},"end":{"line":46,"column":50}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":27}},"3":{"start":{"line":6,"column":0},"end":{"line":35,"column":1}},"4":{"start":{"line":7,"column":4},"end":{"line":9,"column":17}},"5":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"6":{"start":{"line":12,"column":8},"end":{"line":12,"column":28}},"7":{"start":{"line":14,"column":4},"end":{"line":14,"column":17}},"8":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"9":{"start":{"line":16,"column":8},"end":{"line":16,"column":23}},"10":{"start":{"line":18,"column":4},"end":{"line":24,"column":7}},"11":{"start":{"line":19,"column":8},"end":{"line":19,"column":22}},"12":{"start":{"line":20,"column":8},"end":{"line":20,"column":24}},"13":{"start":{"line":21,"column":8},"end":{"line":23,"column":9}},"14":{"start":{"line":22,"column":12},"end":{"line":22,"column":34}},"15":{"start":{"line":25,"column":4},"end":{"line":25,"column":60}},"16":{"start":{"line":25,"column":33},"end":{"line":25,"column":56}},"17":{"start":{"line":26,"column":4},"end":{"line":33,"column":7}},"18":{"start":{"line":27,"column":8},"end":{"line":32,"column":9}},"19":{"start":{"line":28,"column":12},"end":{"line":28,"column":36}},"20":{"start":{"line":30,"column":12},"end":{"line":30,"column":58}},"21":{"start":{"line":31,"column":12},"end":{"line":31,"column":45}},"22":{"start":{"line":34,"column":4},"end":{"line":34,"column":66}},"23":{"start":{"line":34,"column":36},"end":{"line":34,"column":62}},"24":{"start":{"line":37,"column":0},"end":{"line":37,"column":33}},"25":{"start":{"line":39,"column":0},"end":{"line":44,"column":2}},"26":{"start":{"line":40,"column":4},"end":{"line":42,"column":5}},"27":{"start":{"line":41,"column":8},"end":{"line":41,"column":41}},"28":{"start":{"line":43,"column":4},"end":{"line":43,"column":27}},"29":{"start":{"line":46,"column":0},"end":{"line":52,"column":2}},"30":{"start":{"line":47,"column":4},"end":{"line":51,"column":5}},"31":{"start":{"line":48,"column":8},"end":{"line":48,"column":39}},"32":{"start":{"line":50,"column":8},"end":{"line":50,"column":38}},"33":{"start":{"line":54,"column":0},"end":{"line":54,"column":51}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":11,"column":4}},{"start":{"line":11,"column":4},"end":{"line":11,"column":4}}]},"2":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":4}},{"start":{"line":15,"column":4},"end":{"line":15,"column":4}}]},"3":{"line":25,"type":"binary-expr","locations":[{"start":{"line":25,"column":33},"end":{"line":25,"column":41}},{"start":{"line":25,"column":45},"end":{"line":25,"column":55}}]},"4":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":19}},{"start":{"line":28,"column":23},"end":{"line":28,"column":35}}]},"5":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":20}},{"start":{"line":31,"column":24},"end":{"line":31,"column":44}}]},"6":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":36},"end":{"line":34,"column":44}},{"start":{"line":34,"column":48},"end":{"line":34,"column":61}}]},"7":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]},"8":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":4},"end":{"line":47,"column":4}},{"start":{"line":47,"column":4},"end":{"line":47,"column":4}}]}},"code":["\"use strict\";","","var env = require('./env');","var ws_lib = require('ws');","","function EinarosWSStream(ws) {","    var self = this,","        ln = this.lstn = {},","        buf = [];","","    if (typeof ws === 'string') { // url passed","        ws = new ws_lib(ws);","    }","    this.ws = ws;","    if (ws.readyState !== 1/*WebSocket.OPEN*/) {","        this.buf = buf; //will wait for \"open\"","    }","    ws.on('open', function () {","        buf.reverse();","        self.buf = null;","        while (buf.length) {","            self.write(buf.pop());","        }","    });","    ws.on('close', function () { ln.close && ln.close(); });","    ws.on('message', function (msg) {","        try {","            ln.data && ln.data(msg);","        } catch (ex) {","            console.error('message processing fails', ex);","            ln.error && ln.error(ex.message);","        }","    });","    ws.on('error', function (msg) { ln.error && ln.error(msg); });","}","","module.exports = EinarosWSStream;","","EinarosWSStream.prototype.on = function (evname, fn) {","    if (evname in this.lstn) {","        throw new Error('not supported');","    }","    this.lstn[evname] = fn;","};","","EinarosWSStream.prototype.write = function (data) {","    if (this.buf) {","        this.buf.push(data.toString());","    } else {","        this.ws.send(data.toString());","    }","};","","env.streams.ws = env.streams.wss = EinarosWSStream;",""],"l":{"3":1,"4":1,"6":1,"7":0,"11":0,"12":0,"14":0,"15":0,"16":0,"18":0,"19":0,"20":0,"21":0,"22":0,"25":0,"26":0,"27":0,"28":0,"30":0,"31":0,"34":0,"37":1,"39":1,"40":0,"41":0,"43":0,"46":1,"47":0,"48":0,"50":0,"54":1}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/ReactMixin.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/ReactMixin.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0},"fnMap":{"1":{"name":"(anonymous_1)","line":8,"loc":{"start":{"line":8,"column":13},"end":{"line":8,"column":40}}},"2":{"name":"(anonymous_2)","line":20,"loc":{"start":{"line":20,"column":24},"end":{"line":20,"column":36}}},"3":{"name":"(anonymous_3)","line":43,"loc":{"start":{"line":43,"column":26},"end":{"line":43,"column":38}}},"4":{"name":"(anonymous_4)","line":54,"loc":{"start":{"line":54,"column":27},"end":{"line":54,"column":59}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":6,"column":0},"end":{"line":58,"column":2}},"4":{"start":{"line":9,"column":8},"end":{"line":9,"column":29}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":36}},"6":{"start":{"line":11,"column":8},"end":{"line":16,"column":9}},"7":{"start":{"line":12,"column":12},"end":{"line":12,"column":44}},"8":{"start":{"line":13,"column":12},"end":{"line":15,"column":13}},"9":{"start":{"line":14,"column":16},"end":{"line":14,"column":31}},"10":{"start":{"line":17,"column":8},"end":{"line":17,"column":42}},"11":{"start":{"line":21,"column":8},"end":{"line":21,"column":53}},"12":{"start":{"line":22,"column":8},"end":{"line":30,"column":9}},"13":{"start":{"line":23,"column":12},"end":{"line":29,"column":13}},"14":{"start":{"line":24,"column":16},"end":{"line":24,"column":30}},"15":{"start":{"line":25,"column":16},"end":{"line":25,"column":64}},"16":{"start":{"line":26,"column":16},"end":{"line":26,"column":40}},"17":{"start":{"line":28,"column":16},"end":{"line":28,"column":82}},"18":{"start":{"line":31,"column":8},"end":{"line":31,"column":44}},"19":{"start":{"line":32,"column":8},"end":{"line":32,"column":36}},"20":{"start":{"line":33,"column":8},"end":{"line":40,"column":9}},"21":{"start":{"line":34,"column":12},"end":{"line":34,"column":33}},"22":{"start":{"line":35,"column":12},"end":{"line":35,"column":34}},"23":{"start":{"line":36,"column":12},"end":{"line":36,"column":26}},"24":{"start":{"line":37,"column":12},"end":{"line":39,"column":13}},"25":{"start":{"line":38,"column":16},"end":{"line":38,"column":41}},"26":{"start":{"line":44,"column":8},"end":{"line":51,"column":9}},"27":{"start":{"line":45,"column":12},"end":{"line":45,"column":33}},"28":{"start":{"line":46,"column":12},"end":{"line":46,"column":27}},"29":{"start":{"line":47,"column":12},"end":{"line":47,"column":27}},"30":{"start":{"line":48,"column":12},"end":{"line":50,"column":13}},"31":{"start":{"line":49,"column":16},"end":{"line":49,"column":42}},"32":{"start":{"line":55,"column":8},"end":{"line":55,"column":84}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":8},"end":{"line":11,"column":8}},{"start":{"line":11,"column":8},"end":{"line":11,"column":8}}]},"2":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":12},"end":{"line":13,"column":12}},{"start":{"line":13,"column":12},"end":{"line":13,"column":12}}]},"3":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":19},"end":{"line":21,"column":34}},{"start":{"line":21,"column":38},"end":{"line":21,"column":52}}]},"4":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":22,"column":8}},{"start":{"line":22,"column":8},"end":{"line":22,"column":8}}]},"5":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":12},"end":{"line":23,"column":12}},{"start":{"line":23,"column":12},"end":{"line":23,"column":12}}]},"6":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":16},"end":{"line":23,"column":20}},{"start":{"line":23,"column":24},"end":{"line":23,"column":50}}]},"7":{"line":33,"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":33,"column":8}},{"start":{"line":33,"column":8},"end":{"line":33,"column":8}}]},"8":{"line":37,"type":"if","locations":[{"start":{"line":37,"column":12},"end":{"line":37,"column":12}},{"start":{"line":37,"column":12},"end":{"line":37,"column":12}}]},"9":{"line":44,"type":"if","locations":[{"start":{"line":44,"column":8},"end":{"line":44,"column":8}},{"start":{"line":44,"column":8},"end":{"line":44,"column":8}}]},"10":{"line":48,"type":"if","locations":[{"start":{"line":48,"column":12},"end":{"line":48,"column":12}},{"start":{"line":48,"column":12},"end":{"line":48,"column":12}}]},"11":{"line":55,"type":"binary-expr","locations":[{"start":{"line":55,"column":15},"end":{"line":55,"column":39}},{"start":{"line":55,"column":43},"end":{"line":55,"column":83}}]}},"code":["\"use strict\";","","var env = require('./env');","var Spec = require('./Spec');","","module.exports = {","","    deliver: function (spec,val,source) {","        var sync = this.sync;","        var version = sync._version;","        if (this.props.listenEntries) {","            var opId = '!' + spec.version();","            if (version !== opId) {","                version = opId;","            }","        }","        this.setState({version: version});","    },","","    componentWillMount: function () {","        var spec = this.props.spec || this.props.key;","        if (!Spec.is(spec)) {","            if (spec && this.constructor.modelType) {","                var id = spec;","                spec = new Spec(this.constructor.modelType,'/'); // TODO fn!!!","                spec = spec.add(id,'#');","            } else {","                throw new Error('not a specifier: '+spec+' at '+this._rootNodeID);","            }","        }","        this.sync = env.localhost.get(spec);","        this.setState({version:''});","        if (!env.isServer) {","            var sync = this.sync;","            sync.on('init', this); // TODO single listener","            sync.on(this);","            if (this.props.listenEntries) {","                sync.onObjectEvent(this);","            }","        }","    },","","    componentWillUnmount: function () {","        if (!env.isServer) {","            var sync = this.sync;","            sync.off(this);","            sync.off(this); // FIXME: remove after TODO: prevent second subscription","            if (this.props.listenEntries) {","                sync.offObjectEvent(this);","            }","        }","    },","","    shouldComponentUpdate: function (nextProps, nextState) {","        return this.props !== nextProps || this.state.version !== nextState.version;","    }","","};",""],"l":{"3":1,"4":1,"6":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"17":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"28":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"55":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/AsyncLoopbackConnection.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/AsyncLoopbackConnection.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1,"17":1,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0,"24":1,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":1,"36":0,"37":0,"38":0,"39":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"AsyncLoopbackConnection","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":38}}},"2":{"name":"(anonymous_2)","line":26,"loc":{"start":{"line":26,"column":41},"end":{"line":26,"column":53}}},"3":{"name":"(anonymous_3)","line":31,"loc":{"start":{"line":31,"column":39},"end":{"line":31,"column":61}}},"4":{"name":"(anonymous_4)","line":38,"loc":{"start":{"line":38,"column":44},"end":{"line":38,"column":62}}},"5":{"name":"(anonymous_5)","line":42,"loc":{"start":{"line":42,"column":42},"end":{"line":42,"column":57}}},"6":{"name":"(anonymous_6)","line":45,"loc":{"start":{"line":45,"column":15},"end":{"line":45,"column":27}}},"7":{"name":"(anonymous_7)","line":56,"loc":{"start":{"line":56,"column":42},"end":{"line":56,"column":54}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":5,"column":0},"end":{"line":21,"column":1}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":40}},"4":{"start":{"line":7,"column":4},"end":{"line":9,"column":5}},"5":{"start":{"line":8,"column":8},"end":{"line":8,"column":39}},"6":{"start":{"line":10,"column":4},"end":{"line":10,"column":19}},"7":{"start":{"line":11,"column":4},"end":{"line":11,"column":19}},"8":{"start":{"line":12,"column":4},"end":{"line":12,"column":20}},"9":{"start":{"line":13,"column":4},"end":{"line":15,"column":5}},"10":{"start":{"line":14,"column":8},"end":{"line":14,"column":37}},"11":{"start":{"line":16,"column":4},"end":{"line":16,"column":50}},"12":{"start":{"line":17,"column":4},"end":{"line":17,"column":27}},"13":{"start":{"line":18,"column":4},"end":{"line":20,"column":5}},"14":{"start":{"line":19,"column":8},"end":{"line":19,"column":21}},"15":{"start":{"line":22,"column":0},"end":{"line":22,"column":35}},"16":{"start":{"line":24,"column":0},"end":{"line":24,"column":47}},"17":{"start":{"line":26,"column":0},"end":{"line":29,"column":2}},"18":{"start":{"line":27,"column":4},"end":{"line":27,"column":56}},"19":{"start":{"line":28,"column":4},"end":{"line":28,"column":49}},"20":{"start":{"line":31,"column":0},"end":{"line":36,"column":2}},"21":{"start":{"line":32,"column":4},"end":{"line":34,"column":5}},"22":{"start":{"line":33,"column":8},"end":{"line":33,"column":60}},"23":{"start":{"line":35,"column":4},"end":{"line":35,"column":27}},"24":{"start":{"line":38,"column":0},"end":{"line":40,"column":2}},"25":{"start":{"line":39,"column":4},"end":{"line":39,"column":45}},"26":{"start":{"line":42,"column":0},"end":{"line":54,"column":2}},"27":{"start":{"line":43,"column":4},"end":{"line":43,"column":20}},"28":{"start":{"line":44,"column":4},"end":{"line":44,"column":43}},"29":{"start":{"line":45,"column":4},"end":{"line":53,"column":10}},"30":{"start":{"line":46,"column":8},"end":{"line":46,"column":31}},"31":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"32":{"start":{"line":48,"column":12},"end":{"line":48,"column":19}},"33":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"34":{"start":{"line":51,"column":12},"end":{"line":51,"column":45}},"35":{"start":{"line":56,"column":0},"end":{"line":61,"column":2}},"36":{"start":{"line":57,"column":4},"end":{"line":57,"column":50}},"37":{"start":{"line":58,"column":4},"end":{"line":58,"column":27}},"38":{"start":{"line":59,"column":4},"end":{"line":59,"column":25}},"39":{"start":{"line":60,"column":4},"end":{"line":60,"column":41}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":7,"column":4}},{"start":{"line":7,"column":4},"end":{"line":7,"column":4}}]},"2":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":4},"end":{"line":13,"column":4}},{"start":{"line":13,"column":4},"end":{"line":13,"column":4}}]},"3":{"line":18,"type":"if","locations":[{"start":{"line":18,"column":4},"end":{"line":18,"column":4}},{"start":{"line":18,"column":4},"end":{"line":18,"column":4}}]},"4":{"line":18,"type":"binary-expr","locations":[{"start":{"line":18,"column":8},"end":{"line":18,"column":12}},{"start":{"line":18,"column":16},"end":{"line":18,"column":33}}]},"5":{"line":32,"type":"if","locations":[{"start":{"line":32,"column":4},"end":{"line":32,"column":4}},{"start":{"line":32,"column":4},"end":{"line":32,"column":4}}]},"6":{"line":39,"type":"binary-expr","locations":[{"start":{"line":39,"column":4},"end":{"line":39,"column":18}},{"start":{"line":39,"column":22},"end":{"line":39,"column":44}}]},"7":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":4},"end":{"line":44,"column":7}},{"start":{"line":44,"column":11},"end":{"line":44,"column":42}}]},"8":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":47,"column":8}},{"start":{"line":47,"column":8},"end":{"line":47,"column":8}}]},"9":{"line":59,"type":"binary-expr","locations":[{"start":{"line":59,"column":4},"end":{"line":59,"column":8}},{"start":{"line":59,"column":12},"end":{"line":59,"column":24}}]},"10":{"line":60,"type":"binary-expr","locations":[{"start":{"line":60,"column":4},"end":{"line":60,"column":19}},{"start":{"line":60,"column":23},"end":{"line":60,"column":40}}]}},"code":["\"use strict\";","","var env = require('./env');","","function AsyncLoopbackConnection(url) {","    var m = url.match(/loopback:(\\w+)/);","    if (!m) {","        throw new Error('invalid url');","    }","    this.id = m[1];","    this.lstn = {};","    this.queue = [];","    if (this.id in AsyncLoopbackConnection.pipes) {","        throw new Error('duplicate');","    }","    AsyncLoopbackConnection.pipes[this.id] = this;","    var pair = this.pair();","    if (pair && pair.queue.length) {","        pair.write();","    }","}","AsyncLoopbackConnection.pipes = {};","","env.streams.loopback = AsyncLoopbackConnection;","","AsyncLoopbackConnection.prototype.pair = function () {","    var pairId = this.id.match(/./g).reverse().join('');","    return AsyncLoopbackConnection.pipes[pairId];","};","","AsyncLoopbackConnection.prototype.on = function (evname, fn) {","    if (evname in this.lstn) {","        throw new Error('multiple listeners not supported');","    }","    this.lstn[evname] = fn;","};","","AsyncLoopbackConnection.prototype.receive = function (string) {","    this.lstn.data && this.lstn.data(string);","};","","AsyncLoopbackConnection.prototype.write = function (obj) {","    var self = this;","    obj && self.queue.push(obj.toString());","    setTimeout(function () {","        var pair = self.pair();","        if (!pair) {","            return;","        }","        while (self.queue.length) {","            pair.receive(self.queue.shift());","        }","    }, 1);","};","","AsyncLoopbackConnection.prototype.close = function () {","    delete AsyncLoopbackConnection.pipes[this.id];","    var pair = this.pair();","    pair && pair.close();","    this.lstn.close && this.lstn.close();","};",""],"l":{"3":1,"5":1,"6":0,"7":0,"8":0,"10":0,"11":0,"12":0,"13":0,"14":0,"16":0,"17":0,"18":0,"19":0,"22":1,"24":1,"26":1,"27":0,"28":0,"31":1,"32":0,"33":0,"35":0,"38":1,"39":0,"42":1,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"50":0,"51":0,"56":1,"57":0,"58":0,"59":0,"60":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/ce.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/ce.js","s":{"1":1,"2":1,"3":0,"4":1,"5":0,"6":0,"7":0,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":1,"56":1,"57":0,"58":0,"59":1,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":1,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":1,"119":0,"120":1,"121":0,"122":0,"123":0,"124":1,"125":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0,0,0,0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0],"27":[0,0],"28":[0,0],"29":[0,0],"30":[0,0],"31":[0,0],"32":[0,0],"33":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},"fnMap":{"1":{"name":"format2str","line":4,"loc":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}}},"2":{"name":"htmlesc","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":24}}},"3":{"name":"rtf2txt","line":13,"loc":{"start":{"line":13,"column":0},"end":{"line":13,"column":23}}},"4":{"name":"(anonymous_4)","line":14,"loc":{"start":{"line":14,"column":25},"end":{"line":14,"column":36}}},"5":{"name":"meta2attstr","line":18,"loc":{"start":{"line":18,"column":0},"end":{"line":18,"column":28}}},"6":{"name":"rtf2html","line":43,"loc":{"start":{"line":43,"column":0},"end":{"line":43,"column":28}}},"7":{"name":"DOMEditor","line":82,"loc":{"start":{"line":82,"column":0},"end":{"line":82,"column":26}}},"8":{"name":"(anonymous_8)","line":85,"loc":{"start":{"line":85,"column":29},"end":{"line":85,"column":51}}},"9":{"name":"dom2rtf","line":103,"loc":{"start":{"line":103,"column":0},"end":{"line":103,"column":43}}},"10":{"name":"normalizeRTF","line":133,"loc":{"start":{"line":133,"column":0},"end":{"line":133,"column":28}}},"11":{"name":"Weave","line":170,"loc":{"start":{"line":170,"column":0},"end":{"line":170,"column":23}}},"12":{"name":"(anonymous_12)","line":174,"loc":{"start":{"line":174,"column":25},"end":{"line":174,"column":47}}},"13":{"name":"(anonymous_13)","line":187,"loc":{"start":{"line":187,"column":25},"end":{"line":187,"column":47}}}},"statementMap":{"1":{"start":{"line":4,"column":0},"end":{"line":5,"column":1}},"2":{"start":{"line":7,"column":0},"end":{"line":9,"column":1}},"3":{"start":{"line":8,"column":4},"end":{"line":8,"column":16}},"4":{"start":{"line":13,"column":0},"end":{"line":16,"column":1}},"5":{"start":{"line":14,"column":4},"end":{"line":14,"column":76}},"6":{"start":{"line":14,"column":38},"end":{"line":14,"column":73}},"7":{"start":{"line":15,"column":4},"end":{"line":15,"column":24}},"8":{"start":{"line":18,"column":0},"end":{"line":40,"column":1}},"9":{"start":{"line":19,"column":4},"end":{"line":19,"column":61}},"10":{"start":{"line":20,"column":4},"end":{"line":20,"column":59}},"11":{"start":{"line":21,"column":4},"end":{"line":21,"column":46}},"12":{"start":{"line":22,"column":4},"end":{"line":24,"column":46}},"13":{"start":{"line":23,"column":8},"end":{"line":24,"column":46}},"14":{"start":{"line":24,"column":12},"end":{"line":24,"column":46}},"15":{"start":{"line":26,"column":4},"end":{"line":26,"column":25}},"16":{"start":{"line":27,"column":4},"end":{"line":28,"column":42}},"17":{"start":{"line":28,"column":8},"end":{"line":28,"column":42}},"18":{"start":{"line":29,"column":4},"end":{"line":29,"column":37}},"19":{"start":{"line":31,"column":4},"end":{"line":31,"column":25}},"20":{"start":{"line":32,"column":4},"end":{"line":33,"column":41}},"21":{"start":{"line":33,"column":8},"end":{"line":33,"column":41}},"22":{"start":{"line":34,"column":4},"end":{"line":34,"column":39}},"23":{"start":{"line":36,"column":4},"end":{"line":37,"column":45}},"24":{"start":{"line":37,"column":8},"end":{"line":37,"column":45}},"25":{"start":{"line":39,"column":4},"end":{"line":39,"column":24}},"26":{"start":{"line":43,"column":0},"end":{"line":80,"column":1}},"27":{"start":{"line":44,"column":4},"end":{"line":44,"column":29}},"28":{"start":{"line":45,"column":4},"end":{"line":45,"column":56}},"29":{"start":{"line":46,"column":4},"end":{"line":46,"column":66}},"30":{"start":{"line":47,"column":4},"end":{"line":47,"column":23}},"31":{"start":{"line":48,"column":4},"end":{"line":77,"column":5}},"32":{"start":{"line":49,"column":8},"end":{"line":53,"column":54}},"33":{"start":{"line":50,"column":12},"end":{"line":50,"column":25}},"34":{"start":{"line":51,"column":12},"end":{"line":51,"column":21}},"35":{"start":{"line":52,"column":15},"end":{"line":53,"column":54}},"36":{"start":{"line":53,"column":12},"end":{"line":53,"column":54}},"37":{"start":{"line":54,"column":8},"end":{"line":54,"column":33}},"38":{"start":{"line":55,"column":8},"end":{"line":68,"column":9}},"39":{"start":{"line":57,"column":12},"end":{"line":60,"column":13}},"40":{"start":{"line":58,"column":16},"end":{"line":58,"column":46}},"41":{"start":{"line":59,"column":16},"end":{"line":59,"column":31}},"42":{"start":{"line":62,"column":12},"end":{"line":65,"column":30}},"43":{"start":{"line":63,"column":16},"end":{"line":63,"column":42}},"44":{"start":{"line":65,"column":16},"end":{"line":65,"column":30}},"45":{"start":{"line":66,"column":12},"end":{"line":66,"column":39}},"46":{"start":{"line":67,"column":12},"end":{"line":67,"column":32}},"47":{"start":{"line":70,"column":8},"end":{"line":70,"column":36}},"48":{"start":{"line":71,"column":8},"end":{"line":74,"column":9}},"49":{"start":{"line":72,"column":12},"end":{"line":72,"column":36}},"50":{"start":{"line":73,"column":12},"end":{"line":73,"column":34}},"51":{"start":{"line":75,"column":8},"end":{"line":75,"column":39}},"52":{"start":{"line":76,"column":8},"end":{"line":76,"column":59}},"53":{"start":{"line":78,"column":4},"end":{"line":78,"column":45}},"54":{"start":{"line":79,"column":4},"end":{"line":79,"column":25}},"55":{"start":{"line":82,"column":0},"end":{"line":83,"column":1}},"56":{"start":{"line":85,"column":0},"end":{"line":99,"column":2}},"57":{"start":{"line":86,"column":4},"end":{"line":86,"column":29}},"58":{"start":{"line":88,"column":4},"end":{"line":88,"column":26}},"59":{"start":{"line":103,"column":0},"end":{"line":131,"column":1}},"60":{"start":{"line":104,"column":4},"end":{"line":104,"column":20}},"61":{"start":{"line":105,"column":4},"end":{"line":105,"column":26}},"62":{"start":{"line":106,"column":4},"end":{"line":106,"column":72}},"63":{"start":{"line":106,"column":51},"end":{"line":106,"column":72}},"64":{"start":{"line":107,"column":4},"end":{"line":129,"column":9}},"65":{"start":{"line":108,"column":8},"end":{"line":129,"column":9}},"66":{"start":{"line":109,"column":12},"end":{"line":109,"column":34}},"67":{"start":{"line":110,"column":12},"end":{"line":111,"column":48}},"68":{"start":{"line":111,"column":16},"end":{"line":111,"column":48}},"69":{"start":{"line":112,"column":12},"end":{"line":123,"column":13}},"70":{"start":{"line":113,"column":27},"end":{"line":113,"column":65}},"71":{"start":{"line":113,"column":66},"end":{"line":113,"column":72}},"72":{"start":{"line":115,"column":27},"end":{"line":115,"column":42}},"73":{"start":{"line":116,"column":27},"end":{"line":116,"column":33}},"74":{"start":{"line":117,"column":27},"end":{"line":117,"column":54}},"75":{"start":{"line":117,"column":55},"end":{"line":117,"column":61}},"76":{"start":{"line":118,"column":27},"end":{"line":118,"column":42}},"77":{"start":{"line":118,"column":43},"end":{"line":118,"column":49}},"78":{"start":{"line":119,"column":27},"end":{"line":119,"column":55}},"79":{"start":{"line":119,"column":56},"end":{"line":119,"column":62}},"80":{"start":{"line":120,"column":27},"end":{"line":120,"column":52}},"81":{"start":{"line":121,"column":27},"end":{"line":121,"column":55}},"82":{"start":{"line":122,"column":27},"end":{"line":122,"column":33}},"83":{"start":{"line":124,"column":12},"end":{"line":124,"column":56}},"84":{"start":{"line":125,"column":15},"end":{"line":129,"column":9}},"85":{"start":{"line":126,"column":12},"end":{"line":126,"column":29}},"86":{"start":{"line":127,"column":12},"end":{"line":127,"column":52}},"87":{"start":{"line":130,"column":4},"end":{"line":130,"column":15}},"88":{"start":{"line":133,"column":0},"end":{"line":168,"column":1}},"89":{"start":{"line":134,"column":4},"end":{"line":134,"column":48}},"90":{"start":{"line":135,"column":4},"end":{"line":166,"column":5}},"91":{"start":{"line":136,"column":8},"end":{"line":136,"column":23}},"92":{"start":{"line":137,"column":8},"end":{"line":138,"column":21}},"93":{"start":{"line":138,"column":12},"end":{"line":138,"column":21}},"94":{"start":{"line":139,"column":8},"end":{"line":164,"column":21}},"95":{"start":{"line":140,"column":12},"end":{"line":143,"column":28}},"96":{"start":{"line":141,"column":16},"end":{"line":141,"column":38}},"97":{"start":{"line":143,"column":16},"end":{"line":143,"column":28}},"98":{"start":{"line":144,"column":15},"end":{"line":164,"column":21}},"99":{"start":{"line":145,"column":12},"end":{"line":145,"column":29}},"100":{"start":{"line":146,"column":12},"end":{"line":150,"column":17}},"101":{"start":{"line":147,"column":16},"end":{"line":150,"column":17}},"102":{"start":{"line":148,"column":20},"end":{"line":148,"column":34}},"103":{"start":{"line":149,"column":20},"end":{"line":149,"column":26}},"104":{"start":{"line":151,"column":12},"end":{"line":156,"column":21}},"105":{"start":{"line":152,"column":16},"end":{"line":156,"column":21}},"106":{"start":{"line":153,"column":20},"end":{"line":156,"column":21}},"107":{"start":{"line":154,"column":24},"end":{"line":154,"column":38}},"108":{"start":{"line":155,"column":24},"end":{"line":155,"column":30}},"109":{"start":{"line":157,"column":12},"end":{"line":157,"column":23}},"110":{"start":{"line":158,"column":12},"end":{"line":159,"column":25}},"111":{"start":{"line":159,"column":16},"end":{"line":159,"column":25}},"112":{"start":{"line":160,"column":12},"end":{"line":161,"column":26}},"113":{"start":{"line":161,"column":16},"end":{"line":161,"column":26}},"114":{"start":{"line":162,"column":12},"end":{"line":162,"column":24}},"115":{"start":{"line":164,"column":12},"end":{"line":164,"column":21}},"116":{"start":{"line":165,"column":8},"end":{"line":165,"column":17}},"117":{"start":{"line":167,"column":4},"end":{"line":167,"column":15}},"118":{"start":{"line":170,"column":0},"end":{"line":172,"column":1}},"119":{"start":{"line":171,"column":4},"end":{"line":171,"column":18}},"120":{"start":{"line":174,"column":0},"end":{"line":185,"column":2}},"121":{"start":{"line":176,"column":4},"end":{"line":176,"column":35}},"122":{"start":{"line":178,"column":4},"end":{"line":178,"column":51}},"123":{"start":{"line":183,"column":4},"end":{"line":183,"column":19}},"124":{"start":{"line":187,"column":0},"end":{"line":194,"column":2}},"125":{"start":{"line":193,"column":4},"end":{"line":193,"column":20}}},"branchMap":{"1":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":45},"end":{"line":14,"column":46}},{"start":{"line":14,"column":50},"end":{"line":14,"column":72}}]},"2":{"line":23,"type":"if","locations":[{"start":{"line":23,"column":8},"end":{"line":23,"column":8}},{"start":{"line":23,"column":8},"end":{"line":23,"column":8}}]},"3":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":16},"end":{"line":24,"column":20}},{"start":{"line":24,"column":22},"end":{"line":24,"column":25}}]},"4":{"line":29,"type":"binary-expr","locations":[{"start":{"line":29,"column":4},"end":{"line":29,"column":19}},{"start":{"line":29,"column":23},"end":{"line":29,"column":36}}]},"5":{"line":34,"type":"binary-expr","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":21}},{"start":{"line":34,"column":25},"end":{"line":34,"column":38}}]},"6":{"line":44,"type":"binary-expr","locations":[{"start":{"line":44,"column":4},"end":{"line":44,"column":12}},{"start":{"line":44,"column":17},"end":{"line":44,"column":27}}]},"7":{"line":45,"type":"binary-expr","locations":[{"start":{"line":45,"column":4},"end":{"line":45,"column":32}},{"start":{"line":45,"column":37},"end":{"line":45,"column":54}}]},"8":{"line":49,"type":"if","locations":[{"start":{"line":49,"column":8},"end":{"line":49,"column":8}},{"start":{"line":49,"column":8},"end":{"line":49,"column":8}}]},"9":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":15},"end":{"line":52,"column":15}},{"start":{"line":52,"column":15},"end":{"line":52,"column":15}}]},"10":{"line":55,"type":"if","locations":[{"start":{"line":55,"column":8},"end":{"line":55,"column":8}},{"start":{"line":55,"column":8},"end":{"line":55,"column":8}}]},"11":{"line":57,"type":"if","locations":[{"start":{"line":57,"column":12},"end":{"line":57,"column":12}},{"start":{"line":57,"column":12},"end":{"line":57,"column":12}}]},"12":{"line":62,"type":"if","locations":[{"start":{"line":62,"column":12},"end":{"line":62,"column":12}},{"start":{"line":62,"column":12},"end":{"line":62,"column":12}}]},"13":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":8},"end":{"line":71,"column":8}},{"start":{"line":71,"column":8},"end":{"line":71,"column":8}}]},"14":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":4},"end":{"line":78,"column":11}},{"start":{"line":78,"column":15},"end":{"line":78,"column":44}}]},"15":{"line":104,"type":"binary-expr","locations":[{"start":{"line":104,"column":10},"end":{"line":104,"column":13}},{"start":{"line":104,"column":17},"end":{"line":104,"column":19}}]},"16":{"line":105,"type":"binary-expr","locations":[{"start":{"line":105,"column":13},"end":{"line":105,"column":19}},{"start":{"line":105,"column":23},"end":{"line":105,"column":25}}]},"17":{"line":106,"type":"if","locations":[{"start":{"line":106,"column":4},"end":{"line":106,"column":4}},{"start":{"line":106,"column":4},"end":{"line":106,"column":4}}]},"18":{"line":106,"type":"binary-expr","locations":[{"start":{"line":106,"column":8},"end":{"line":106,"column":12}},{"start":{"line":106,"column":16},"end":{"line":106,"column":49}}]},"19":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":20},"end":{"line":107,"column":21}},{"start":{"line":107,"column":25},"end":{"line":107,"column":33}}]},"20":{"line":108,"type":"if","locations":[{"start":{"line":108,"column":8},"end":{"line":108,"column":8}},{"start":{"line":108,"column":8},"end":{"line":108,"column":8}}]},"21":{"line":112,"type":"switch","locations":[{"start":{"line":113,"column":16},"end":{"line":113,"column":72}},{"start":{"line":114,"column":16},"end":{"line":116,"column":33}},{"start":{"line":117,"column":16},"end":{"line":117,"column":61}},{"start":{"line":118,"column":16},"end":{"line":118,"column":49}},{"start":{"line":119,"column":16},"end":{"line":119,"column":62}},{"start":{"line":120,"column":16},"end":{"line":122,"column":33}}]},"22":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":15},"end":{"line":125,"column":15}},{"start":{"line":125,"column":15},"end":{"line":125,"column":15}}]},"23":{"line":137,"type":"if","locations":[{"start":{"line":137,"column":8},"end":{"line":137,"column":8}},{"start":{"line":137,"column":8},"end":{"line":137,"column":8}}]},"24":{"line":139,"type":"if","locations":[{"start":{"line":139,"column":8},"end":{"line":139,"column":8}},{"start":{"line":139,"column":8},"end":{"line":139,"column":8}}]},"25":{"line":140,"type":"if","locations":[{"start":{"line":140,"column":12},"end":{"line":140,"column":12}},{"start":{"line":140,"column":12},"end":{"line":140,"column":12}}]},"26":{"line":140,"type":"binary-expr","locations":[{"start":{"line":140,"column":16},"end":{"line":140,"column":20}},{"start":{"line":140,"column":24},"end":{"line":140,"column":49}}]},"27":{"line":144,"type":"if","locations":[{"start":{"line":144,"column":15},"end":{"line":144,"column":15}},{"start":{"line":144,"column":15},"end":{"line":144,"column":15}}]},"28":{"line":147,"type":"if","locations":[{"start":{"line":147,"column":16},"end":{"line":147,"column":16}},{"start":{"line":147,"column":16},"end":{"line":147,"column":16}}]},"29":{"line":151,"type":"if","locations":[{"start":{"line":151,"column":12},"end":{"line":151,"column":12}},{"start":{"line":151,"column":12},"end":{"line":151,"column":12}}]},"30":{"line":153,"type":"if","locations":[{"start":{"line":153,"column":20},"end":{"line":153,"column":20}},{"start":{"line":153,"column":20},"end":{"line":153,"column":20}}]},"31":{"line":158,"type":"if","locations":[{"start":{"line":158,"column":12},"end":{"line":158,"column":12}},{"start":{"line":158,"column":12},"end":{"line":158,"column":12}}]},"32":{"line":160,"type":"if","locations":[{"start":{"line":160,"column":12},"end":{"line":160,"column":12}},{"start":{"line":160,"column":12},"end":{"line":160,"column":12}}]},"33":{"line":160,"type":"binary-expr","locations":[{"start":{"line":160,"column":16},"end":{"line":160,"column":20}},{"start":{"line":160,"column":24},"end":{"line":160,"column":49}}]}},"code":["/* jshint ignore: start */","// FIXME UPDATE cherrypick","","function format2str (format) {","}","","function htmlesc (text) {","    return text;","}","","/// range/ids -???  first, all   then...","","function rtf2txt (rtf) {","    var txt = rtf.filter(function(o){ return o && o.constructor===String });","    return txt.join('');","}","","function meta2attstr (meta) {","    var ret = [], styles={}, classes={}, atts={}, structs={};","    var kv = {':':styles,'_':classes,'=':atts,'s':structs};","    var re_meta = /^(\\w[\\w_\\-]*)([:_=]?)$/, m;","    for(key in meta)","        if (m=re_meta.exec(key))","            kv [m[2]||'s'] [m[1]] = meta[key];","","    ret.push(' class=\"');","    for (var c in classes)","        ret.push(c, '_', classes[c], ' ');","    ret.pop()===' ' && ret.push('\"');","","    ret.push(' style=\"');","    for (var s in styles)","        ret.push(s, ':', styles[s], ';');","    ret.pop() === ';' && ret.push('\"');","","    for (var a in atts)","        ret.push(' ', a, '=\"', atts[a], '\"'); // TODO esc \"","","    return ret.join('');","};","","","function rtf2html (origRTF) { // TODO meta_in, indent","    !origRTF && (origRTF='');","    origRTF.constructor===String && (origRTF=[origRTF]);","    var html = [], openTag = null, rtf=origRTF.slice(0).reverse();","    var frg, format={};","    while (frg=rtf.pop()) {","        if (frg.constructor===Object) {","            format = frg;","            continue;","        } else if (frg.constructor!==String)","            throw new Error('format violation: ',frg);","        var head = frg.charAt(0);","        if (head==='\\n') {","            // plant open/close // use struct markers","            if (openTag) {","                html.push('</',openTag,'>\\n');","                openTag = null;","            }","            // TODO check structf for indent/nesting","            if (format.head)","                openTag = 'h'+format.head;","            else","                openTag = 'p';","            html.push('<',openTag,'>'); // TODO pid","            frg = frg.substr(1);","        }","        //find next struct (lookahead; had \\n => check for \\t)","        var n = frg.indexOf('\\n',1);","        if (n!==-1) { // repair","            rtf.push(frg.substr(n));","            frg = frg.substr(0,n);","        }","        var atts = meta2attstr(format);","        html.push('<span',atts,'>',htmlesc(frg),'</span>');","    }","    openTag && html.push('</',openTag,'>\\n');","    return html.join('');","}","","function DOMEditor (root) {","}","","DOMEditor.prototype.setRTF = function (range, rtf) {","    var html = rtf2html(rtf);","    // staging element","    body.innerHTML = html;","    /*","    var from=range.get('#'), till=range.get('#',from);","    // clean DOM range","    for(var pid=from; pid && pid!==till; pid=???)","        body.removeChild(pid);","    // install","    while ()","        body.insertBefore(newp,till); // TODO batch?","    // recover selection","    // */","};","","","//DOMEditor.prototype.getRTF = function (from, till, format, rtf) {","function dom2rtf (from, till, format, rtf) {","    rtf = rtf || [];","    format = format || {};","    if (till && from.parentNode!==till.parentNode) throw 'not siblings';","    for(var i=from; i && i!==till; i=i.nextSibling)","        if (i.nodeType===Document.ELEMENT_NODE) {","            var child_format = {};","            for(var key in format)","                child_format[key] = format[key];","            switch (i.nodeName.toUpperCase()) {","                case 'B':  child_format['font-weight:'] = 'bold'; break;","                case 'BR': // rtf.push(struct);","                           rtf.push('\\n');","                           break;","                case 'UL': child_format['list'] = 'o'; break;","                case 'LI': rtf.push('\\n'); break;","                case 'P':  rtf.push(child_format,'\\n'); break;","                case 'H1': child_format['head'] = 1;","                           rtf.push(child_format,'\\n');","                           break;","            }","            dom2rtf(i.firstChild,null,child_format,rtf);","        } else if (i.nodeType===Document.TEXT_NODE) {","            rtf.push(format);","            rtf.push(i.nodeValue.replace(/\\n/g,'')); // TODO \\n spaces","        } else {","        }","    return rtf;","}","","function normalizeRTF (rtf) {","    var ret = [], format = {}, prev = undefined;","    for(var i=0; i<rtf.length; i++) {","        var n = rtf[i];","        if (!n)","            continue;","        if (n.constructor===String) {","            if (prev && prev.constructor===String)","                ret.push(ret.pop()+n);","            else","                ret.push(n);","        } else if (n.constructor===Object) {","            var match = true;","            for(var key in n)","                if (n[key]!==format[key]) {","                    match = false;","                    break;","                }","            if (match)","                for(var key in format)","                    if (n[key]!==format[key]) {","                        match = false;","                        break;","                    }","            format = n;","            if (match)","                continue;","            if (prev && prev.constructor===Object)","                ret.pop();","            ret.push(n);","        } else","            continue;","        prev = n;","    }","    return ret;","}","","function Weave (chain) {","    this.rtf = []; // TODO this.weave :)","}","","Weave.prototype.setRTF = function (range, rtf) {","    // SHORTCUT: equalize","    var preex = this.getRTF(range);","    // diff","    var basic = dmp.diff_main(preexText,givenText);","    // make ops","    // pass to compare formattings","    // (SEE NOTEBOOK 22feb Kiev)","    // just effective formatting on new/remaining parts","    this.text = '';","    // apply","};","","Weave.prototype.getRTF = function (range,spec) {","    // find paragraph","","    // render according to the mode, base, version","    // cumul formattings","","    return this.rtf;","};","/* jshint ignore: end  */",""],"l":{"4":1,"7":1,"8":0,"13":1,"14":0,"15":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"26":0,"27":0,"28":0,"29":0,"31":0,"32":0,"33":0,"34":0,"36":0,"37":0,"39":0,"43":1,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"57":0,"58":0,"59":0,"62":0,"63":0,"65":0,"66":0,"67":0,"70":0,"71":0,"72":0,"73":0,"75":0,"76":0,"78":0,"79":0,"82":1,"85":1,"86":0,"88":0,"103":1,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"124":0,"125":0,"126":0,"127":0,"130":0,"133":1,"134":0,"135":0,"136":0,"137":0,"138":0,"139":0,"140":0,"141":0,"143":0,"144":0,"145":0,"146":0,"147":0,"148":0,"149":0,"151":0,"152":0,"153":0,"154":0,"155":0,"157":0,"158":0,"159":0,"160":0,"161":0,"162":0,"164":0,"165":0,"167":0,"170":1,"171":0,"174":1,"176":0,"178":0,"183":0,"187":1,"193":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Html5Client.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Html5Client.js","s":{"1":2,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0,0,0],"10":[0,0],"11":[0,0,0]},"f":{"1":0,"2":0},"fnMap":{"1":{"name":"(anonymous_1)","line":20,"loc":{"start":{"line":20,"column":12},"end":{"line":20,"column":28}}},"2":{"name":"css_log","line":27,"loc":{"start":{"line":27,"column":14},"end":{"line":27,"column":59}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":47}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":29}},"3":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"4":{"start":{"line":7,"column":0},"end":{"line":7,"column":39}},"5":{"start":{"line":8,"column":0},"end":{"line":8,"column":39}},"6":{"start":{"line":9,"column":0},"end":{"line":9,"column":33}},"7":{"start":{"line":10,"column":0},"end":{"line":10,"column":29}},"8":{"start":{"line":11,"column":0},"end":{"line":11,"column":35}},"9":{"start":{"line":12,"column":0},"end":{"line":12,"column":31}},"10":{"start":{"line":13,"column":0},"end":{"line":13,"column":31}},"11":{"start":{"line":14,"column":0},"end":{"line":14,"column":37}},"12":{"start":{"line":15,"column":0},"end":{"line":15,"column":55}},"13":{"start":{"line":16,"column":0},"end":{"line":16,"column":47}},"14":{"start":{"line":17,"column":0},"end":{"line":17,"column":53}},"15":{"start":{"line":18,"column":0},"end":{"line":18,"column":43}},"16":{"start":{"line":20,"column":0},"end":{"line":22,"column":2}},"17":{"start":{"line":21,"column":4},"end":{"line":21,"column":41}},"18":{"start":{"line":24,"column":0},"end":{"line":24,"column":20}},"19":{"start":{"line":26,"column":0},"end":{"line":51,"column":1}},"20":{"start":{"line":27,"column":4},"end":{"line":50,"column":6}},"21":{"start":{"line":28,"column":8},"end":{"line":30,"column":9}},"22":{"start":{"line":29,"column":12},"end":{"line":29,"column":33}},"23":{"start":{"line":31,"column":8},"end":{"line":33,"column":9}},"24":{"start":{"line":32,"column":12},"end":{"line":32,"column":37}},"25":{"start":{"line":34,"column":8},"end":{"line":49,"column":10}}},"branchMap":{"1":{"line":26,"type":"if","locations":[{"start":{"line":26,"column":0},"end":{"line":26,"column":0}},{"start":{"line":26,"column":0},"end":{"line":26,"column":0}}]},"2":{"line":26,"type":"binary-expr","locations":[{"start":{"line":26,"column":4},"end":{"line":26,"column":16}},{"start":{"line":26,"column":20},"end":{"line":26,"column":31}}]},"3":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":8},"end":{"line":28,"column":8}},{"start":{"line":28,"column":8},"end":{"line":28,"column":8}}]},"4":{"line":28,"type":"binary-expr","locations":[{"start":{"line":28,"column":12},"end":{"line":28,"column":17}},{"start":{"line":28,"column":21},"end":{"line":28,"column":28}},{"start":{"line":28,"column":32},"end":{"line":28,"column":45}}]},"5":{"line":31,"type":"if","locations":[{"start":{"line":31,"column":8},"end":{"line":31,"column":8}},{"start":{"line":31,"column":8},"end":{"line":31,"column":8}}]},"6":{"line":31,"type":"binary-expr","locations":[{"start":{"line":31,"column":12},"end":{"line":31,"column":17}},{"start":{"line":31,"column":21},"end":{"line":31,"column":54}}]},"7":{"line":37,"type":"cond-expr","locations":[{"start":{"line":37,"column":32},"end":{"line":37,"column":48}},{"start":{"line":37,"column":51},"end":{"line":37,"column":53}}]},"8":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":32},"end":{"line":37,"column":36}},{"start":{"line":37,"column":40},"end":{"line":37,"column":48}}]},"9":{"line":43,"type":"binary-expr","locations":[{"start":{"line":43,"column":17},"end":{"line":43,"column":24}},{"start":{"line":43,"column":30},"end":{"line":43,"column":42}},{"start":{"line":43,"column":46},"end":{"line":43,"column":71}},{"start":{"line":43,"column":76},"end":{"line":43,"column":87}},{"start":{"line":44,"column":17},"end":{"line":44,"column":44}}]},"10":{"line":44,"type":"cond-expr","locations":[{"start":{"line":44,"column":27},"end":{"line":44,"column":34}},{"start":{"line":44,"column":37},"end":{"line":44,"column":44}}]},"11":{"line":46,"type":"binary-expr","locations":[{"start":{"line":46,"column":16},"end":{"line":46,"column":23}},{"start":{"line":46,"column":27},"end":{"line":46,"column":40}},{"start":{"line":46,"column":44},"end":{"line":46,"column":61}}]}},"code":["\"use strict\";","","var Swarm = module.exports = window.Swarm = {};","","Swarm.env = require('./env');","Swarm.Spec = require('./Spec');","Swarm.LongSpec = require('./LongSpec');","Swarm.Syncable = require('./Syncable');","Swarm.Model = require('./Model');","Swarm.Set = require('./Set');","Swarm.Vector = require('./Vector');","Swarm.Host = require('./Host');","Swarm.Pipe = require('./Pipe');","Swarm.Storage = require('./Storage');","Swarm.SharedWebStorage = require('./SharedWebStorage');","Swarm.LevelStorage = require('./LevelStorage');","Swarm.WebSocketStream = require('./WebSocketStream');","Swarm.ReactMixin = require('./ReactMixin');","","Swarm.get = function (spec) {","    return Swarm.env.localhost.get(spec);","};","","var env = Swarm.env;","","if (env.isWebKit || env.isGecko) {","    env.log = function css_log(spec, value, replica, host) {","        if (!host && replica && replica._host) {","            host = replica._host;","        }","        if (value && value.constructor.name === 'Spec') {","            value = value.toString();","        }","        console.log(","                \"%c%s  %c%s  %c%O  %c%s @%c%s\",","                \"color: #888\",","                env.multihost ? host && host._id : '',","                \"color: #024; font-style: italic\",","                spec.toString(),","                \"font-style: normal; color: #042\",","                value,","                \"color: #88a\",","                (replica && ((replica.spec && replica.spec().toString()) || replica._id)) ||","                (replica ? 'no id' : 'undef'),","                \"color: #ccd\",","                replica && replica._host && replica._host._id","                //replica&&replica.spec&&(replica.spec()+","                //    (this._host===replica._host?'':' @'+replica._host._id)","        );","    };","}",""],"l":{"3":2,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"20":0,"21":0,"24":0,"26":0,"27":0,"28":0,"29":0,"31":0,"32":0,"34":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/LamportClock.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/LamportClock.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":1,"8":1,"9":0,"10":0,"11":1,"12":0,"13":0,"14":0,"15":0,"16":1,"17":0,"18":0,"19":0,"20":0,"21":1,"22":0,"23":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":6,"loc":{"start":{"line":6,"column":19},"end":{"line":6,"column":50}}},"2":{"name":"(anonymous_2)","line":15,"loc":{"start":{"line":15,"column":36},"end":{"line":15,"column":48}}},"3":{"name":"time","line":18,"loc":{"start":{"line":18,"column":40},"end":{"line":18,"column":57}}},"4":{"name":"parse","line":23,"loc":{"start":{"line":23,"column":40},"end":{"line":23,"column":60}}},"5":{"name":"see","line":33,"loc":{"start":{"line":33,"column":40},"end":{"line":33,"column":58}}},"6":{"name":"(anonymous_6)","line":41,"loc":{"start":{"line":41,"column":35},"end":{"line":41,"column":47}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":6,"column":0},"end":{"line":13,"column":2}},"3":{"start":{"line":7,"column":4},"end":{"line":9,"column":5}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":58}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":24}},"6":{"start":{"line":12,"column":4},"end":{"line":12,"column":17}},"7":{"start":{"line":15,"column":0},"end":{"line":16,"column":2}},"8":{"start":{"line":18,"column":0},"end":{"line":21,"column":2}},"9":{"start":{"line":19,"column":4},"end":{"line":19,"column":44}},"10":{"start":{"line":20,"column":4},"end":{"line":20,"column":32}},"11":{"start":{"line":23,"column":0},"end":{"line":30,"column":2}},"12":{"start":{"line":24,"column":4},"end":{"line":24,"column":36}},"13":{"start":{"line":25,"column":4},"end":{"line":25,"column":58}},"14":{"start":{"line":25,"column":13},"end":{"line":25,"column":57}},"15":{"start":{"line":26,"column":4},"end":{"line":29,"column":6}},"16":{"start":{"line":33,"column":0},"end":{"line":39,"column":2}},"17":{"start":{"line":34,"column":4},"end":{"line":34,"column":41}},"18":{"start":{"line":35,"column":4},"end":{"line":37,"column":5}},"19":{"start":{"line":36,"column":8},"end":{"line":36,"column":34}},"20":{"start":{"line":38,"column":4},"end":{"line":38,"column":16}},"21":{"start":{"line":41,"column":0},"end":{"line":43,"column":2}},"22":{"start":{"line":42,"column":4},"end":{"line":42,"column":21}},"23":{"start":{"line":45,"column":0},"end":{"line":45,"column":30}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":7,"column":4}},{"start":{"line":7,"column":4},"end":{"line":7,"column":4}}]},"2":{"line":25,"type":"if","locations":[{"start":{"line":25,"column":4},"end":{"line":25,"column":4}},{"start":{"line":25,"column":4},"end":{"line":25,"column":4}}]},"3":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":35,"column":4}},{"start":{"line":35,"column":4},"end":{"line":35,"column":4}}]}},"code":["\"use strict\";","","var Spec = require('./Spec');","","/** Pure logical-time Lamport clocks. */","var LamportClock = function (processId, initTime) {","    if (!Spec.reTok.test(processId)) {","        throw new Error('invalid process id: '+processId);","    }","    this.id = processId;","    // sometimes we assume our local clock has some offset","    this.seq = 0;","};","","LamportClock.prototype.adjustTime = function () {","};","","LamportClock.prototype.issueTimestamp = function time () {","    var base = Spec.int2base(this.seq++, 5);","    return base + '+' + this.id;","};","","LamportClock.prototype.parseTimestamp = function parse (ts) {","    var m = ts.match(Spec.reTokExt);","    if (!m) {throw new Error('malformed timestamp: '+ts);}","    return {","        seq: Spec.base2int(m[1]),","        process: m[2]","    };","};","","/** Lamport partial order  imperfect semi-logical*/","LamportClock.prototype.checkTimestamp = function see (ts) {","    var parsed = this.parseTimestamp(ts);","    if (parsed.seq >= this.seq) {","        this.seq = parsed.seq + 1;","    }","    return true;","};","","LamportClock.prototype.time2date = function () {","    return undefined;","};","","module.exports = LamportClock;",""],"l":{"3":1,"6":1,"7":0,"8":0,"10":0,"12":0,"15":1,"18":1,"19":0,"20":0,"23":1,"24":0,"25":0,"26":0,"33":1,"34":0,"35":0,"36":0,"38":0,"41":1,"42":0,"45":1}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/MinutePreciseClock.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/MinutePreciseClock.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":1,"19":0,"20":0,"21":0,"22":0,"23":1,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":1,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":1,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":1,"61":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":14,"loc":{"start":{"line":14,"column":25},"end":{"line":14,"column":60}}},"2":{"name":"(anonymous_2)","line":36,"loc":{"start":{"line":36,"column":42},"end":{"line":36,"column":60}}},"3":{"name":"(anonymous_3)","line":43,"loc":{"start":{"line":43,"column":39},"end":{"line":43,"column":51}}},"4":{"name":"(anonymous_4)","line":50,"loc":{"start":{"line":50,"column":46},"end":{"line":50,"column":58}}},"5":{"name":"parse","line":69,"loc":{"start":{"line":69,"column":46},"end":{"line":69,"column":66}}},"6":{"name":"see","line":83,"loc":{"start":{"line":83,"column":46},"end":{"line":83,"column":64}}},"7":{"name":"(anonymous_7)","line":95,"loc":{"start":{"line":95,"column":41},"end":{"line":95,"column":53}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":14,"column":0},"end":{"line":31,"column":2}},"3":{"start":{"line":15,"column":4},"end":{"line":17,"column":5}},"4":{"start":{"line":16,"column":8},"end":{"line":16,"column":58}},"5":{"start":{"line":18,"column":4},"end":{"line":18,"column":24}},"6":{"start":{"line":20,"column":4},"end":{"line":20,"column":27}},"7":{"start":{"line":21,"column":4},"end":{"line":21,"column":34}},"8":{"start":{"line":26,"column":4},"end":{"line":26,"column":26}},"9":{"start":{"line":27,"column":4},"end":{"line":27,"column":25}},"10":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},"11":{"start":{"line":29,"column":8},"end":{"line":29,"column":42}},"12":{"start":{"line":33,"column":0},"end":{"line":33,"column":58}},"13":{"start":{"line":34,"column":0},"end":{"line":34,"column":47}},"14":{"start":{"line":36,"column":0},"end":{"line":41,"column":2}},"15":{"start":{"line":38,"column":4},"end":{"line":38,"column":41}},"16":{"start":{"line":39,"column":4},"end":{"line":39,"column":43}},"17":{"start":{"line":40,"column":4},"end":{"line":40,"column":39}},"18":{"start":{"line":43,"column":0},"end":{"line":48,"column":2}},"19":{"start":{"line":44,"column":4},"end":{"line":44,"column":38}},"20":{"start":{"line":45,"column":4},"end":{"line":45,"column":39}},"21":{"start":{"line":46,"column":4},"end":{"line":46,"column":33}},"22":{"start":{"line":47,"column":4},"end":{"line":47,"column":30}},"23":{"start":{"line":50,"column":0},"end":{"line":67,"column":2}},"24":{"start":{"line":51,"column":4},"end":{"line":51,"column":30}},"25":{"start":{"line":52,"column":4},"end":{"line":52,"column":61}},"26":{"start":{"line":52,"column":34},"end":{"line":52,"column":59}},"27":{"start":{"line":53,"column":4},"end":{"line":53,"column":58}},"28":{"start":{"line":53,"column":34},"end":{"line":53,"column":56}},"29":{"start":{"line":54,"column":4},"end":{"line":54,"column":29}},"30":{"start":{"line":55,"column":4},"end":{"line":55,"column":33}},"31":{"start":{"line":56,"column":4},"end":{"line":56,"column":68}},"32":{"start":{"line":56,"column":23},"end":{"line":56,"column":67}},"33":{"start":{"line":58,"column":4},"end":{"line":58,"column":51}},"34":{"start":{"line":59,"column":4},"end":{"line":63,"column":5}},"35":{"start":{"line":60,"column":8},"end":{"line":60,"column":40}},"36":{"start":{"line":62,"column":8},"end":{"line":62,"column":40}},"37":{"start":{"line":65,"column":4},"end":{"line":65,"column":66}},"38":{"start":{"line":66,"column":4},"end":{"line":66,"column":36}},"39":{"start":{"line":69,"column":0},"end":{"line":81,"column":2}},"40":{"start":{"line":70,"column":4},"end":{"line":70,"column":36}},"41":{"start":{"line":71,"column":4},"end":{"line":71,"column":58}},"42":{"start":{"line":71,"column":13},"end":{"line":71,"column":57}},"43":{"start":{"line":72,"column":4},"end":{"line":72,"column":21}},"44":{"start":{"line":73,"column":4},"end":{"line":73,"column":60}},"45":{"start":{"line":74,"column":4},"end":{"line":76,"column":5}},"46":{"start":{"line":75,"column":8},"end":{"line":75,"column":63}},"47":{"start":{"line":77,"column":4},"end":{"line":80,"column":6}},"48":{"start":{"line":83,"column":0},"end":{"line":92,"column":2}},"49":{"start":{"line":84,"column":4},"end":{"line":84,"column":53}},"50":{"start":{"line":84,"column":39},"end":{"line":84,"column":51}},"51":{"start":{"line":85,"column":4},"end":{"line":85,"column":41}},"52":{"start":{"line":86,"column":4},"end":{"line":86,"column":55}},"53":{"start":{"line":86,"column":41},"end":{"line":86,"column":53}},"54":{"start":{"line":87,"column":4},"end":{"line":87,"column":29}},"55":{"start":{"line":88,"column":4},"end":{"line":88,"column":44}},"56":{"start":{"line":88,"column":29},"end":{"line":88,"column":42}},"57":{"start":{"line":89,"column":4},"end":{"line":89,"column":36}},"58":{"start":{"line":90,"column":4},"end":{"line":90,"column":34}},"59":{"start":{"line":91,"column":4},"end":{"line":91,"column":16}},"60":{"start":{"line":95,"column":0},"end":{"line":97,"column":2}},"61":{"start":{"line":99,"column":0},"end":{"line":99,"column":36}}},"branchMap":{"1":{"line":15,"type":"if","locations":[{"start":{"line":15,"column":4},"end":{"line":15,"column":4}},{"start":{"line":15,"column":4},"end":{"line":15,"column":4}}]},"2":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"3":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":4},"end":{"line":52,"column":4}},{"start":{"line":52,"column":4},"end":{"line":52,"column":4}}]},"4":{"line":53,"type":"if","locations":[{"start":{"line":53,"column":4},"end":{"line":53,"column":4}},{"start":{"line":53,"column":4},"end":{"line":53,"column":4}}]},"5":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":56,"column":4}},{"start":{"line":56,"column":4},"end":{"line":56,"column":4}}]},"6":{"line":59,"type":"if","locations":[{"start":{"line":59,"column":4},"end":{"line":59,"column":4}},{"start":{"line":59,"column":4},"end":{"line":59,"column":4}}]},"7":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]},"8":{"line":74,"type":"if","locations":[{"start":{"line":74,"column":4},"end":{"line":74,"column":4}},{"start":{"line":74,"column":4},"end":{"line":74,"column":4}}]},"9":{"line":74,"type":"binary-expr","locations":[{"start":{"line":74,"column":8},"end":{"line":74,"column":22}},{"start":{"line":74,"column":26},"end":{"line":74,"column":40}}]},"10":{"line":84,"type":"if","locations":[{"start":{"line":84,"column":4},"end":{"line":84,"column":4}},{"start":{"line":84,"column":4},"end":{"line":84,"column":4}}]},"11":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"12":{"line":88,"type":"if","locations":[{"start":{"line":88,"column":4},"end":{"line":88,"column":4}},{"start":{"line":88,"column":4},"end":{"line":88,"column":4}}]}},"code":["\"use strict\";","","var Spec = require('./Spec');","","/** It is not always necessary to have second-precise timestamps.","  * Going with minute-precise allows to fit timestamp values","  * into 30 bits (5 base64, 2 unicode chars).","  * More importantly, such timestamps increase incrementally for","  * short bursts of events (e.g. user typing). That allows","  * for sequence-coding optimizations in LongSpec.","  * In case processes generate more than 64 events a minute,","  * which is not unlikely, the optimization fails as we add","  * 12-bit seq (2 base64, 1 unicode). */","var MinutePreciseClock = function (processId, timeOffsetMs) {","    if (!Spec.reTok.test(processId)) {","        throw new Error('invalid process id: '+processId);","    }","    this.id = processId;","    // sometimes we assume our local clock has some offset","    this.clockOffsetMs = 0;","    this.lastIssuedTimestamp = '';","    // although we try hard to use wall clock time, we must","    // obey Lamport logical clock rules, in particular our","    // timestamps must be greater than any other timestamps","    // previously seen","    this.lastTimeSeen = 0;","    this.lastSeqSeen = 0;","    if (timeOffsetMs) {","        this.clockOffsetMs = timeOffsetMs;","    }","};","","var epochDate = new Date(\"Wed, 01 Jan 2014 00:00:00 GMT\");","MinutePreciseClock.EPOCH = epochDate.getTime();","","MinutePreciseClock.prototype.adjustTime = function (trueMs) {","    // TODO use min historical offset","    var localTime = new Date().getTime();","    var clockOffsetMs = trueMs - localTime;","    this.clockOffsetMs = clockOffsetMs;","};","","MinutePreciseClock.prototype.minutes = function () {","    var millis = new Date().getTime();","    millis -= MinutePreciseClock.EPOCH;","    millis += this.clockOffsetMs;","    return (millis/60000) | 0;","};","","MinutePreciseClock.prototype.issueTimestamp = function () {","    var time = this.minutes();","    if (this.lastTimeSeen>time) { time = this.lastTimeSeen; }","    if (time>this.lastTimeSeen) { this.lastSeqSeen = -1; }","    this.lastTimeSeen = time;","    var seq = ++this.lastSeqSeen;","    if (seq>=(1<<18)) {throw new Error('max event freq is 4000Hz');}","","    var baseTime = Spec.int2base(time, 4), baseSeq;","    if (seq<64) {","        baseSeq = Spec.int2base(seq, 1);","    } else {","        baseSeq = Spec.int2base(seq, 3);","    }","","    this.lastIssuedTimestamp = baseTime + baseSeq + '+' + this.id;","    return this.lastIssuedTimestamp;","};","","MinutePreciseClock.prototype.parseTimestamp = function parse (ts) {","    var m = ts.match(Spec.reTokExt);","    if (!m) {throw new Error('malformed timestamp: '+ts);}","    var timeseq=m[1]; //, process=m[2];","    var time = timeseq.substr(0,4), seq = timeseq.substr(4);","    if (seq.length!==1 && seq.length!==3) {","        throw new Error('malformed timestamp value: '+timeseq);","    }","    return {","        time: Spec.base2int(time),","        seq: Spec.base2int(seq)","    };","};","","MinutePreciseClock.prototype.checkTimestamp = function see (ts) {","    if (ts<this.lastIssuedTimestamp) { return true; }","    var parsed = this.parseTimestamp(ts);","    if (parsed.time<this.lastTimeSeen) { return true; }","    var min = this.minutes();","    if (parsed.time>min+1) { return false; } // bad clocks somewhere","    this.lastTimeSeen = parsed.time;","    this.lastSeqSeen = parsed.seq;","    return true;","};","","","MinutePreciseClock.prototype.time2date = function () {","    // parse etc","};","","module.exports = MinutePreciseClock;",""],"l":{"3":1,"14":1,"15":0,"16":0,"18":0,"20":0,"21":0,"26":0,"27":0,"28":0,"29":0,"33":1,"34":1,"36":1,"38":0,"39":0,"40":0,"43":1,"44":0,"45":0,"46":0,"47":0,"50":1,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"58":0,"59":0,"60":0,"62":0,"65":0,"66":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"77":0,"83":1,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"95":1,"99":1}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/PostMessageStream.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/PostMessageStream.js","s":{"1":2,"2":2,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":2,"36":2,"37":2,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":2,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":2,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},"fnMap":{"1":{"name":"PostMessageStream","line":8,"loc":{"start":{"line":8,"column":0},"end":{"line":8,"column":53}}},"2":{"name":"(anonymous_2)","line":46,"loc":{"start":{"line":46,"column":36},"end":{"line":46,"column":48}}},"3":{"name":"(anonymous_3)","line":55,"loc":{"start":{"line":55,"column":45},"end":{"line":55,"column":57}}},"4":{"name":"(anonymous_4)","line":70,"loc":{"start":{"line":70,"column":40},"end":{"line":70,"column":63}}},"5":{"name":"onPostMessage","line":84,"loc":{"start":{"line":84,"column":35},"end":{"line":84,"column":62}}},"6":{"name":"cleanup","line":97,"loc":{"start":{"line":97,"column":27},"end":{"line":97,"column":46}}},"7":{"name":"(anonymous_7)","line":105,"loc":{"start":{"line":105,"column":27},"end":{"line":105,"column":51}}},"8":{"name":"(anonymous_8)","line":111,"loc":{"start":{"line":111,"column":33},"end":{"line":111,"column":55}}},"9":{"name":"(anonymous_9)","line":115,"loc":{"start":{"line":115,"column":28},"end":{"line":115,"column":40}}},"10":{"name":"(anonymous_10)","line":124,"loc":{"start":{"line":124,"column":36},"end":{"line":124,"column":52}}},"11":{"name":"(anonymous_11)","line":133,"loc":{"start":{"line":133,"column":36},"end":{"line":133,"column":48}}},"12":{"name":"(anonymous_12)","line":139,"loc":{"start":{"line":139,"column":34},"end":{"line":139,"column":60}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":8,"column":0},"end":{"line":51,"column":1}},"4":{"start":{"line":9,"column":4},"end":{"line":9,"column":25}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":19}},"6":{"start":{"line":11,"column":4},"end":{"line":34,"column":5}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":49}},"8":{"start":{"line":13,"column":8},"end":{"line":15,"column":9}},"9":{"start":{"line":14,"column":12},"end":{"line":14,"column":43}},"10":{"start":{"line":16,"column":8},"end":{"line":16,"column":27}},"11":{"start":{"line":17,"column":8},"end":{"line":28,"column":9}},"12":{"start":{"line":18,"column":12},"end":{"line":18,"column":46}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":53}},"14":{"start":{"line":21,"column":12},"end":{"line":23,"column":13}},"15":{"start":{"line":22,"column":16},"end":{"line":22,"column":63}},"16":{"start":{"line":24,"column":12},"end":{"line":26,"column":13}},"17":{"start":{"line":25,"column":16},"end":{"line":25,"column":49}},"18":{"start":{"line":27,"column":12},"end":{"line":27,"column":48}},"19":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"20":{"start":{"line":31,"column":12},"end":{"line":31,"column":55}},"21":{"start":{"line":33,"column":8},"end":{"line":33,"column":37}},"22":{"start":{"line":35,"column":4},"end":{"line":35,"column":45}},"23":{"start":{"line":36,"column":4},"end":{"line":36,"column":47}},"24":{"start":{"line":37,"column":4},"end":{"line":38,"column":55}},"25":{"start":{"line":39,"column":4},"end":{"line":39,"column":50}},"26":{"start":{"line":40,"column":4},"end":{"line":40,"column":24}},"27":{"start":{"line":41,"column":4},"end":{"line":41,"column":21}},"28":{"start":{"line":42,"column":4},"end":{"line":42,"column":25}},"29":{"start":{"line":43,"column":4},"end":{"line":49,"column":5}},"30":{"start":{"line":44,"column":8},"end":{"line":44,"column":26}},"31":{"start":{"line":45,"column":8},"end":{"line":45,"column":24}},"32":{"start":{"line":46,"column":8},"end":{"line":48,"column":16}},"33":{"start":{"line":47,"column":12},"end":{"line":47,"column":34}},"34":{"start":{"line":50,"column":4},"end":{"line":50,"column":19}},"35":{"start":{"line":52,"column":0},"end":{"line":52,"column":31}},"36":{"start":{"line":53,"column":0},"end":{"line":53,"column":46}},"37":{"start":{"line":55,"column":0},"end":{"line":68,"column":2}},"38":{"start":{"line":56,"column":4},"end":{"line":59,"column":5}},"39":{"start":{"line":57,"column":8},"end":{"line":57,"column":37}},"40":{"start":{"line":58,"column":8},"end":{"line":58,"column":15}},"41":{"start":{"line":60,"column":4},"end":{"line":67,"column":5}},"42":{"start":{"line":61,"column":8},"end":{"line":61,"column":37}},"43":{"start":{"line":62,"column":8},"end":{"line":62,"column":73}},"44":{"start":{"line":63,"column":8},"end":{"line":63,"column":21}},"45":{"start":{"line":65,"column":8},"end":{"line":65,"column":23}},"46":{"start":{"line":66,"column":8},"end":{"line":66,"column":55}},"47":{"start":{"line":70,"column":0},"end":{"line":81,"column":2}},"48":{"start":{"line":71,"column":4},"end":{"line":74,"column":5}},"49":{"start":{"line":72,"column":8},"end":{"line":72,"column":65}},"50":{"start":{"line":73,"column":8},"end":{"line":73,"column":15}},"51":{"start":{"line":75,"column":4},"end":{"line":79,"column":5}},"52":{"start":{"line":76,"column":8},"end":{"line":76,"column":29}},"53":{"start":{"line":77,"column":8},"end":{"line":77,"column":28}},"54":{"start":{"line":78,"column":8},"end":{"line":78,"column":27}},"55":{"start":{"line":80,"column":4},"end":{"line":80,"column":49}},"56":{"start":{"line":84,"column":0},"end":{"line":103,"column":3}},"57":{"start":{"line":85,"column":4},"end":{"line":85,"column":33}},"58":{"start":{"line":86,"column":4},"end":{"line":86,"column":46}},"59":{"start":{"line":87,"column":4},"end":{"line":89,"column":5}},"60":{"start":{"line":88,"column":8},"end":{"line":88,"column":15}},"61":{"start":{"line":90,"column":4},"end":{"line":90,"column":60}},"62":{"start":{"line":91,"column":4},"end":{"line":91,"column":51}},"63":{"start":{"line":92,"column":4},"end":{"line":101,"column":5}},"64":{"start":{"line":93,"column":8},"end":{"line":95,"column":9}},"65":{"start":{"line":94,"column":12},"end":{"line":94,"column":57}},"66":{"start":{"line":96,"column":8},"end":{"line":96,"column":84}},"67":{"start":{"line":97,"column":8},"end":{"line":99,"column":11}},"68":{"start":{"line":98,"column":12},"end":{"line":98,"column":53}},"69":{"start":{"line":100,"column":8},"end":{"line":100,"column":46}},"70":{"start":{"line":102,"column":4},"end":{"line":102,"column":38}},"71":{"start":{"line":105,"column":0},"end":{"line":108,"column":2}},"72":{"start":{"line":106,"column":4},"end":{"line":106,"column":34}},"73":{"start":{"line":107,"column":4},"end":{"line":107,"column":38}},"74":{"start":{"line":111,"column":0},"end":{"line":122,"column":2}},"75":{"start":{"line":112,"column":4},"end":{"line":121,"column":5}},"76":{"start":{"line":113,"column":8},"end":{"line":114,"column":40}},"77":{"start":{"line":115,"column":8},"end":{"line":118,"column":10}},"78":{"start":{"line":116,"column":12},"end":{"line":116,"column":43}},"79":{"start":{"line":117,"column":12},"end":{"line":117,"column":38}},"80":{"start":{"line":120,"column":8},"end":{"line":120,"column":31}},"81":{"start":{"line":124,"column":0},"end":{"line":131,"column":2}},"82":{"start":{"line":125,"column":4},"end":{"line":128,"column":5}},"83":{"start":{"line":126,"column":8},"end":{"line":126,"column":35}},"84":{"start":{"line":127,"column":8},"end":{"line":127,"column":18}},"85":{"start":{"line":129,"column":4},"end":{"line":129,"column":39}},"86":{"start":{"line":130,"column":4},"end":{"line":130,"column":59}},"87":{"start":{"line":133,"column":0},"end":{"line":137,"column":2}},"88":{"start":{"line":134,"column":4},"end":{"line":134,"column":29}},"89":{"start":{"line":135,"column":4},"end":{"line":135,"column":27}},"90":{"start":{"line":136,"column":4},"end":{"line":136,"column":50}},"91":{"start":{"line":139,"column":0},"end":{"line":141,"column":2}},"92":{"start":{"line":140,"column":4},"end":{"line":140,"column":54}},"93":{"start":{"line":143,"column":0},"end":{"line":143,"column":39}},"94":{"start":{"line":144,"column":0},"end":{"line":144,"column":35}}},"branchMap":{"1":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":11,"column":4}},{"start":{"line":11,"column":4},"end":{"line":11,"column":4}}]},"2":{"line":13,"type":"if","locations":[{"start":{"line":13,"column":8},"end":{"line":13,"column":8}},{"start":{"line":13,"column":8},"end":{"line":13,"column":8}}]},"3":{"line":17,"type":"if","locations":[{"start":{"line":17,"column":8},"end":{"line":17,"column":8}},{"start":{"line":17,"column":8},"end":{"line":17,"column":8}}]},"4":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":12},"end":{"line":17,"column":20}},{"start":{"line":17,"column":24},"end":{"line":17,"column":44}}]},"5":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":12}},{"start":{"line":21,"column":12},"end":{"line":21,"column":12}}]},"6":{"line":24,"type":"if","locations":[{"start":{"line":24,"column":12},"end":{"line":24,"column":12}},{"start":{"line":24,"column":12},"end":{"line":24,"column":12}}]},"7":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":30,"column":8}},{"start":{"line":30,"column":8},"end":{"line":30,"column":8}}]},"8":{"line":37,"type":"binary-expr","locations":[{"start":{"line":37,"column":18},"end":{"line":37,"column":24}},{"start":{"line":38,"column":6},"end":{"line":38,"column":52}}]},"9":{"line":43,"type":"if","locations":[{"start":{"line":43,"column":4},"end":{"line":43,"column":4}},{"start":{"line":43,"column":4},"end":{"line":43,"column":4}}]},"10":{"line":56,"type":"if","locations":[{"start":{"line":56,"column":4},"end":{"line":56,"column":4}},{"start":{"line":56,"column":4},"end":{"line":56,"column":4}}]},"11":{"line":60,"type":"if","locations":[{"start":{"line":60,"column":4},"end":{"line":60,"column":4}},{"start":{"line":60,"column":4},"end":{"line":60,"column":4}}]},"12":{"line":62,"type":"binary-expr","locations":[{"start":{"line":62,"column":8},"end":{"line":62,"column":23}},{"start":{"line":62,"column":27},"end":{"line":62,"column":72}}]},"13":{"line":71,"type":"if","locations":[{"start":{"line":71,"column":4},"end":{"line":71,"column":4}},{"start":{"line":71,"column":4},"end":{"line":71,"column":4}}]},"14":{"line":71,"type":"binary-expr","locations":[{"start":{"line":71,"column":8},"end":{"line":71,"column":19}},{"start":{"line":71,"column":23},"end":{"line":71,"column":45}}]},"15":{"line":75,"type":"if","locations":[{"start":{"line":75,"column":4},"end":{"line":75,"column":4}},{"start":{"line":75,"column":4},"end":{"line":75,"column":4}}]},"16":{"line":78,"type":"binary-expr","locations":[{"start":{"line":78,"column":8},"end":{"line":78,"column":9}},{"start":{"line":78,"column":13},"end":{"line":78,"column":26}}]},"17":{"line":80,"type":"binary-expr","locations":[{"start":{"line":80,"column":4},"end":{"line":80,"column":7}},{"start":{"line":80,"column":11},"end":{"line":80,"column":25}},{"start":{"line":80,"column":29},"end":{"line":80,"column":48}}]},"18":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":4},"end":{"line":87,"column":4}},{"start":{"line":87,"column":4},"end":{"line":87,"column":4}}]},"19":{"line":92,"type":"if","locations":[{"start":{"line":92,"column":4},"end":{"line":92,"column":4}},{"start":{"line":92,"column":4},"end":{"line":92,"column":4}}]},"20":{"line":93,"type":"if","locations":[{"start":{"line":93,"column":8},"end":{"line":93,"column":8}},{"start":{"line":93,"column":8},"end":{"line":93,"column":8}}]},"21":{"line":112,"type":"if","locations":[{"start":{"line":112,"column":4},"end":{"line":112,"column":4}},{"start":{"line":112,"column":4},"end":{"line":112,"column":4}}]},"22":{"line":125,"type":"if","locations":[{"start":{"line":125,"column":4},"end":{"line":125,"column":4}},{"start":{"line":125,"column":4},"end":{"line":125,"column":4}}]},"23":{"line":126,"type":"binary-expr","locations":[{"start":{"line":126,"column":24},"end":{"line":126,"column":28}},{"start":{"line":126,"column":32},"end":{"line":126,"column":34}}]},"24":{"line":130,"type":"binary-expr","locations":[{"start":{"line":130,"column":39},"end":{"line":130,"column":50}},{"start":{"line":130,"column":54},"end":{"line":130,"column":57}}]},"25":{"line":134,"type":"binary-expr","locations":[{"start":{"line":134,"column":13},"end":{"line":134,"column":22}},{"start":{"line":134,"column":26},"end":{"line":134,"column":28}}]},"26":{"line":135,"type":"binary-expr","locations":[{"start":{"line":135,"column":4},"end":{"line":135,"column":12}},{"start":{"line":135,"column":16},"end":{"line":135,"column":26}}]}},"code":["\"use strict\";","","var env = require('./env');","var Spec = require('./Spec');","","// This stream implementation uses postMessage to synchronize to","// another IFRAME (use URIs like iframe:parent or iframe:elementId)","function PostMessageStream(frameUri, origin, secret) {","    this.origin = origin;","    this.lstn = {};","    if (frameUri.constructor === String) {","        var m = frameUri.match(/^iframe:(\\w+)/i);","        if (!m) {","            throw new Error('invalid URL');","        }","        var frameId = m[1];","        if (!frameId || frameId === 'parent') {","            this.targetWindow = window.parent;","        } else {","            var i = document.getElementById(frameId);","            if (!i) {","                throw new Error('element unknown: ' + frameId);","            }","            if (!i.contentWindow) {","                throw new Error('not an IFRAME');","            }","            this.targetWindow = i.contentWindow;","        }","    } else {","        if (!frameUri.location) {","            throw new Error('1st param: target frame');","        }","        this.targetWindow = frameUri;","    }","    var rnd = (Math.random() * 0xffffff) | 0;","    var time = new Date().getTime() & 0xffffff;","    this.secret = secret ||","    ( Spec.int2base(time) + '~' + Spec.int2base(rnd) );","    PostMessageStream.streams[this.secret] = this;","    this.pending = null;","    this.retries = 0;","    this.retryInt = null;","    if (!secret) { // make sure somebody listens on the other end","        this.pending = '';","        var self = this;","        this.retryInt = setInterval(function () {","            self.retryHandshake();","        }, 100); // keep pinging the other frame for 1 second","    }","    this.write(''); // handshake","}","PostMessageStream.streams = {};","PostMessageStream.re64 = /^([0-9A-Za-z_~]+)>/;","","PostMessageStream.prototype.retryHandshake = function () {","    if (this.pending === null) { // it's OK","        clearInterval(this.retryInt);","        return;","    }","    if (this.retries++ > 10) {","        clearInterval(this.retryInt);","        this.lstn.error && this.lstn.error('no response from the frame');","        this.close();","    } else {","        this.write('');","        console.warn('retrying postMessage handshake');","    }","};","","PostMessageStream.prototype.onMessage = function (msg, origin) {","    if (this.origin && origin !== this.origin) {","        console.warn('mismatched origin: ', origin, this.origin);","        return;","    }","    if (this.pending !== null) {","        var p = this.pending;","        this.pending = null;","        p && this.write(p);","    }","    msg && this.lstn.data && this.lstn.data(msg);","};","","// FIXME: explicitly invoke (security - entry point)","window.addEventListener('message', function onPostMessage(ev) {","    var msg = ev.data.toString();","    var m = msg.match(PostMessageStream.re64);","    if (!m) {","        return;","    }","    var secret = m[1], json = msg.substr(secret.length + 1);","    var stream = PostMessageStream.streams[secret];","    if (!stream) {","        if (!PostMessageStream.host) {","            throw new Error('unknown stream: ' + secret);","        }","        stream = new PostMessageStream(ev.source, PostMessageStream.origin, secret);","        stream.on('close', function cleanup() {","            delete PostMessageStream.streams[secret];","        });","        PostMessageStream.host.accept(stream);","    }","    stream.onMessage(json, ev.origin);","});","","PostMessageStream.listen = function (host, origin) {","    PostMessageStream.host = host;","    PostMessageStream.origin = origin;","};","","","PostMessageStream.prototype.on = function (evname, fn) {","    if (evname in this.lstn) {","        var self = this,","            prev_fn = this.lstn[evname];","        this.lstn[evname] = function () {","            prev_fn.apply(self, arguments);","            fn.apply(self, arguments);","        };","    } else {","        this.lstn[evname] = fn;","    }","};","","PostMessageStream.prototype.write = function (data) {","    if (this.pending !== null) {","        this.pending += data || '';","        data = '';","    }","    var str = this.secret + '>' + data;","    this.targetWindow.postMessage(str, this.origin || '*');","};","","PostMessageStream.prototype.close = function () {","    var ln = this.lstn || {};","    ln.close && ln.close();","    delete PostMessageStream.streams[this.secret];","};","","PostMessageStream.prototype.log = function (event, message) {","    console.log('pm:' + this.frameId, event, message);","};","","env.streams.iframe = PostMessageStream;","module.exports = PostMessageStream;",""],"l":{"3":2,"4":2,"8":1,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"16":0,"17":0,"18":0,"20":0,"21":0,"22":0,"24":0,"25":0,"27":0,"30":0,"31":0,"33":0,"35":0,"36":0,"37":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"50":0,"52":2,"53":2,"55":2,"56":0,"57":0,"58":0,"60":0,"61":0,"62":0,"63":0,"65":0,"66":0,"70":2,"71":0,"72":0,"73":0,"75":0,"76":0,"77":0,"78":0,"80":0,"84":2,"85":0,"86":0,"87":0,"88":0,"90":0,"91":0,"92":0,"93":0,"94":0,"96":0,"97":0,"98":0,"100":0,"102":0,"105":0,"106":0,"107":0,"111":0,"112":0,"113":0,"115":0,"116":0,"117":0,"120":0,"124":0,"125":0,"126":0,"127":0,"129":0,"130":0,"133":0,"134":0,"135":0,"136":0,"139":0,"140":0,"143":0,"144":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/SharedWebStorage.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/SharedWebStorage.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":1,"29":0,"30":0,"31":0,"32":1,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":1,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":1,"70":0,"71":0,"72":0,"73":0,"74":1,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},"fnMap":{"1":{"name":"SharedWebStorage","line":10,"loc":{"start":{"line":10,"column":0},"end":{"line":10,"column":39}}},"2":{"name":"(anonymous_2)","line":27,"loc":{"start":{"line":27,"column":34},"end":{"line":27,"column":57}}},"3":{"name":"(anonymous_3)","line":44,"loc":{"start":{"line":44,"column":46},"end":{"line":44,"column":58}}},"4":{"name":"onStorageChange","line":46,"loc":{"start":{"line":46,"column":4},"end":{"line":46,"column":33}}},"5":{"name":"(anonymous_5)","line":55,"loc":{"start":{"line":55,"column":37},"end":{"line":55,"column":49}}},"6":{"name":"wsOp","line":79,"loc":{"start":{"line":79,"column":37},"end":{"line":79,"column":69}}},"7":{"name":"wsPatch","line":97,"loc":{"start":{"line":97,"column":40},"end":{"line":97,"column":75}}},"8":{"name":"(anonymous_8)","line":109,"loc":{"start":{"line":109,"column":39},"end":{"line":109,"column":65}}},"9":{"name":"(anonymous_9)","line":116,"loc":{"start":{"line":116,"column":37},"end":{"line":116,"column":61}}}},"statementMap":{"1":{"start":{"line":2,"column":0},"end":{"line":2,"column":29}},"2":{"start":{"line":3,"column":0},"end":{"line":3,"column":35}},"3":{"start":{"line":10,"column":0},"end":{"line":20,"column":1}},"4":{"start":{"line":11,"column":4},"end":{"line":11,"column":33}},"5":{"start":{"line":12,"column":4},"end":{"line":12,"column":19}},"6":{"start":{"line":13,"column":4},"end":{"line":13,"column":18}},"7":{"start":{"line":14,"column":4},"end":{"line":14,"column":20}},"8":{"start":{"line":15,"column":4},"end":{"line":16,"column":52}},"9":{"start":{"line":18,"column":4},"end":{"line":18,"column":19}},"10":{"start":{"line":19,"column":4},"end":{"line":19,"column":28}},"11":{"start":{"line":22,"column":0},"end":{"line":22,"column":43}},"12":{"start":{"line":23,"column":0},"end":{"line":23,"column":42}},"13":{"start":{"line":24,"column":0},"end":{"line":24,"column":34}},"14":{"start":{"line":27,"column":0},"end":{"line":41,"column":2}},"15":{"start":{"line":28,"column":4},"end":{"line":28,"column":31}},"16":{"start":{"line":29,"column":4},"end":{"line":29,"column":31}},"17":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"18":{"start":{"line":31,"column":8},"end":{"line":31,"column":15}},"19":{"start":{"line":33,"column":4},"end":{"line":33,"column":30}},"20":{"start":{"line":34,"column":4},"end":{"line":38,"column":5}},"21":{"start":{"line":35,"column":8},"end":{"line":35,"column":35}},"22":{"start":{"line":36,"column":11},"end":{"line":38,"column":5}},"23":{"start":{"line":37,"column":8},"end":{"line":37,"column":15}},"24":{"start":{"line":39,"column":4},"end":{"line":39,"column":18}},"25":{"start":{"line":40,"column":4},"end":{"line":40,"column":26}},"26":{"start":{"line":44,"column":0},"end":{"line":52,"column":2}},"27":{"start":{"line":45,"column":4},"end":{"line":45,"column":20}},"28":{"start":{"line":46,"column":4},"end":{"line":50,"column":5}},"29":{"start":{"line":47,"column":8},"end":{"line":49,"column":9}},"30":{"start":{"line":48,"column":12},"end":{"line":48,"column":65}},"31":{"start":{"line":51,"column":4},"end":{"line":51,"column":63}},"32":{"start":{"line":55,"column":0},"end":{"line":76,"column":2}},"33":{"start":{"line":57,"column":4},"end":{"line":57,"column":27}},"34":{"start":{"line":58,"column":4},"end":{"line":58,"column":11}},"35":{"start":{"line":59,"column":4},"end":{"line":72,"column":5}},"36":{"start":{"line":60,"column":8},"end":{"line":60,"column":31}},"37":{"start":{"line":61,"column":8},"end":{"line":61,"column":40}},"38":{"start":{"line":61,"column":29},"end":{"line":61,"column":38}},"39":{"start":{"line":62,"column":8},"end":{"line":62,"column":33}},"40":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"41":{"start":{"line":64,"column":12},"end":{"line":64,"column":21}},"42":{"start":{"line":66,"column":8},"end":{"line":66,"column":31}},"43":{"start":{"line":67,"column":8},"end":{"line":67,"column":34}},"44":{"start":{"line":68,"column":8},"end":{"line":70,"column":9}},"45":{"start":{"line":69,"column":12},"end":{"line":69,"column":39}},"46":{"start":{"line":71,"column":8},"end":{"line":71,"column":37}},"47":{"start":{"line":73,"column":4},"end":{"line":75,"column":5}},"48":{"start":{"line":74,"column":8},"end":{"line":74,"column":30}},"49":{"start":{"line":79,"column":0},"end":{"line":94,"column":2}},"50":{"start":{"line":80,"column":4},"end":{"line":80,"column":31}},"51":{"start":{"line":81,"column":4},"end":{"line":81,"column":31}},"52":{"start":{"line":82,"column":4},"end":{"line":82,"column":55}},"53":{"start":{"line":83,"column":4},"end":{"line":83,"column":18}},"54":{"start":{"line":84,"column":4},"end":{"line":84,"column":37}},"55":{"start":{"line":85,"column":4},"end":{"line":85,"column":35}},"56":{"start":{"line":86,"column":4},"end":{"line":93,"column":5}},"57":{"start":{"line":87,"column":8},"end":{"line":88,"column":56}},"58":{"start":{"line":89,"column":8},"end":{"line":92,"column":9}},"59":{"start":{"line":90,"column":12},"end":{"line":90,"column":42}},"60":{"start":{"line":91,"column":12},"end":{"line":91,"column":45}},"61":{"start":{"line":97,"column":0},"end":{"line":107,"column":2}},"62":{"start":{"line":98,"column":4},"end":{"line":98,"column":31}},"63":{"start":{"line":99,"column":4},"end":{"line":99,"column":50}},"64":{"start":{"line":100,"column":4},"end":{"line":100,"column":30}},"65":{"start":{"line":101,"column":4},"end":{"line":106,"column":5}},"66":{"start":{"line":102,"column":8},"end":{"line":104,"column":9}},"67":{"start":{"line":103,"column":12},"end":{"line":103,"column":48}},"68":{"start":{"line":105,"column":8},"end":{"line":105,"column":30}},"69":{"start":{"line":109,"column":0},"end":{"line":114,"column":2}},"70":{"start":{"line":110,"column":4},"end":{"line":110,"column":26}},"71":{"start":{"line":111,"column":4},"end":{"line":111,"column":31}},"72":{"start":{"line":112,"column":4},"end":{"line":112,"column":39}},"73":{"start":{"line":113,"column":4},"end":{"line":113,"column":55}},"74":{"start":{"line":116,"column":0},"end":{"line":127,"column":2}},"75":{"start":{"line":117,"column":4},"end":{"line":117,"column":30}},"76":{"start":{"line":118,"column":4},"end":{"line":118,"column":22}},"77":{"start":{"line":119,"column":4},"end":{"line":125,"column":5}},"78":{"start":{"line":120,"column":8},"end":{"line":120,"column":27}},"79":{"start":{"line":121,"column":8},"end":{"line":121,"column":48}},"80":{"start":{"line":122,"column":8},"end":{"line":122,"column":31}},"81":{"start":{"line":122,"column":21},"end":{"line":122,"column":30}},"82":{"start":{"line":123,"column":8},"end":{"line":123,"column":30}},"83":{"start":{"line":124,"column":8},"end":{"line":124,"column":41}},"84":{"start":{"line":126,"column":4},"end":{"line":126,"column":27}}},"branchMap":{"1":{"line":11,"type":"binary-expr","locations":[{"start":{"line":11,"column":19},"end":{"line":11,"column":26}},{"start":{"line":11,"column":30},"end":{"line":11,"column":32}}]},"2":{"line":15,"type":"cond-expr","locations":[{"start":{"line":16,"column":8},"end":{"line":16,"column":27}},{"start":{"line":16,"column":30},"end":{"line":16,"column":51}}]},"3":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":30,"column":4}},{"start":{"line":30,"column":4},"end":{"line":30,"column":4}}]},"4":{"line":34,"type":"if","locations":[{"start":{"line":34,"column":4},"end":{"line":34,"column":4}},{"start":{"line":34,"column":4},"end":{"line":34,"column":4}}]},"5":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":11},"end":{"line":36,"column":11}},{"start":{"line":36,"column":11},"end":{"line":36,"column":11}}]},"6":{"line":47,"type":"if","locations":[{"start":{"line":47,"column":8},"end":{"line":47,"column":8}},{"start":{"line":47,"column":8},"end":{"line":47,"column":8}}]},"7":{"line":47,"type":"binary-expr","locations":[{"start":{"line":47,"column":12},"end":{"line":47,"column":27}},{"start":{"line":47,"column":31},"end":{"line":47,"column":42}}]},"8":{"line":61,"type":"if","locations":[{"start":{"line":61,"column":8},"end":{"line":61,"column":8}},{"start":{"line":61,"column":8},"end":{"line":61,"column":8}}]},"9":{"line":63,"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":63,"column":8}},{"start":{"line":63,"column":8},"end":{"line":63,"column":8}}]},"10":{"line":68,"type":"if","locations":[{"start":{"line":68,"column":8},"end":{"line":68,"column":8}},{"start":{"line":68,"column":8},"end":{"line":68,"column":8}}]},"11":{"line":82,"type":"binary-expr","locations":[{"start":{"line":82,"column":15},"end":{"line":82,"column":29}},{"start":{"line":82,"column":34},"end":{"line":82,"column":53}}]},"12":{"line":86,"type":"if","locations":[{"start":{"line":86,"column":4},"end":{"line":86,"column":4}},{"start":{"line":86,"column":4},"end":{"line":86,"column":4}}]},"13":{"line":87,"type":"cond-expr","locations":[{"start":{"line":88,"column":12},"end":{"line":88,"column":31}},{"start":{"line":88,"column":34},"end":{"line":88,"column":55}}]},"14":{"line":89,"type":"if","locations":[{"start":{"line":89,"column":8},"end":{"line":89,"column":8}},{"start":{"line":89,"column":8},"end":{"line":89,"column":8}}]},"15":{"line":101,"type":"if","locations":[{"start":{"line":101,"column":4},"end":{"line":101,"column":4}},{"start":{"line":101,"column":4},"end":{"line":101,"column":4}}]},"16":{"line":113,"type":"binary-expr","locations":[{"start":{"line":113,"column":20},"end":{"line":113,"column":25}},{"start":{"line":113,"column":27},"end":{"line":113,"column":44}},{"start":{"line":113,"column":49},"end":{"line":113,"column":53}}]},"17":{"line":119,"type":"binary-expr","locations":[{"start":{"line":119,"column":17},"end":{"line":119,"column":21}},{"start":{"line":119,"column":25},"end":{"line":119,"column":38}}]},"18":{"line":122,"type":"if","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":8}},{"start":{"line":122,"column":8},"end":{"line":122,"column":8}}]},"19":{"line":123,"type":"binary-expr","locations":[{"start":{"line":123,"column":17},"end":{"line":123,"column":23}},{"start":{"line":123,"column":27},"end":{"line":123,"column":29}}]}},"code":["\"use strict\";","var Spec = require('./Spec');","var Storage = require('./Storage');","","","/** SharedWebStorage may use localStorage or sessionStorage"," *  to cache data. The role of ShWS is dual: it may also"," *  bridge ops from one browser tab/window to another using"," *  HTML5 onstorage events. */","function SharedWebStorage(id, options) {","    this.options = options || {};","    this.lstn = {};","    this._id = id;","    this.tails = {};","    this.store = this.options.persistent ?","        window.localStorage : window.sessionStorage;","","    this.loadLog();","    this.installListeners();","}","","SharedWebStorage.prototype = new Storage();","SharedWebStorage.prototype.isRoot = false;","module.exports = SharedWebStorage;","","","SharedWebStorage.prototype.onOp = function (spec, value) {","    var ti = spec.filter('/#');","    var vo = spec.filter('!.');","    if (!vo.toString()) {","        return; // state, not an op","    }","    var tail = this.tails[ti];","    if (!tail) {","        tail = this.tails[ti] = [];","    } else if (tail.indexOf(vo)!==-1) {","        return; // replay","    }","    tail.push(vo);","    this.emit(spec,value);","};","","","SharedWebStorage.prototype.installListeners = function () {","    var self = this;","    function onStorageChange(ev) {","        if (Spec.is(ev.key) && ev.newValue) {","            self.onOp(new Spec(ev.key), JSON.parse(ev.newValue));","        }","    }","    window.addEventListener('storage', onStorageChange, false);","};","","","SharedWebStorage.prototype.loadLog = function () {","    // scan/sort specs for existing records","    var store = this.store;","    var ti;","    for (var i = 0; i < store.length; i++) {","        var key = store.key(i);","        if (!Spec.is(key)) { continue; }","        var spec = new Spec(key);","        if (spec.pattern() !== '/#!.') {","            continue; // ops only","        }","        ti = spec.filter('/#');","        var tail = this.tails[ti];","        if (!tail) {","            tail = this.tails[ti] = [];","        }","        tail.push(spec.filter('!.'));","    }","    for (ti in this.tails) {","        this.tails[ti].sort();","    }","};","","","SharedWebStorage.prototype.writeOp = function wsOp(spec, value, src) {","    var ti = spec.filter('/#');","    var vm = spec.filter('!.');","    var tail = this.tails[ti] || (this.tails[ti] = []);","    tail.push(vm);","    var json = JSON.stringify(value);","    this.store.setItem(spec, json);","    if (this.options.trigger) {","        var otherStore = !this.options.persistent ?","            window.localStorage : window.sessionStorage;","        if (!otherStore.getItem(spec)) {","            otherStore.setItem(spec,json);","            otherStore.removeItem(spec,json);","        }","    }","};","","","SharedWebStorage.prototype.writeState = function wsPatch(spec, state, src) {","    var ti = spec.filter('/#');","    this.store.setItem(ti, JSON.stringify(state));","    var tail = this.tails[ti];","    if (tail) {","        for(var k=0; k<tail.length; k++) {","            this.store.removeItem(ti + tail[k]);","        }","        delete this.tails[ti];","    }","};","","SharedWebStorage.prototype.readState = function (spec, callback) {","    spec = new Spec(spec);","    var ti = spec.filter('/#');","    var state = this.store.getItem(ti);","    callback(null, (state&&JSON.parse(state)) || null);","};","","SharedWebStorage.prototype.readOps = function (ti, callback) {","    var tail = this.tails[ti];","    var parsed = null;","    for(var k=0; tail && k<tail.length; k++) {","        var spec = tail[k];","        var value = this.store.getItem(ti+spec);","        if (!value) {continue;} // it happens","        parsed = parsed || {};","        parsed[spec] = JSON.parse(value);","    }","    callback(null, parsed);","};",""],"l":{"2":1,"3":1,"10":1,"11":0,"12":0,"13":0,"14":0,"15":0,"18":0,"19":0,"22":1,"23":1,"24":1,"27":1,"28":0,"29":0,"30":0,"31":0,"33":0,"34":0,"35":0,"36":0,"37":0,"39":0,"40":0,"44":1,"45":0,"46":1,"47":0,"48":0,"51":0,"55":1,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"66":0,"67":0,"68":0,"69":0,"71":0,"73":0,"74":0,"79":1,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"89":0,"90":0,"91":0,"97":1,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"105":0,"109":1,"110":0,"111":0,"112":0,"113":0,"116":1,"117":0,"118":0,"119":0,"120":0,"121":0,"122":0,"123":0,"124":0,"126":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/SockJSServerStream.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/SockJSServerStream.js","s":{"1":1,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":1,"16":1,"17":0,"18":0,"19":0,"20":1,"21":0,"22":0,"23":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0},"fnMap":{"1":{"name":"SockJSStream","line":3,"loc":{"start":{"line":3,"column":0},"end":{"line":3,"column":26}}},"2":{"name":"(anonymous_2)","line":14,"loc":{"start":{"line":14,"column":19},"end":{"line":14,"column":31}}},"3":{"name":"(anonymous_3)","line":15,"loc":{"start":{"line":15,"column":18},"end":{"line":15,"column":33}}},"4":{"name":"(anonymous_4)","line":27,"loc":{"start":{"line":27,"column":28},"end":{"line":27,"column":50}}},"5":{"name":"(anonymous_5)","line":34,"loc":{"start":{"line":34,"column":31},"end":{"line":34,"column":47}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":23,"column":1}},"2":{"start":{"line":4,"column":4},"end":{"line":5,"column":17}},"3":{"start":{"line":7,"column":4},"end":{"line":9,"column":5}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":69}},"5":{"start":{"line":10,"column":4},"end":{"line":10,"column":17}},"6":{"start":{"line":11,"column":4},"end":{"line":13,"column":5}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":23}},"8":{"start":{"line":14,"column":4},"end":{"line":14,"column":60}},"9":{"start":{"line":14,"column":33},"end":{"line":14,"column":56}},"10":{"start":{"line":15,"column":4},"end":{"line":22,"column":7}},"11":{"start":{"line":16,"column":8},"end":{"line":21,"column":9}},"12":{"start":{"line":17,"column":12},"end":{"line":17,"column":36}},"13":{"start":{"line":19,"column":12},"end":{"line":19,"column":58}},"14":{"start":{"line":20,"column":12},"end":{"line":20,"column":45}},"15":{"start":{"line":25,"column":0},"end":{"line":25,"column":30}},"16":{"start":{"line":27,"column":0},"end":{"line":32,"column":2}},"17":{"start":{"line":28,"column":4},"end":{"line":30,"column":5}},"18":{"start":{"line":29,"column":8},"end":{"line":29,"column":41}},"19":{"start":{"line":31,"column":4},"end":{"line":31,"column":27}},"20":{"start":{"line":34,"column":0},"end":{"line":40,"column":2}},"21":{"start":{"line":35,"column":4},"end":{"line":39,"column":5}},"22":{"start":{"line":36,"column":8},"end":{"line":36,"column":39}},"23":{"start":{"line":38,"column":8},"end":{"line":38,"column":39}}},"branchMap":{"1":{"line":7,"type":"if","locations":[{"start":{"line":7,"column":4},"end":{"line":7,"column":4}},{"start":{"line":7,"column":4},"end":{"line":7,"column":4}}]},"2":{"line":11,"type":"if","locations":[{"start":{"line":11,"column":4},"end":{"line":11,"column":4}},{"start":{"line":11,"column":4},"end":{"line":11,"column":4}}]},"3":{"line":14,"type":"binary-expr","locations":[{"start":{"line":14,"column":33},"end":{"line":14,"column":41}},{"start":{"line":14,"column":45},"end":{"line":14,"column":55}}]},"4":{"line":17,"type":"binary-expr","locations":[{"start":{"line":17,"column":12},"end":{"line":17,"column":19}},{"start":{"line":17,"column":23},"end":{"line":17,"column":35}}]},"5":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":12},"end":{"line":20,"column":20}},{"start":{"line":20,"column":24},"end":{"line":20,"column":44}}]},"6":{"line":28,"type":"if","locations":[{"start":{"line":28,"column":4},"end":{"line":28,"column":4}},{"start":{"line":28,"column":4},"end":{"line":28,"column":4}}]},"7":{"line":35,"type":"if","locations":[{"start":{"line":35,"column":4},"end":{"line":35,"column":4}},{"start":{"line":35,"column":4},"end":{"line":35,"column":4}}]}},"code":["\"use strict\";","","function SockJSStream(ws) {","    var ln = this.lstn = {},","        buf = [];","","    if (typeof ws === 'string') { // url passed","        throw new Error('client-side connections not supported yet');","    }","    this.ws = ws;","    if (ws.readyState !== 1/*WebSocket.OPEN*/) {","        this.buf = buf; //will wait for \"open\"","    }","    ws.on('close', function () { ln.close && ln.close(); });","    ws.on('data', function (msg) {","        try {","            ln.data && ln.data(msg);","        } catch (ex) {","            console.error('message processing fails', ex);","            ln.error && ln.error(ex.message);","        }","    });","}","","module.exports = SockJSStream;","","SockJSStream.prototype.on = function (evname, fn) {","    if (evname in this.lstn) {","        throw new Error('not supported');","    }","    this.lstn[evname] = fn;","};","","SockJSStream.prototype.write = function (data) {","    if (this.buf) {","        this.buf.push(data.toString());","    } else {","        this.ws.write(data.toString());","    }","};","","//TODO SockJS-client env.streams.ws = env.streams.wss = SockJSStream;",""],"l":{"3":1,"4":0,"7":0,"8":0,"10":0,"11":0,"12":0,"14":0,"15":0,"16":0,"17":0,"19":0,"20":0,"25":1,"27":1,"28":0,"29":0,"31":0,"34":1,"35":0,"36":0,"38":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/SockJSStream.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/SockJSStream.js","s":{"1":2,"2":0,"3":0,"4":1,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"SockJSStream","line":7,"loc":{"start":{"line":7,"column":0},"end":{"line":7,"column":27}}},"2":{"name":"(anonymous_2)","line":13,"loc":{"start":{"line":13,"column":16},"end":{"line":13,"column":28}}},"3":{"name":"(anonymous_3)","line":20,"loc":{"start":{"line":20,"column":17},"end":{"line":20,"column":29}}},"4":{"name":"(anonymous_4)","line":21,"loc":{"start":{"line":21,"column":19},"end":{"line":21,"column":34}}},"5":{"name":"(anonymous_5)","line":26,"loc":{"start":{"line":26,"column":28},"end":{"line":26,"column":50}}},"6":{"name":"(anonymous_6)","line":30,"loc":{"start":{"line":30,"column":28},"end":{"line":30,"column":40}}},"7":{"name":"(anonymous_7)","line":39,"loc":{"start":{"line":39,"column":31},"end":{"line":39,"column":47}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":29}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":20}},"4":{"start":{"line":7,"column":0},"end":{"line":24,"column":1}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":20}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":28}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":50}},"8":{"start":{"line":11,"column":4},"end":{"line":11,"column":44}},"9":{"start":{"line":12,"column":4},"end":{"line":12,"column":28}},"10":{"start":{"line":13,"column":4},"end":{"line":19,"column":6}},"11":{"start":{"line":14,"column":8},"end":{"line":14,"column":22}},"12":{"start":{"line":15,"column":8},"end":{"line":15,"column":24}},"13":{"start":{"line":16,"column":8},"end":{"line":18,"column":9}},"14":{"start":{"line":17,"column":12},"end":{"line":17,"column":34}},"15":{"start":{"line":20,"column":4},"end":{"line":20,"column":57}},"16":{"start":{"line":20,"column":31},"end":{"line":20,"column":54}},"17":{"start":{"line":21,"column":4},"end":{"line":23,"column":6}},"18":{"start":{"line":22,"column":8},"end":{"line":22,"column":37}},"19":{"start":{"line":26,"column":0},"end":{"line":37,"column":2}},"20":{"start":{"line":27,"column":4},"end":{"line":36,"column":5}},"21":{"start":{"line":28,"column":8},"end":{"line":29,"column":40}},"22":{"start":{"line":30,"column":8},"end":{"line":33,"column":10}},"23":{"start":{"line":31,"column":12},"end":{"line":31,"column":43}},"24":{"start":{"line":32,"column":12},"end":{"line":32,"column":38}},"25":{"start":{"line":35,"column":8},"end":{"line":35,"column":31}},"26":{"start":{"line":39,"column":0},"end":{"line":45,"column":2}},"27":{"start":{"line":40,"column":4},"end":{"line":44,"column":5}},"28":{"start":{"line":41,"column":8},"end":{"line":41,"column":28}},"29":{"start":{"line":43,"column":8},"end":{"line":43,"column":27}},"30":{"start":{"line":47,"column":0},"end":{"line":47,"column":48}},"31":{"start":{"line":48,"column":0},"end":{"line":48,"column":30}}},"branchMap":{"1":{"line":20,"type":"binary-expr","locations":[{"start":{"line":20,"column":31},"end":{"line":20,"column":39}},{"start":{"line":20,"column":43},"end":{"line":20,"column":53}}]},"2":{"line":22,"type":"binary-expr","locations":[{"start":{"line":22,"column":8},"end":{"line":22,"column":15}},{"start":{"line":22,"column":19},"end":{"line":22,"column":36}}]},"3":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"4":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]}},"code":["\"use strict\";","","var SockJS = require('sockjs-client');","var Swarm = require('swarm');","var env = Swarm.env;","","function SockJSStream(url) {","    var self = this;","    var ln = this.lstn = {};","    this.url = url.replace(/^ws(s?):/, 'http$1:');","    var ws = this.ws = new SockJS(this.url);","    var buf = this.buf = [];","    ws.onopen = function () {","        buf.reverse();","        self.buf = null;","        while (buf.length) {","            self.write(buf.pop());","        }","    };","    ws.onclose = function () { ln.close && ln.close(); };","    ws.onmessage = function (msg) {","        ln.data && ln.data(msg.data);","    };","}","","SockJSStream.prototype.on = function (evname, fn) {","    if (evname in this.lstn) {","        var self = this,","            prev_fn = this.lstn[evname];","        this.lstn[evname] = function () {","            prev_fn.apply(self, arguments);","            fn.apply(self, arguments);","        };","    } else {","        this.lstn[evname] = fn;","    }","};","","SockJSStream.prototype.write = function (data) {","    if (this.buf) {","        this.buf.push(data);","    } else {","        this.ws.send(data);","    }","};","","env.streams.ws = env.streams.wss = SockJSStream;","module.exports = SockJSStream;",""],"l":{"3":2,"4":0,"5":0,"7":1,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"20":0,"21":0,"22":0,"26":0,"27":0,"28":0,"30":0,"31":0,"32":0,"35":0,"39":0,"40":0,"41":0,"43":0,"47":0,"48":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/swarm3-murmur.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/swarm3-murmur.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0},"b":{"1":[0,0,0]},"f":{"1":0},"fnMap":{"1":{"name":"murmurhash3_32_gc","line":18,"loc":{"start":{"line":18,"column":13},"end":{"line":18,"column":51}}}},"statementMap":{"1":{"start":{"line":16,"column":0},"end":{"line":16,"column":30}},"2":{"start":{"line":18,"column":0},"end":{"line":73,"column":2}},"3":{"start":{"line":19,"column":4},"end":{"line":19,"column":49}},"4":{"start":{"line":21,"column":4},"end":{"line":21,"column":31}},"5":{"start":{"line":22,"column":4},"end":{"line":22,"column":35}},"6":{"start":{"line":23,"column":4},"end":{"line":23,"column":14}},"7":{"start":{"line":24,"column":4},"end":{"line":24,"column":20}},"8":{"start":{"line":25,"column":4},"end":{"line":25,"column":20}},"9":{"start":{"line":26,"column":4},"end":{"line":26,"column":10}},"10":{"start":{"line":28,"column":4},"end":{"line":44,"column":5}},"11":{"start":{"line":29,"column":8},"end":{"line":33,"column":53}},"12":{"start":{"line":34,"column":8},"end":{"line":34,"column":12}},"13":{"start":{"line":36,"column":8},"end":{"line":36,"column":91}},"14":{"start":{"line":37,"column":8},"end":{"line":37,"column":38}},"15":{"start":{"line":38,"column":8},"end":{"line":38,"column":91}},"16":{"start":{"line":40,"column":8},"end":{"line":40,"column":17}},"17":{"start":{"line":41,"column":8},"end":{"line":41,"column":38}},"18":{"start":{"line":42,"column":8},"end":{"line":42,"column":90}},"19":{"start":{"line":43,"column":8},"end":{"line":43,"column":86}},"20":{"start":{"line":46,"column":4},"end":{"line":46,"column":11}},"21":{"start":{"line":48,"column":4},"end":{"line":62,"column":5}},"22":{"start":{"line":50,"column":8},"end":{"line":50,"column":51}},"23":{"start":{"line":53,"column":8},"end":{"line":53,"column":50}},"24":{"start":{"line":56,"column":8},"end":{"line":56,"column":41}},"25":{"start":{"line":58,"column":8},"end":{"line":58,"column":89}},"26":{"start":{"line":59,"column":8},"end":{"line":59,"column":38}},"27":{"start":{"line":60,"column":8},"end":{"line":60,"column":89}},"28":{"start":{"line":61,"column":8},"end":{"line":61,"column":17}},"29":{"start":{"line":64,"column":4},"end":{"line":64,"column":21}},"30":{"start":{"line":66,"column":4},"end":{"line":66,"column":20}},"31":{"start":{"line":67,"column":4},"end":{"line":67,"column":101}},"32":{"start":{"line":68,"column":4},"end":{"line":68,"column":20}},"33":{"start":{"line":69,"column":4},"end":{"line":69,"column":103}},"34":{"start":{"line":70,"column":4},"end":{"line":70,"column":20}},"35":{"start":{"line":72,"column":4},"end":{"line":72,"column":20}}},"branchMap":{"1":{"line":48,"type":"switch","locations":[{"start":{"line":49,"column":4},"end":{"line":50,"column":51}},{"start":{"line":52,"column":4},"end":{"line":53,"column":50}},{"start":{"line":55,"column":4},"end":{"line":61,"column":17}}]}},"code":["\"use strict\";","","/**"," * JS Implementation of MurmurHash3 (r136) (as of May 20, 2011)"," *"," * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>"," * @see http://github.com/garycourt/murmurhash-js"," * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>"," * @see http://sites.google.com/site/murmurhash/"," *"," * @param {string} key ASCII only"," * @param {number} seed Positive integer only"," * @return {number} 32-bit positive integer hash"," */","","var env = require('./env.js');","","env.hashfn = function murmurhash3_32_gc(key, seed) {","    var remainder, bytes, h1, h1b, c1, c2, k1, i;","","    remainder = key.length & 3; // key.length % 4","    bytes = key.length - remainder;","    h1 = seed;","    c1 = 0xcc9e2d51;","    c2 = 0x1b873593;","    i = 0;","","    while (i < bytes) {","        k1 =","                ((key.charCodeAt(i) & 0xff)) |","                ((key.charCodeAt(++i) & 0xff) << 8) |","                ((key.charCodeAt(++i) & 0xff) << 16) |","                ((key.charCodeAt(++i) & 0xff) << 24);","        ++i;","","        k1 = ((((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16))) & 0xffffffff;","        k1 = (k1 << 15) | (k1 >>> 17);","        k1 = ((((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16))) & 0xffffffff;","","        h1 ^= k1;","        h1 = (h1 << 13) | (h1 >>> 19);","        h1b = ((((h1 & 0xffff) * 5) + ((((h1 >>> 16) * 5) & 0xffff) << 16))) & 0xffffffff;","        h1 = (((h1b & 0xffff) + 0x6b64) + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16));","    }","","    k1 = 0;","","    switch (remainder) {","    case 3:","        k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;","        /* falls through */","    case 2:","        k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;","        /* falls through */","    case 1:","        k1 ^= (key.charCodeAt(i) & 0xff);","","        k1 = (((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;","        k1 = (k1 << 15) | (k1 >>> 17);","        k1 = (((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;","        h1 ^= k1;","    }","","    h1 ^= key.length;","","    h1 ^= h1 >>> 16;","    h1 = (((h1 & 0xffff) * 0x85ebca6b) + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;","    h1 ^= h1 >>> 13;","    h1 = ((((h1 & 0xffff) * 0xc2b2ae35) + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16))) & 0xffffffff;","    h1 ^= h1 >>> 16;","","    return h1 >>> 0;","};",""],"l":{"16":1,"18":1,"19":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"28":0,"29":0,"34":0,"36":0,"37":0,"38":0,"40":0,"41":0,"42":0,"43":0,"46":0,"48":0,"50":0,"53":0,"56":0,"58":0,"59":0,"60":0,"61":0,"64":0,"66":0,"67":0,"68":0,"69":0,"70":0,"72":0}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Text.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/Text.js","s":{"1":1,"2":1,"3":1,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":1,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":1,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0,0],"15":[0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},"fnMap":{"1":{"name":"(anonymous_1)","line":16,"loc":{"start":{"line":16,"column":15},"end":{"line":16,"column":42}}},"2":{"name":"(anonymous_2)","line":21,"loc":{"start":{"line":21,"column":16},"end":{"line":21,"column":42}}},"3":{"name":"(anonymous_3)","line":59,"loc":{"start":{"line":59,"column":16},"end":{"line":59,"column":41}}},"4":{"name":"(anonymous_4)","line":75,"loc":{"start":{"line":75,"column":13},"end":{"line":75,"column":25}}},"5":{"name":"(anonymous_5)","line":89,"loc":{"start":{"line":89,"column":9},"end":{"line":89,"column":28}}},"6":{"name":"skip","line":95,"loc":{"start":{"line":95,"column":8},"end":{"line":95,"column":25}}},"7":{"name":"diff","line":126,"loc":{"start":{"line":126,"column":12},"end":{"line":126,"column":35}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":29}},"2":{"start":{"line":4,"column":0},"end":{"line":4,"column":37}},"3":{"start":{"line":6,"column":0},"end":{"line":124,"column":3}},"4":{"start":{"line":17,"column":12},"end":{"line":17,"column":33}},"5":{"start":{"line":22,"column":12},"end":{"line":22,"column":33}},"6":{"start":{"line":23,"column":12},"end":{"line":23,"column":50}},"7":{"start":{"line":24,"column":12},"end":{"line":24,"column":63}},"8":{"start":{"line":25,"column":12},"end":{"line":25,"column":42}},"9":{"start":{"line":26,"column":12},"end":{"line":51,"column":13}},"10":{"start":{"line":27,"column":16},"end":{"line":27,"column":37}},"11":{"start":{"line":28,"column":16},"end":{"line":28,"column":46}},"12":{"start":{"line":29,"column":16},"end":{"line":29,"column":28}},"13":{"start":{"line":30,"column":16},"end":{"line":50,"column":17}},"14":{"start":{"line":31,"column":20},"end":{"line":31,"column":49}},"15":{"start":{"line":32,"column":20},"end":{"line":32,"column":34}},"16":{"start":{"line":33,"column":20},"end":{"line":35,"column":21}},"17":{"start":{"line":34,"column":24},"end":{"line":34,"column":28}},"18":{"start":{"line":36,"column":20},"end":{"line":49,"column":21}},"19":{"start":{"line":37,"column":24},"end":{"line":37,"column":52}},"20":{"start":{"line":38,"column":24},"end":{"line":38,"column":45}},"21":{"start":{"line":39,"column":24},"end":{"line":39,"column":39}},"22":{"start":{"line":41,"column":24},"end":{"line":48,"column":25}},"23":{"start":{"line":42,"column":28},"end":{"line":42,"column":51}},"24":{"start":{"line":43,"column":28},"end":{"line":43,"column":99}},"25":{"start":{"line":44,"column":28},"end":{"line":44,"column":43}},"26":{"start":{"line":45,"column":28},"end":{"line":47,"column":29}},"27":{"start":{"line":46,"column":32},"end":{"line":46,"column":41}},"28":{"start":{"line":52,"column":12},"end":{"line":54,"column":13}},"29":{"start":{"line":53,"column":16},"end":{"line":53,"column":55}},"30":{"start":{"line":55,"column":12},"end":{"line":55,"column":37}},"31":{"start":{"line":56,"column":12},"end":{"line":56,"column":26}},"32":{"start":{"line":57,"column":12},"end":{"line":57,"column":27}},"33":{"start":{"line":60,"column":12},"end":{"line":60,"column":33}},"34":{"start":{"line":61,"column":12},"end":{"line":61,"column":35}},"35":{"start":{"line":62,"column":12},"end":{"line":69,"column":13}},"36":{"start":{"line":63,"column":16},"end":{"line":63,"column":46}},"37":{"start":{"line":64,"column":16},"end":{"line":64,"column":37}},"38":{"start":{"line":65,"column":16},"end":{"line":68,"column":17}},"39":{"start":{"line":66,"column":20},"end":{"line":66,"column":38}},"40":{"start":{"line":67,"column":20},"end":{"line":67,"column":31}},"41":{"start":{"line":70,"column":12},"end":{"line":70,"column":37}},"42":{"start":{"line":71,"column":12},"end":{"line":71,"column":26}},"43":{"start":{"line":72,"column":12},"end":{"line":72,"column":27}},"44":{"start":{"line":87,"column":8},"end":{"line":87,"column":77}},"45":{"start":{"line":90,"column":8},"end":{"line":90,"column":50}},"46":{"start":{"line":91,"column":8},"end":{"line":91,"column":54}},"47":{"start":{"line":92,"column":8},"end":{"line":92,"column":57}},"48":{"start":{"line":93,"column":8},"end":{"line":93,"column":17}},"49":{"start":{"line":95,"column":8},"end":{"line":99,"column":9}},"50":{"start":{"line":96,"column":12},"end":{"line":98,"column":13}},"51":{"start":{"line":97,"column":16},"end":{"line":97,"column":43}},"52":{"start":{"line":101,"column":8},"end":{"line":101,"column":16}},"53":{"start":{"line":103,"column":8},"end":{"line":120,"column":9}},"54":{"start":{"line":104,"column":12},"end":{"line":104,"column":52}},"55":{"start":{"line":105,"column":12},"end":{"line":119,"column":13}},"56":{"start":{"line":107,"column":16},"end":{"line":107,"column":34}},"57":{"start":{"line":108,"column":16},"end":{"line":108,"column":48}},"58":{"start":{"line":109,"column":16},"end":{"line":109,"column":22}},"59":{"start":{"line":111,"column":16},"end":{"line":111,"column":32}},"60":{"start":{"line":112,"column":16},"end":{"line":115,"column":17}},"61":{"start":{"line":113,"column":20},"end":{"line":113,"column":69}},"62":{"start":{"line":114,"column":20},"end":{"line":114,"column":27}},"63":{"start":{"line":116,"column":16},"end":{"line":116,"column":22}},"64":{"start":{"line":118,"column":16},"end":{"line":118,"column":33}},"65":{"start":{"line":121,"column":8},"end":{"line":121,"column":30}},"66":{"start":{"line":122,"column":8},"end":{"line":122,"column":32}},"67":{"start":{"line":126,"column":0},"end":{"line":154,"column":2}},"68":{"start":{"line":127,"column":4},"end":{"line":127,"column":17}},"69":{"start":{"line":129,"column":4},"end":{"line":129,"column":16}},"70":{"start":{"line":130,"column":4},"end":{"line":132,"column":5}},"71":{"start":{"line":131,"column":8},"end":{"line":131,"column":14}},"72":{"start":{"line":133,"column":4},"end":{"line":133,"column":17}},"73":{"start":{"line":134,"column":4},"end":{"line":137,"column":5}},"74":{"start":{"line":136,"column":8},"end":{"line":136,"column":15}},"75":{"start":{"line":138,"column":4},"end":{"line":140,"column":5}},"76":{"start":{"line":139,"column":8},"end":{"line":139,"column":44}},"77":{"start":{"line":141,"column":4},"end":{"line":141,"column":37}},"78":{"start":{"line":142,"column":4},"end":{"line":144,"column":5}},"79":{"start":{"line":143,"column":8},"end":{"line":143,"column":45}},"80":{"start":{"line":145,"column":4},"end":{"line":145,"column":37}},"81":{"start":{"line":146,"column":4},"end":{"line":148,"column":5}},"82":{"start":{"line":147,"column":8},"end":{"line":147,"column":45}},"83":{"start":{"line":149,"column":4},"end":{"line":151,"column":5}},"84":{"start":{"line":150,"column":8},"end":{"line":150,"column":46}},"85":{"start":{"line":152,"column":4},"end":{"line":152,"column":15}},"86":{"start":{"line":156,"column":0},"end":{"line":156,"column":22}}},"branchMap":{"1":{"line":24,"type":"binary-expr","locations":[{"start":{"line":24,"column":43},"end":{"line":24,"column":54}},{"start":{"line":24,"column":58},"end":{"line":24,"column":62}}]},"2":{"line":30,"type":"if","locations":[{"start":{"line":30,"column":16},"end":{"line":30,"column":16}},{"start":{"line":30,"column":16},"end":{"line":30,"column":16}}]},"3":{"line":33,"type":"binary-expr","locations":[{"start":{"line":33,"column":27},"end":{"line":33,"column":48}},{"start":{"line":33,"column":52},"end":{"line":33,"column":73}}]},"4":{"line":36,"type":"if","locations":[{"start":{"line":36,"column":20},"end":{"line":36,"column":20}},{"start":{"line":36,"column":20},"end":{"line":36,"column":20}}]},"5":{"line":43,"type":"cond-expr","locations":[{"start":{"line":43,"column":53},"end":{"line":43,"column":77}},{"start":{"line":43,"column":80},"end":{"line":43,"column":82}}]},"6":{"line":45,"type":"if","locations":[{"start":{"line":45,"column":28},"end":{"line":45,"column":28}},{"start":{"line":45,"column":28},"end":{"line":45,"column":28}}]},"7":{"line":52,"type":"if","locations":[{"start":{"line":52,"column":12},"end":{"line":52,"column":12}},{"start":{"line":52,"column":12},"end":{"line":52,"column":12}}]},"8":{"line":65,"type":"if","locations":[{"start":{"line":65,"column":16},"end":{"line":65,"column":16}},{"start":{"line":65,"column":16},"end":{"line":65,"column":16}}]},"9":{"line":105,"type":"switch","locations":[{"start":{"line":106,"column":12},"end":{"line":109,"column":22}},{"start":{"line":110,"column":12},"end":{"line":116,"column":22}},{"start":{"line":117,"column":12},"end":{"line":118,"column":33}}]},"10":{"line":107,"type":"binary-expr","locations":[{"start":{"line":107,"column":16},"end":{"line":107,"column":19}},{"start":{"line":107,"column":24},"end":{"line":107,"column":32}}]},"11":{"line":111,"type":"binary-expr","locations":[{"start":{"line":111,"column":16},"end":{"line":111,"column":18}},{"start":{"line":111,"column":23},"end":{"line":111,"column":30}}]},"12":{"line":121,"type":"binary-expr","locations":[{"start":{"line":121,"column":8},"end":{"line":121,"column":10}},{"start":{"line":121,"column":14},"end":{"line":121,"column":29}}]},"13":{"line":122,"type":"binary-expr","locations":[{"start":{"line":122,"column":8},"end":{"line":122,"column":11}},{"start":{"line":122,"column":15},"end":{"line":122,"column":31}}]},"14":{"line":130,"type":"binary-expr","locations":[{"start":{"line":130,"column":11},"end":{"line":130,"column":27}},{"start":{"line":130,"column":31},"end":{"line":130,"column":46}},{"start":{"line":130,"column":50},"end":{"line":130,"column":84}}]},"15":{"line":134,"type":"binary-expr","locations":[{"start":{"line":134,"column":11},"end":{"line":134,"column":34}},{"start":{"line":134,"column":38},"end":{"line":134,"column":60}},{"start":{"line":135,"column":4},"end":{"line":135,"column":73}}]},"16":{"line":138,"type":"if","locations":[{"start":{"line":138,"column":4},"end":{"line":138,"column":4}},{"start":{"line":138,"column":4},"end":{"line":138,"column":4}}]},"17":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":4},"end":{"line":142,"column":4}},{"start":{"line":142,"column":4},"end":{"line":142,"column":4}}]},"18":{"line":146,"type":"if","locations":[{"start":{"line":146,"column":4},"end":{"line":146,"column":4}},{"start":{"line":146,"column":4},"end":{"line":146,"column":4}}]},"19":{"line":149,"type":"if","locations":[{"start":{"line":149,"column":4},"end":{"line":149,"column":4}},{"start":{"line":149,"column":4},"end":{"line":149,"column":4}}]}},"code":["\"use strict\";","","var Spec = require('./Spec');","var Syncable = require('./Syncable');","","var Text = Syncable.extend('Text', {","    // naive uncompressed CT weave implementation","    defaults: {","        weave: '\\n',","        ids: {type:Array, value:'00000+swarm'},","        text: '',","        _oplog: Object","    },","","    neutrals: {","        state: function (spec, text, src) {","            console.log('what?');","        }","    },","    ops: {","        insert: function (spec, ins, src) {","            var w1 = [], w4 = [];","            var vt = spec.token('!'), v = vt.bare;","            var ts = v.substr(0, 5), seq = v.substr(5) || '00';","            var seqi = Spec.base2int(seq);","            for (var i = 0; i < this.weave.length; i++) {","                var id = this.ids[i];","                w1.push(this.weave.charAt(i));","                w4.push(id);","                if (id in ins) {","                    var str = ins[id].toString();","                    var k = i + 1;","                    while (k < this.weave.length && this.ids[k] > vt.body) {","                        k++;","                    }","                    if (k > i + 1) { // concurrent edits","                        var newid = this.ids[k - 1];","                        ins[newid] = ins[id];","                        delete ins[id];","                    } else {","                        for (var j = 0; j < str.length; j++) {","                            w1.push(str.charAt(j)); // FIXME overfill","                            var genTs = ts + (seqi ? Spec.int2base(seqi++, 2) : '') + '+' + vt.ext;","                            w4.push(genTs);","                            if (!seqi) {","                                seqi = 1; // FIXME repeat ids, double insert","                            }","                        }","                    }","                }","            }","            if (genTs) {","                this._host.clock.checkTimestamp(genTs);","            }","            this.weave = w1.join('');","            this.ids = w4;","            this.rebuild();","        },","        remove: function (spec, rm, src) {","            var w1 = [], w4 = [];","            var v = spec.version();","            for (var i = 0; i < this.weave.length; i++) {","                w1.push(this.weave.charAt(i));","                w4.push(this.ids[i]);","                if (this.ids[i] in rm) {","                    w1.push('\\u0008');","                    w4.push(v);","                }","            }","            this.weave = w1.join('');","            this.ids = w4;","            this.rebuild();","        }","    },","    rebuild: function () {","        /*var re = /([^\\u0008][\\u0008]+)|([^\\u0008])/g, m=[];","         var text = [], tids = [], pos = 0;","         while (m=re.exec(this.weave)) {","         if (m[2]) {","         text.push(m[2]);","         tids.push(this.ids[pos]);","         }","         pos += m[0].length;","         }","","         this.tids = tids;*/","        this.text = this.weave.replace(/[^\\u0008][\\u0008]+/mg, '').substr(1);","    },","    set: function (newText) {","        var patch = Text.diff(this.text, newText);","        var rm = null, ins = null, weave = this.weave;","        var re_atom = /[^\\u0008]([^\\u0008][\\u0008]+)*/mg;","        var atom;","","        function skip(n) {","            for (n = n || 1; n > 0; n--) {","                atom = re_atom.exec(weave);","            }","        }","","        skip(1); // \\n #00000+swarm","","        for (var i = 0; i < patch.length; i++) {","            var op = patch[i][0], val = patch[i][1];","            switch (op) {","            case '+':","                ins || (ins = {});","                ins[this.ids[atom.index]] = val;","                break;","            case '-':","                rm || (rm = {});","                for (var r = 0; r < val.length; r++) {","                    rm[this.ids[atom.index + atom[0].length]] = true;","                    skip();","                }","                break;","            case '=':","                skip(val.length);","            }","        }","        rm && this.remove(rm);","        ins && this.insert(ins);","    }","});","","Text.diff = function diff(was, is) {","    var ret = [];","    // prefix suffix the rest is change","    var pre = 0;","    while (pre < was.length && pre < is.length && was.charAt(pre) === is.charAt(pre)) {","        pre++;","    }","    var post = 0;","    while (post < was.length - pre && post < is.length - pre &&","    was.charAt(was.length - post - 1) === is.charAt(is.length - post - 1)) {","        post++;","    }","    if (pre) {","        ret.push(['=', was.substr(0, pre)]);","    }","    var ins = is.length - pre - post;","    if (ins) {","        ret.push(['+', is.substr(pre, ins)]);","    }","    var rm = was.length - pre - post;","    if (rm) {","        ret.push(['-', was.substr(pre, rm)]);","    }","    if (post) {","        ret.push(['=', was.substr(pre + rm)]);","    }","    return ret;","","};","","module.exports = Text;",""],"l":{"3":1,"4":1,"6":1,"17":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"36":0,"37":0,"38":0,"39":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"52":0,"53":0,"55":0,"56":0,"57":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"70":0,"71":0,"72":0,"87":0,"90":0,"91":0,"92":0,"93":0,"95":1,"96":0,"97":0,"101":0,"103":0,"104":0,"105":0,"107":0,"108":0,"109":0,"111":0,"112":0,"113":0,"114":0,"116":0,"118":0,"121":0,"122":0,"126":1,"127":0,"129":0,"130":0,"131":0,"133":0,"134":0,"136":0,"138":0,"139":0,"141":0,"142":0,"143":0,"145":0,"146":0,"147":0,"149":0,"150":0,"152":0,"156":1}},"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/WebSocketStream.js":{"path":"/home/travis/build/npmtest/node-npmtest-swarm/node_modules/swarm/lib/WebSocketStream.js","s":{"1":1,"2":1,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":1,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":0,"28":0,"29":0,"30":1,"31":1},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},"fnMap":{"1":{"name":"WebSocketStream","line":5,"loc":{"start":{"line":5,"column":0},"end":{"line":5,"column":30}}},"2":{"name":"(anonymous_2)","line":11,"loc":{"start":{"line":11,"column":16},"end":{"line":11,"column":28}}},"3":{"name":"(anonymous_3)","line":19,"loc":{"start":{"line":19,"column":17},"end":{"line":19,"column":29}}},"4":{"name":"(anonymous_4)","line":20,"loc":{"start":{"line":20,"column":19},"end":{"line":20,"column":34}}},"5":{"name":"(anonymous_5)","line":23,"loc":{"start":{"line":23,"column":17},"end":{"line":23,"column":32}}},"6":{"name":"(anonymous_6)","line":26,"loc":{"start":{"line":26,"column":31},"end":{"line":26,"column":53}}},"7":{"name":"(anonymous_7)","line":30,"loc":{"start":{"line":30,"column":28},"end":{"line":30,"column":40}}},"8":{"name":"(anonymous_8)","line":39,"loc":{"start":{"line":39,"column":34},"end":{"line":39,"column":50}}}},"statementMap":{"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":27}},"2":{"start":{"line":5,"column":0},"end":{"line":24,"column":1}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":20}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":28}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":19}},"6":{"start":{"line":9,"column":4},"end":{"line":9,"column":42}},"7":{"start":{"line":10,"column":4},"end":{"line":10,"column":28}},"8":{"start":{"line":11,"column":4},"end":{"line":18,"column":6}},"9":{"start":{"line":12,"column":8},"end":{"line":12,"column":22}},"10":{"start":{"line":13,"column":8},"end":{"line":13,"column":24}},"11":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"12":{"start":{"line":15,"column":12},"end":{"line":15,"column":34}},"13":{"start":{"line":19,"column":4},"end":{"line":19,"column":57}},"14":{"start":{"line":19,"column":31},"end":{"line":19,"column":54}},"15":{"start":{"line":20,"column":4},"end":{"line":22,"column":6}},"16":{"start":{"line":21,"column":8},"end":{"line":21,"column":37}},"17":{"start":{"line":23,"column":4},"end":{"line":23,"column":63}},"18":{"start":{"line":23,"column":34},"end":{"line":23,"column":60}},"19":{"start":{"line":26,"column":0},"end":{"line":37,"column":2}},"20":{"start":{"line":27,"column":4},"end":{"line":36,"column":5}},"21":{"start":{"line":28,"column":8},"end":{"line":29,"column":40}},"22":{"start":{"line":30,"column":8},"end":{"line":33,"column":10}},"23":{"start":{"line":31,"column":12},"end":{"line":31,"column":43}},"24":{"start":{"line":32,"column":12},"end":{"line":32,"column":38}},"25":{"start":{"line":35,"column":8},"end":{"line":35,"column":31}},"26":{"start":{"line":39,"column":0},"end":{"line":45,"column":2}},"27":{"start":{"line":40,"column":4},"end":{"line":44,"column":5}},"28":{"start":{"line":41,"column":8},"end":{"line":41,"column":28}},"29":{"start":{"line":43,"column":8},"end":{"line":43,"column":27}},"30":{"start":{"line":47,"column":0},"end":{"line":47,"column":51}},"31":{"start":{"line":48,"column":0},"end":{"line":48,"column":33}}},"branchMap":{"1":{"line":19,"type":"binary-expr","locations":[{"start":{"line":19,"column":31},"end":{"line":19,"column":39}},{"start":{"line":19,"column":43},"end":{"line":19,"column":53}}]},"2":{"line":21,"type":"binary-expr","locations":[{"start":{"line":21,"column":8},"end":{"line":21,"column":15}},{"start":{"line":21,"column":19},"end":{"line":21,"column":36}}]},"3":{"line":23,"type":"binary-expr","locations":[{"start":{"line":23,"column":34},"end":{"line":23,"column":42}},{"start":{"line":23,"column":46},"end":{"line":23,"column":59}}]},"4":{"line":27,"type":"if","locations":[{"start":{"line":27,"column":4},"end":{"line":27,"column":4}},{"start":{"line":27,"column":4},"end":{"line":27,"column":4}}]},"5":{"line":40,"type":"if","locations":[{"start":{"line":40,"column":4},"end":{"line":40,"column":4}},{"start":{"line":40,"column":4},"end":{"line":40,"column":4}}]}},"code":["\"use strict\";","","var env = require('./env');","","function WebSocketStream(url) {","    var self = this;","    var ln = this.lstn = {};","    this.url = url;","    var ws = this.ws = new WebSocket(url);","    var buf = this.buf = [];","    ws.onopen = function () {","        buf.reverse();","        self.buf = null;","        while (buf.length) {","            self.write(buf.pop());","        }","","    };","    ws.onclose = function () { ln.close && ln.close(); };","    ws.onmessage = function (msg) {","        ln.data && ln.data(msg.data);","    };","    ws.onerror = function (err) { ln.error && ln.error(err); };","}","","WebSocketStream.prototype.on = function (evname, fn) {","    if (evname in this.lstn) {","        var self = this,","            prev_fn = this.lstn[evname];","        this.lstn[evname] = function () {","            prev_fn.apply(self, arguments);","            fn.apply(self, arguments);","        };","    } else {","        this.lstn[evname] = fn;","    }","};","","WebSocketStream.prototype.write = function (data) {","    if (this.buf) {","        this.buf.push(data);","    } else {","        this.ws.send(data);","    }","};","","env.streams.ws = env.streams.wss = WebSocketStream;","module.exports = WebSocketStream;",""],"l":{"3":1,"5":1,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"19":0,"20":0,"21":0,"23":0,"26":1,"27":0,"28":0,"30":0,"31":0,"32":0,"35":0,"39":1,"40":0,"41":0,"43":0,"47":1,"48":1}}}